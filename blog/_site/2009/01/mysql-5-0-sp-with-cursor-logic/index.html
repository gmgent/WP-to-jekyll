<!DOCTYPE html>
<html dir="ltr" lang="en-US">
    <head>
        <meta charset="UTF-8" />
        <title>MySQL 5.0 SP with Cursor Logic</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" type="text/css" href="/css/style.css" media="all" />
		
        <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

        <!--  Mobile viewport scale -->
        <meta content="initial-scale=1.0; maximum-scale=1.0; user-scalable=yes" name="viewport"/>

        <!-- Custom Favicon -->
        <link rel="shortcut icon" href="http://blog.kristeraxel.com/wp-content/uploads/2012/11/favicon.ico"/>
        <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/combo?2.9.0/build/reset-fonts-grids/reset-fonts-grids.css&2.9.0/build/base/base-min.css"> 

    </head>

    <body>
	<!-- the id on the containing div determines the page width. -->
	<!-- #doc = 750px; #doc2 = 950px; #doc3 = 100%; #doc4 = 974px -->
	<div id="doc">					
		<div id="hd">
			<div id="header" class="col-full">

   
   <div id="logo">
        <a href="/" title="spotlights in the wild">
            <img src="http://blog.kristeraxel.com/wp-content/uploads/2012/11/header11.jpg" alt="Krister Axel" />
        </a>
   </div><!-- /#logo -->
   
</div><!-- /#header -->
<div id="navigation" class="col-full">
	<ul id="main-nav" class="nav">
		<li id="menu-item-9" class="menu-item">
		    <a href="/" >the latest</a></li>
		
		<li id="menu-item-99" class="menu-item">
		    <a href="/Info/" >Info</a></li>
		
        <li id="menu-item-9999" class="menu-item">
            <a href="/Archive/">Archive</a></li>

		<li id="menu-item-99999" class="menu-item">
            <a href="/Press/" >Press</a></li>

		<li id="menu-item-999999" class="menu-item">
	        <a href="/Search/">Search</a></li>
	
        <li id="menu-item-999999" class="menu-item">
            <a href="/Contact/">Contact</a></li>
        
    </ul>	
</div><!-- /#navigation -->
		</div>
		<div id="bd">
			<h2 class="title">
                MySQL 5.0 SP with Cursor Logic
            </h2>
			<p>I have written a bunch of SPs over the years (stored procedure, as I learned it, but MySQL calls them Stored Routines - SRs?). I even have my best/largest/most complicated SP ever linked here at <a href='http://blog.kristeraxel.com/wp-content/uploads/2009/01/migration189.txt'>migration189</a>.
</p>


<p>That one was of course written in PL/SQL, and I have now officially moved out of the world of Oracle and into the world of MySQL 5.0 - which is sort of like moving from New York City to San Jose (weather notwithstanding).</p>


<p>Anyway, I found precious little RECENT coverage on how MySQL implemented it&#039;s &#039;stored routines&#039;, and I got to tell ya it took some digging - never mind trying to figure out how cursors work. MySQL, btw, has an ok documentation section but it is mediocre at best, somehow following in the fragmented example of the Rails community in what seems to be the curse of the open-source ADD.</p>


<p>So in the spirit of this site which has always been to keep pieces of code lying around that I may use later - here is my very first MySQL sp, which does nothing really useful except use a cursor to insert values into a table. Come back next week for the syntax needed to use parameters, lol.</p>


<p>Other things to notice - you have to declare a separate handler for pulling out of a cursor loop when you run out of records (does anyone else remember fondly how easy ADO recordsets were to use?) but other than that things look all right in MySQL land. Bye Oracle!</p>




<script src="https://gist.github.com/860870.js?file=cursor_sample.sql"></script>




<p>ps, gotta give a shout out to <a href="http://www.razorsql.com/">http://www.razorsql.com/</a> which so far has been easy to use and has served as stand-in IDE for Toad, which is what I was used to.</p>


<p>UPDATE: I now use SEQUEL PRO. (MAR 2011)</p>

			<div class="post-meta">
                <span class="small">By</span> <span class="author vcard"><span class="fn"><a href="http://kristeraxel.com" title="Posts by Krister Axel" rel="author">Krister Axel</a></span></span> 
                <span class="small">on</span> <abbr class="date time published">01/23 2009 at 19_43</abbr> 
                <span class="small">in</span> 
                <span class="categories">
                    
						<a href="/category/Code/">Code</a> 
                    
                </span>
            </div>
		</div>
		<div id="ft">
			<br/>
<hr/>
<table id="footer">
	<tr>
	  <td><span class="leftcol">
	    <ul>
	      <li><a href="http://www.kristeraxel.com" rel="me" title="my home page" target="_blank">kristeraxel.com</a></li>
	      <li><a href="http://axelradio.com" rel="me" title="Download songs by Krister Axel and read the lyrics." target="_blank">Lyrics + Downloads</a></li>
	    </ul>
		</span>
	  </td>
	  <td><span class="midcol">
	    <small>&copy; 24 November 2012 Krister Axel<br/>All Rights Reserved.</small>
		</span>
	  </td>
	  <td><span class="rightcol">
	    <small>designed by <a href="http://kristeraxel.com">Krister Axel</a><br/>powered by <a href="https://github.com/mojombo/jekyll">Jekyll</a></small>
		</span>
	  </td>
	</tr>
	
</table>
		</div>
	</div>
	</body>

</html>