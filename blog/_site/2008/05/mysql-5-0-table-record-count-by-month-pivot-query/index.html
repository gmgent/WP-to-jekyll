<!DOCTYPE html>
<html dir="ltr" lang="en-US">
    <head>
        <meta charset="UTF-8" />
        <title>Krister Axel | MySQL 5.0 Table Record Count By Month Pivot Query</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" type="text/css" href="/css/style.css" media="all" />
		
        <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

        <!--  Mobile viewport scale -->
        <meta content="initial-scale=1.0; maximum-scale=1.0; user-scalable=yes" name="viewport"/>

        <!-- Custom Favicon -->
        <link rel="shortcut icon" href="http://blog.kristeraxel.com/wp-content/uploads/2012/11/favicon.ico"/>


    </head>
    <body class="home blog gecko boxed-layout two-col-left width-820 two-col-left-820">
        <div id="wrapper">
	    
	        <div id="header" class="col-full">

   
    <div id="logo">
        <a href="/" title="spotlights in the wild">
            <img src="http://blog.kristeraxel.com/wp-content/uploads/2012/11/header11.jpg" alt="Krister Axel" />
        </a>
        <h1 class="site-title"><a href="/">Krister Axel</a></h1>
        <span class="site-description">spotlights in the wild</span>
   </div><!-- /#logo -->

   <h3 class="nav-toggle icon"><a href="#navigation">Navigation</a></h3>

   
</div><!-- /#header -->
<div id="navigation" class="col-full">
	<ul id="main-nav" class="nav fl">
		<li id="menu-item-2302" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2302">
		    <a href="/Info/" >Info</a>
		</li>
        <li id="menu-item-2255" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2255">
            <a href="/archive/">Archive</a>
        </li>
		<li id="menu-item-2213" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2213">
            <a href="/Press/" >Press</a></li>
        <li id="menu-item-2212" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2212">
            <a href="/Contact/">Contact</a></li>
        
    </ul>	
</div><!-- /#navigation -->
      
            <!-- #content Starts -->
	        <div id="content" class="col-full">
    
    	        <div id="blog-main">
		
                <!-- #main Starts -->
                    <div id="main" class="col-left">
            	
			
                        <div class="post type-post status-publish format-standard">
                            <h2 class="title">
	                            MySQL 5.0 Table Record Count By Month Pivot Query
	                        </h2>
	                        
	                        <div class="entry">
	                            <p><p>So there I was, hanging out at work on my birthday. I had a little time, so I decided to answer some Ruby forum questions (<a href="http://railsforum.com/" title="http://railsforum.com/">http://railsforum.com/</a>). I went through a few on them, and ended up writing a pivot query for someone, out of nostalgia for my last job where I did a lot more straight SQL programming - not like I miss it too much, but it felt good. Anyway, only once I was done did it occur to me that I could use this same query for a lot of things. It&#039;s a very multi-purpose pivot query - it pivots record counts on a single table by month, so one really fast query returns all of the record counts by month of whatever table you are curious about. The original guy on the forum needed it to turn menu buttons on and off according to whether there were records in the table for a given month (as in blog records).<br />
I recommend setting it up as a parameterized view with a single year parameter, because it won&#039;t distinguish by year otherwise. Map your parameter to where it says &#039;2008&#039; and you will be home free.</p>


<p>Instructions:<br />
1 - replace YOURTABLE with your table name.<br />
2 - replace all instances of &#039;created_at&#039; with a different (date) field name only if you want to use a different field to aggregate by. It will work fine as is with &#039;created_at&#039; because most Ruby tables have this field by default.<br />
</p>




<script src="https://gist.github.com/860968.js?file=by_month_pivot.sql"></script>

</p>
	                        </div><!-- /.entry -->
	
							<div class="post-meta">
		                        <span class="small">By</span> <span class="author vcard"><span class="fn"><a href="http://kristeraxel.com" title="Posts by Krister Axel" rel="author">Krister Axel</a></span></span> 
		                        <span class="small">on</span> <abbr class="date time published">05/15 2008 at 07_44</abbr> 
		                        <span class="small">in</span> 
		                        <span class="categories">
			                        
										<a href="/category/Code/">Code</a> 
			                        
			                    </span>
		                    </div>                     	


	                    </div><!-- /.post -->
                
                    </div><!-- /#main -->
                
    
		        </div><!-- /#main-sidebar-container -->         

		       

            </div><!-- /#content -->
			
	
	
	    <div id="footer-widgets" class="col-full col-3">
					
	<div class="block footer-widget-1">
		<ul class='xoxo blogroll'>
            <li><a href="http://www.kristeraxel.com" rel="me" title="my home page" target="_blank">kristeraxel.com</a></li>
            <li><a href="http://axelradio.com" rel="me" title="Download songs by Krister Axel and read the lyrics." target="_blank">Lyrics + Downloads</a></li>
        </ul>
	</div>	        
	        					
	<div class="block footer-widget-2">
        <small><p>&copy; 24 November 2012 Krister Axel<br/>All Rights Reserved.</p></small>
	</div>	        
	        					
	<div class="block footer-widget-3">
        <p><small>designed by <a href="http://kristeraxel.com">Krister Axel</a><br/>powered by <a href="https://github.com/mojombo/jekyll">Jekyll</a></small></p>
	</div>	        
	<div class="fix"></div>
	
</div><!--/#footer-widgets-->
	
	    
	
	    </div><!-- /#wrapper -->
	
	

	</body>
</html>
