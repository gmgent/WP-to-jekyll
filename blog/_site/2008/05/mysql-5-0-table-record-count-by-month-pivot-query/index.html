<!DOCTYPE html>
<html dir="ltr" lang="en-US">
    <head>
        <meta charset="UTF-8" />
        <title>MySQL 5.0 Table Record Count By Month Pivot Query | Krister Axel</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

<!--  Mobile viewport scale -->
<meta content="initial-scale=1.0; maximum-scale=1.0; user-scalable=yes" name="viewport"/>

<!-- Custom Favicon -->
<link rel="shortcut icon" href="http://blog.kristeraxel.com/wp-content/uploads/2012/11/favicon.ico"/>

<!-- style sheets -->
<link rel="stylesheet" type="text/css" href="/css/style.css" media="all" />
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/combo?2.9.0/build/reset-fonts-grids/reset-fonts-grids.css&2.9.0/build/base/base-min.css"> 
        <script src="/audiojs/audio.min.js"></script>
    </head>

    <body>
	<!-- the id on the containing div determines the page width. -->
	<!-- #doc = 750px; #doc2 = 950px; #doc3 = 100%; #doc4 = 974px -->
	<div id="doc">					
		<div id="hd">
			<div id="header" class="col-full">

   
   <div id="logo">
        <a href="/" title="spotlights in the wild">
            <img src="http://blog.kristeraxel.com/wp-content/uploads/2012/11/header11.jpg" alt="Krister Axel" />
        </a>
   </div><!-- /#logo -->
   
</div><!-- /#header -->
<div id="navigation" class="col-full">
	<ul id="main-nav" class="nav">
		<li id="menu-item-1" class="menu-item">
		    <a href="/" >the latest</a></li>
		
		<li id="menu-item-2" class="menu-item">
	        <a href="/Archive/">Archive</a></li>
	
		<li id="menu-item-3" class="menu-item">
		    <a href="/Info/" >Info</a></li>

		<li id="menu-item-4" class="menu-item">
            <a href="/Press/" >Press</a></li>

		<li id="menu-item-5" class="menu-item">
	        <a href="/Search/">Search</a></li>
	
        <li id="menu-item-6" class="menu-item">
            <a href="/Contact/">Contact</a></li>

        <li id="menu-item-7" class="menu-item">
	        <a href="http://axelradio.com/">Music</a></li>
        
    </ul>	
</div><!-- /#navigation -->
		</div>
		<div id="bd" class="container">
			<h2 class="title">
                MySQL 5.0 Table Record Count By Month Pivot Query
            </h2>
			<p class="teaser_info"><p>So there I was, hanging out at work on my birthday. I had a little time, so I decided to answer some Ruby forum questions (<a href="http://railsforum.com/" title="http://railsforum.com/">http://railsforum.com/</a>). I went through a few on them, and ended up writing a pivot query for someone, out of nostalgia for my last job where I did a lot more straight SQL programming - not like I miss it too much, but it felt good. Anyway, only once I was done did it occur to me that I could use this same query for a lot of things. It&#039;s a very multi-purpose pivot query - it pivots record counts on a single table by month, so one really fast query returns all of the record counts by month of whatever table you are curious about. The original guy on the forum needed it to turn menu buttons on and off according to whether there were records in the table for a given month (as in blog records).<br /><br />
I recommend setting it up as a parameterized view with a single year parameter, because it won&#039;t distinguish by year otherwise. Map your parameter to where it says &#039;2008&#039; and you will be home free.</p><br />
<br />
<br />
<p>Instructions:<br /><br />
1 - replace YOURTABLE with your table name.<br /><br />
2 - replace all instances of &#039;created_at&#039; with a different (date) field name only if you want to use a different field to aggregate by. It will work fine as is with &#039;created_at&#039; because most Ruby tables have this field by default.<br /><br />
</p><br />
<br />
<br />
<br />
<br />
<script src="https://gist.github.com/860968.js?file=by_month_pivot.sql"></script><br />
<br />
</p>
			<div class="post-meta">
                <span class="small">By</span> <span class="author vcard"><span class="fn"><a href="http://kristeraxel.com" title="Posts by Krister Axel" rel="author">Krister Axel</a></span></span> 
                <span class="small">on</span> <abbr class="date time published">05/15 2008 at 07_44</abbr> 
                <span class="small">in</span> 
                <span class="categories">
                    
						<a href="/category/Code/">Code</a> 
                    
                </span>
            </div>
		</div>
		<div id="ft">
			<br/>
<hr/>
<table id="footer">
	<tr>
	  <td><span class="leftcol">
	    <ul>
	      <li><a href="http://www.kristeraxel.com" rel="me" title="my home page" target="_blank">kristeraxel.com</a></li>
	      <li><a href="http://axelradio.com" rel="me" title="Download songs by Krister Axel and read the lyrics." target="_blank">Lyrics + Downloads</a></li>
	      <li><a href="http://axel.me/mouse" rel="me" title="view my media stream at rebelmouse" target="_blank">videos</a></li>
	    </ul>
		</span>
	  </td>
	  <td><span class="midcol">
	    <small>&copy; 29 November 2012 Krister Axel<br/>All Rights Reserved.</small>
		</span>
	  </td>
	  <td><span class="rightcol">
	    <small>designed by <a href="http://kristeraxel.com">Krister Axel</a><br/>powered by <a href="https://github.com/mojombo/jekyll">Jekyll</a></small>
		</span>
	  </td>
	</tr>
	
</table>
		</div>
	</div>
	  <script>
	  audiojs.events.ready(function() {
	    var as = audiojs.createAll();
	  });
	  </script>
	</body>

</html>