<!DOCTYPE html>
<html dir="ltr" lang="en-US">
    <head>
        <meta charset="UTF-8" />
        <title>Categories | Krister Axel</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

<!--  Mobile viewport scale -->
<meta content="initial-scale=1.0; maximum-scale=1.0; user-scalable=yes" name="viewport"/>

<!-- Custom Favicon -->
<link rel="shortcut icon" href="http://blog.kristeraxel.com/wp-content/uploads/2012/11/favicon.ico"/>

<!-- style sheets -->
<link rel="stylesheet" type="text/css" href="/css/style.css" media="all" />
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/combo?2.9.0/build/reset-fonts-grids/reset-fonts-grids.css&2.9.0/build/base/base-min.css"> 

    </head>

    <body>
	<!-- the id on the containing div determines the page width. -->
	<!-- #doc = 750px; #doc2 = 950px; #doc3 = 100%; #doc4 = 974px -->
	<div id="doc">					
		<div id="hd">
			<div id="header" class="col-full">

   
   <div id="logo">
        <a href="/" title="spotlights in the wild">
            <img src="http://blog.kristeraxel.com/wp-content/uploads/2012/11/header11.jpg" alt="Krister Axel" />
        </a>
   </div><!-- /#logo -->
   
</div><!-- /#header -->
<div id="navigation" class="col-full">
	<ul id="main-nav" class="nav">
		<li id="menu-item-1" class="menu-item">
		    <a href="/" >the latest</a></li>
		
		<li id="menu-item-2" class="menu-item">
	        <a href="/Archive/">Archive</a></li>
	
		<li id="menu-item-3" class="menu-item">
		    <a href="/Info/" >Info</a></li>

		<li id="menu-item-4" class="menu-item">
            <a href="/Press/" >Press</a></li>

		<li id="menu-item-5" class="menu-item">
	        <a href="/Search/">Search</a></li>
	
        <li id="menu-item-6" class="menu-item">
            <a href="/Contact/">Contact</a></li>

        <li id="menu-item-7" class="menu-item">
	        <a href="http://axelradio.com/">Music</a></li>
        
    </ul>	
</div><!-- /#navigation -->
		</div>
		<div id="bd" class="container">
			<h2 class="title">
                category: Code
            </h2>

            
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">SEP</span> <span class="day">16</span> <span class="year">2012</span> </h3></div>
			        <h2 class="post_link"><a href="/2012/09/fun-with-eval">fun with eval</a></h2>
			        <p class="teaser_info"><p>this is why I love eval. Because it makes my life easy.</p><br />
<br />
<p><code><br />
  <pre></p><br />
<br />
<pre><code>    Gmg.list_of_optional_redemption_fields.each do |new_field|<br />
      underscored_field = new_field.underscore<br />
      value = original_line.field(new_field).strip<br />
      eval "return_items.#{underscored_field} = '#{value}'"<br />
    end<br />
</code></pre><br />
<br />
<p>  </pre><br />
</code></p><br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JUL</span> <span class="day">26</span> <span class="year">2012</span> </h3></div>
			        <h2 class="post_link"><a href="/2012/07/fix-git-after-mountain-lion-install-breaks-your-path">fix git after mountain lion install breaks your path</a></h2>
			        <p class="teaser_info"><p>I installed Mountain Lion mainly for the new airplay feature in Safari; but after install it could no longer find my git binary. Do this to get everything back to normal.</p><br />
<br />
<pre><br />
  sudo -s<br />
  mkdir -p /usr/local/bin<br />
  ln -s /usr/local/git/bin/git /usr/local/bin/git<br />
  exit<br />
</pre><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JUL</span> <span class="day">09</span> <span class="year">2012</span> </h3></div>
			        <h2 class="post_link"><a href="/2012/07/safari-keyboard-shortcut-to-enter-url-by-hand">safari keyboard shortcut to enter url by hand</a></h2>
			        <p class="teaser_info"><p>My old version of Safari used to default focus in the url bar when you open a new window. Now it defaults to google search which is super annoying. I am always entering urls by hand and very seldom run google searches compared to how often I am just trying to visit a page I already know about.</p><br />
<br />
<p>I can't find a fix for that, but there is good shortcut to put focus in the url bar where it belongs.</p><br />
<br />
<p>Open-Apple (Command) + L. The same shortcut works in Firefox.</p><br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JUL</span> <span class="day">03</span> <span class="year">2012</span> </h3></div>
			        <h2 class="post_link"><a href="/2012/07/ack-in-project-bundle-for-textmate">ack in project bundle for Textmate</a></h2>
			        <p class="teaser_info"><p>I am setting up a new workstation so I had to add Ack In Project again and I figured I'd post the link here so I don't have to look for it again.</p><br />
<br />
<pre><br />
    cd ~/Library/Application\ Support/TextMate/Bundles/<br />
<br />
    git clone git://github.com/protocool/ack-tmbundle.git Ack.tmbundle<br />
</pre><br />
<br />
<br />
<p>you may have to add the Bundles directory if you don't have it already.</p><br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JUN</span> <span class="day">28</span> <span class="year">2012</span> </h3></div>
			        <h2 class="post_link"><a href="/2012/06/reset-your-mac-lion-launchpad">reset your mac lion launchpad</a></h2>
			        <p class="teaser_info"><p>You know, because errors happen all the time. Oh Apple, get it together. Steve Jobs is rolling over in his grave right now.</p><br />
<br />
<pre><br />
<br />
    Launch Terminal (from /Applications/Utilities/Terminal).<br />
    Navigate to the Application Support folder in question using:<br />
    cd ~/Library/Application\ Support/Dock<br />
    Open the folder (open .) and drag all the .db files to the trash.<br />
    Restart Dock (sudo killall Dock, followed by authentication)<br />
</pre><br />
<br />
<br />
<p>before:<br/></p><br />
<br />
<p><a href="http://blog.kristeraxel.com/wp-content/uploads/2012/06/Screen-Shot-2012-06-28-at-10.16.55-PM1.png"><img src="http://blog.kristeraxel.com/wp-content/uploads/2012/06/Screen-Shot-2012-06-28-at-10.16.55-PM1-300x66.png" alt="" title="Screen Shot 2012-06-28 at 10.16.55 PM" width="300" height="66" class="aligncenter size-medium wp-image-1901" /></a><br/></p><br />
<br />
<p>After:</p><br />
<br />
<br/><br />
<br />
<br />
<p><a href="http://blog.kristeraxel.com/wp-content/uploads/2012/06/Screen-Shot-2012-06-28-at-10.18.28-PM.png"><img src="http://blog.kristeraxel.com/wp-content/uploads/2012/06/Screen-Shot-2012-06-28-at-10.18.28-PM-300x128.png" alt="" title="Screen Shot 2012-06-28 at 10.18.28 PM" width="300" height="128" class="aligncenter size-medium wp-image-1902" /></a><br/><br/></p><br />
<br />
<p>I know, just blame it on Diablo III.</p><br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            
						    <a href="/category/Random/">Random</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JUN</span> <span class="day">28</span> <span class="year">2012</span> </h3></div>
			        <h2 class="post_link"><a href="/2012/06/fix-your-ssh-permissions">fix your ssh permissions</a></h2>
			        <p class="teaser_info"><p><strong>Permission problems with SSH</strong></p><br />
<br />
<p>Ssh is very picky about permissions on the ~/.ssh directory and files. Sometimes you may do something to mess up these permissions. Run the following to fix most permissions problems. You may have to do this on both the remote host and local host.</p><br />
<br />
<pre><br />
    chmod 700 ~/.ssh<br />
    chmod 600 ~/.ssh/id_rsa<br />
    chmod 644 ~/.ssh/id_rsa.pub  <br />
    chmod 644 ~/.ssh/authorized_keys<br />
    chmod 644 ~/.ssh/known_hosts<br />
</pre><br />
<br />
<br />
<p>Also no directory above ~/.ssh can have 'group' or 'other' write permissions.</p><br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAY</span> <span class="day">10</span> <span class="year">2012</span> </h3></div>
			        <h2 class="post_link"><a href="/2012/05/a-proof-of-concept-maze-game-for-ipad-made-with-codea">a proof of concept maze game for ipad made with codea</a></h2>
			        <p class="teaser_info"><br><br><br />
<br />
<br />
<p>I've been playing with <strong>Codea</strong>, a Lua-based iPad app that allows you to make your own iPad games. My game currently takes about 8 seconds to win, which is not much, but really I'm just messing around with things until I get the hang of it. I like Codea because Lua is a really simple scripting language with decidedly few curly brackets - thumbs up for that - and it ships with a bunch of sprites you can use. It's also pretty easy to get the Lua files off your iPad (using iExplore) for backup, and you can add your own png sprites by just putting them in a directory with a pinfo file and uploading them to your iPad. Sweet!</p><br />
<br />
<p>[video src="http://blog.kristeraxel.com/wp-content/uploads/2012/05/IMG_0027.mov"]</p><br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">APR</span> <span class="day">11</span> <span class="year">2012</span> </h3></div>
			        <h2 class="post_link"><a href="/2012/04/ruby-find-dup-hash-on-key-in-array">ruby find dup hash on key in array</a></h2>
			        <p class="teaser_info"><br><br><br />
<br />
<br />
<p><em>Ruby</em> I love you.</p><br />
<br />
<script src="https://gist.github.com/2363441.js?file=ruby_find_dup_hash_on_key_in_array.rb"></script><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAR</span> <span class="day">05</span> <span class="year">2012</span> </h3></div>
			        <h2 class="post_link"><a href="/2012/03/impersonating-a-mysql-split-function">impersonating a MySQL split function</a></h2>
			        <p class="teaser_info"><br><br><br />
<br />
<br />
<p>There is no string split in MySQL. How sad. Here is how I used INSTR, SUBSTRING_INDEX and LEFT to pull month day and year out of the original date field which was in the YYYY-MM-DD format - which is my favorite because it orders chronologically.</p><br />
<br />
<p>linked here: <a href="https://gist.github.com/1981662" title="mysql-split.sql">mysql-split.sql</a></p><br />
<br />
<script src="https://gist.github.com/1981662.js?file=mysql-split.sql"></script><br />
<br />
<br />
<p> <br><br></p><br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">FEB</span> <span class="day">12</span> <span class="year">2012</span> </h3></div>
			        <h2 class="post_link"><a href="/2012/02/getting-windows-7-to-play-nice-with-a-mac-airport-express">getting windows 7 to play nice with a mac airport express</a></h2>
			        <p class="teaser_info"><br><br><br />
<br />
<br />
<p>Something about iPv4 vs. 6 and correct DHCP authentication, I had a lot of trouble getting my windows 7 box to connect - via ethernet - to the Airport Express that I have 'extending' my mac-based network. The error message I kept getting was:</p><br />
<br />
<blockquote>"Local Area Connection" doesn't have a valid IP configuration</blockquote><br />
<br />
<br />
<p>I finally got it working:</p><br />
<br />
<blockquote><br />
1- unplug you LAN cable and wireless connection. Go to  "Ethernet Adapter local area connection 2" properties.<br><br />
<br />
2- select "Internet Protocol Version 4 (TCP/IPv4)"<br><br />
<br />
3- press Properties button<br><br />
<br />
4- select "Use the following IP address:" option and set this ips:<br><br />
<br />
 IP=<strong>192.168.1.105</strong><br><br />
<br />
 subnet mask=<strong>255.255.255.0</strong><br><br />
<br />
default gateway = your router ip address such as <strong>192.168.1.1</strong><br><br />
<br />
5- from second section select "Use the following DNS server addresses:"<br><br />
<br />
set "PreferAlternate DNS server:" your router default ip, for example <strong>192.168.1.1</strong><br><br />
<br />
6-press ok and try to connect through lan then wireless<br><br />
</blockquote><br />
<br />
<br />
<p><strong>After those steps, I also had to click through for Windows to auto-fix the problem it found that DHCP was not enabled.</strong><br></p><br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">FEB</span> <span class="day">02</span> <span class="year">2012</span> </h3></div>
			        <h2 class="post_link"><a href="/2012/02/thumbs-up-for-express-js-and-sideways-for-quo-vadis">thumbs up for express js and sideways for quo vadis</a></h2>
			        <p class="teaser_info"><br><br><p><br />
<br />
<br />
<p>I've just been checking out some stuff lately and have been dying to try out <a href="http://axel.me/5m" target="_blank">express.js</a>, which is built on the <a href="http://nodejs.org/" target="_blank">node.js</a> framework. It is easy to use, super fast, and very cool. I highly recommend it for a lightweight and snappy front-end.</p></p><br />
<br />
<p><br />
Also, I am finally making the jump to Rails 3.2, and for that reason am porting my entire <strong>gmgpulse</strong> app, complete with new auth layer and switching from prototype to jQuery. It's a lot of work but will pay many dividends. Essentially I am paying off some existing technical debt and moving the whole enterprise back into the black! I am trying out a very simple and effective auth gem called <a href="http://axel.me/7l" target="_blank">'quo_vadis'</a> but currently it has a problem with the 3.2 release so I am crossing my fingers that the guy who manages the gem will merge the pull request soon - it has already been fixed. I figure since I have about 30-60 days before it needs to work, I may be all right.<br />
</p><br />
<br />
<br />
<br />
<br />
<p><br />
UPDATE: The gem owner has merged the pull request, and quo vadis is back to 100% functional with Rails 3.2 (as of gem v1.1.2). I give it a full thumbs up now as well - simple, straightforward, easy set up, everything you want in a simple password auth system. There is no support for outside services - FB, or google, or open id, etc. - but sometimes you don't need that and it just creates unneeded complexity.<br />
</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">DEC</span> <span class="day">13</span> <span class="year">2011</span> </h3></div>
			        <h2 class="post_link"><a href="/2011/12/strange-delete-syntax-with-join-for-mysql">strange delete syntax with join for mysql</a></h2>
			        <p class="teaser_info"><br/><br/><br />
<br />
<br />
<p>With MySQL 5, there are two rules if you need to join to another table in order to delete records from somewhere.</p><br />
<br />
<ul><br />
    <li>Rule 1: no aliases allowed. Refer only to tables as themselves - better hope the names aren't very long!</li><br />
        <li>Rule 2: specify table name from which to delete <em>before</em> the FROM clause. </li><br />
</ul><br />
<br />
<br />
<p>Like so:</p><br />
<br />
<pre><br />
  DELETE sales from sales<br />
    JOIN retailers on sales.retailer_id = retailers.id<br />
   WHERE retailers.merchant in ('Test Merchant', <br />
                                'Other merchants that should not be here')<br />
</pre><br />
<br />
<br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">NOV</span> <span class="day">15</span> <span class="year">2011</span> </h3></div>
			        <h2 class="post_link"><a href="/2011/11/epigrams-in-programming">Epigrams in programming</a></h2>
			        <p class="teaser_info"><br><br />
<br />
<br />
<p>An ode to Alan Perlis, <a href="http://www.cs.yale.edu/quotes.html" target="_blank">copied from Yale</a>:<br><br></p><br />
<br />
<ol><br />
<li>One man's constant is another man's variable.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Functions delay binding; data structures induce binding. Moral: Structure data late in the programming process.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Syntactic sugar causes cancer of the semicolon.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Every program is a part of some other program and rarely fits.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>If a program manipulates a large amount of data, it does so in a small number of ways.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Symmetry is a complexity-reducing concept (co-routines include subroutines); seek it everywhere.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>It is easier to write an incorrect program than understand a correct one.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>A programming language is low level when its programs require attention to the irrelevant.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>It is better to have 100 functions operate on one data structure than 10 functions on 10 data structures.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Get into a rut early: Do the same process the same way. Accumulate idioms. Standardize. The only difference(!) between Shakespeare and you was the size of his idiom list - not the size of his vocabulary.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>If you have a procedure with ten parameters, you probably missed some.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Recursion is the root of computation since it trades description for time.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>If two people write exactly the same program, each should be put into microcode and then they certainly won't be the same.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>In the long run every program becomes rococo - then rubble.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Everything should be built top-down, except the first time.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Every program has (at least) two purposes: the one for which it was written, and another for which it wasn't.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>If a listener nods his head when you're explaining your program, wake him up.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>A program without a loop and a structured variable isn't worth writing.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>A language that doesn't affect the way you think about programming, is not worth knowing.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Wherever there is modularity there is the potential for misunderstanding: Hiding information implies a need to check communication.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Optimization hinders evolution.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>A good system can't have a weak command language.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>To understand a program you must become both the machine and the program.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Perhaps if we wrote programs from childhood on, as adults we'd be able to read them.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>One can only display complex information in the mind. Like seeing, movement or flow or alteration of view is more important than the static picture, no matter how lovely.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>There will always be things we wish to say in our programs that in all known languages can only be said poorly.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Once you understand how to write a program get someone else to write it.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Around computers it is difficult to find the correct unit of time to measure progress. Some cathedrals took a century to complete. Can you imagine the grandeur and scope of a program that would take as long?</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>For systems, the analogue of a face-lift is to add to the control graph an edge that creates a cycle, not just an additional node.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>In programming, everything we do is a special case of something more general -- and often we know it too quickly.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Simplicity does not precede complexity, but follows it.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Programmers are not to be measured by their ingenuity and their logic but by the completeness of their case analysis.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>The eleventh commandment was "Thou Shalt Compute" or "Thou Shalt Not Compute" - I forget which.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>The string is a stark data structure and everywhere it is passed there is much duplication of process. It is a perfect vehicle for hiding information.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Everyone can be taught to sculpt: Michelangelo would have had to be taught not to. So it is with great programmers.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>The use of a program to prove the 4-color theorem will not change mathematics - it merely demonstrates that the theorem, a challenge for a century, is probably not important to mathematics.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>The most important computer is the one that rages in our skulls and ever seeks that satisfactory external emulator. The standarization of real computers would be a disaster - and so it probably won't happen.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Structured Programming supports the law of the excluded muddle.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Re graphics: A picture is worth 10K words - but only those to describe the picture. Hardly any sets of 10K words can be adequately described with pictures.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>There are two ways to write error-free programs; only the third one works.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Some programming languages manage to absorb change, but withstand progress.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>You can measure a programmer's perspective by noting his attitude on the continuing vitality of FORTRAN.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>In software systems, it is often the early bird that makes the worm.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<p>44.Sometimes I think the only universal in the computing field is the fetch-execute cycle.</p><br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>The goal of computation is the emulation of our synthetic abilities, not the understanding of our analytic ones.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Like punning, programming is a play on words.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>As Will Rogers would have said, "There is no such thing as a free variable."</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>The best book on programming for the layman is "Alice in Wonderland"; but that's because it's the best book on anything for the layman.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Giving up on assembly language was the apple in our Garden of Eden: Languages whose use squanders machine cycles are sinful. The LISP machine now permits LISP programmers to abandon bra and fig-leaf.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>When we understand knowledge-based systems, it will be as before -- except our fingertips will have been singed.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Bringing computers into the home won't change either one, but may revitalize the corner saloon.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Systems have sub-systems and sub-systems have sub- systems and so on ad infinitum - which is why we're always starting over.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>So many good ideas are never heard from again once they embark in a voyage on the semantic gulf.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Beware of the Turing tar-pit in which everything is possible but nothing of interest is easy.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>A LISP programmer knows the value of everything, but the cost of nothing.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Software is under a constant tension. Being symbolic it is arbitrarily perfectible; but also it is arbitrarily changeable.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>It is easier to change the specification to fit the program than vice versa.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Fools ignore complexity. Pragmatists suffer it. Some can avoid it. Geniuses remove it.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>In English every word can be verbed. Would that it were so in our programming languages.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>In seeking the unattainable, simplicity only gets in the way.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>In programming, as in everything else, to be in error is to be reborn.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>In computing, invariants are ephemeral.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>When we write programs that "learn", it turns out that we do and they don't.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Often it is the means that justify the ends: Goals advance technique and technique survives even when goal structures crumble.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Make no mistake about it: Computers process numbers - not symbols. We measure our understanding (and control) by the extent to which we can arithmetize an activity.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Making something variable is easy. Controlling duration of constancy is the trick.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Think of all the psychic energy expended in seeking a fundamental distinction between "algorithm" and "program".</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>If we believe in data structures, we must believe in independent (hence simultaneous) processing. For why else would we collect items within a structure? Why do we tolerate languages that give us the one without the other?</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>In a 5 year period we get one superb programming language. Only we can't control when the 5 year period will be.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Over the centuries the Indians developed sign language for communicating phenomena of interest. Programmers from different tribes (FORTRAN, LISP, ALGOL, SNOBOL, etc.) could use one that doesn't require them to carry a blackboard on their ponies.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Documentation is like term insurance: It satisfies because almost no one who subscribes to it depends on its benefits.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>An adequate bootstrap is a contradiction in terms.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>It is not a language's weakness but its strengths that control the gradient of its change: Alas, a language never escapes its embryonic sac.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Is it possible that software is not like anything else, that it is meant to be discarded: that the whole point is to see it as a soap bubble?</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Because of its vitality, the computing field is always in desperate need of new cliches: Banality soothes our nerves.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>It is the user who should parameterize procedures, not their creators.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>The cybernetic exchange between man, computer and algorithm is like a game of musical chairs: The frantic search for balance always leaves one of the three standing ill at ease.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>If your computer speaks English, it was probably made in Japan.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>A year spent in artificial intelligence is enough to make one believe in God.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Prolonged contact with the computer turns mathematicians into clerks and vice versa.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>In computing, turning the obvious into the useful is a living definition of the word "frustration".</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>We are on the verge: Today our program proved Fermat's next-to-last theorem.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>What is the difference between a Turing machine and the modern computer? It's the same as that between Hillary's ascent of Everest and the establishment of a Hilton hotel on its peak.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Motto for a research laboratory: What we work on today, others will first think of tomorrow.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Though the Chinese should adore APL, it's FORTRAN they put their money on.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>We kid ourselves if we think that the ratio of procedure to data in an active data-base system can be made arbitrarily small or even kept small.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>We have the mini and the micro computer. In what semantic niche would the pico computer fall?</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>It is not the computer's fault that Maxwell's equations are not adequate to design the electric motor.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>One does not learn computing by using a hand calculator, but one can forget arithmetic.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Computation has made the tree flower.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>The computer reminds one of Lon Chaney -- it is the machine of a thousand faces.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>The computer is the ultimate polluter: its feces are indistinguish- able from the food it produces.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>When someone says "I want a programming language in which I need only say what I wish done," give him a lollipop.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Interfaces keep things tidy, but don't accelerate growth: Functions do.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Don't have good ideas if you aren't willing to be responsible for them.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Computers don't introduce order anywhere as much as they expose opportunities.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>When a professor insists computer science is X but not Y, have compassion for his graduate students.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>In computing, the mean time to failure keeps getting shorter.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>In man-machine symbiosis, it is man who must adjust: The machines can't.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>We will never run out of things to program as long as there is a single program around.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Dealing with failure is easy: Work hard to improve. Success is also easy to handle: You've solved the wrong problem. Work hard to improve.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>One can't proceed from the informal to the formal by formal means.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Purely applicative languages are poorly applicable.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>The proof of a system's value is its existence.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>You can't communicate complexity, only an awareness of it.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>It's difficult to extract sense from strings, but they're the only communication coin we can count on.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>The debate rages on: is PL/I Bachtrian or Dromedary?</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Whenever two programmers meet to criticize their programs, both are silent.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Think of it! With VLSI we can pack 100 ENIACS in 1 sq. cm.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Editing is a rewording activity.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Why did the Roman Empire collapse? What is Latin for office automation?</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Computer Science is embarrassed by the computer.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>The only constructive theory connecting neuroscience and psychology will arise from the study of software.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Within a computer natural language is unnatural.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Most people find the concept of programming obvious, but the doing impossible.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>You think you know when you can learn, are more sure when you can write, even more when you can teach, but certain when you can program.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>It goes against the grain of modern education to teach children to program. What fun is there in making plans, acquiring discipline in organizing thoughts, devoting attention to detail and learning to be self-critical?</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>If you can imagine a society in which the computer- robot is the only menial, you can imagine anything.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Programming is an unnatural act.</li><br />
</ol><br />
<br />
<br />
<br><br />
<br />
<br />
<ol><br />
<li>Adapting old programs to fit new machines usually means adapting new machines to behave like old ones.</li><br />
</ol><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">NOV</span> <span class="day">02</span> <span class="year">2011</span> </h3></div>
			        <h2 class="post_link"><a href="/2011/11/yahoo-geocoder-is-gone">Yahoo geocoder is gone</a></h2>
			        <p class="teaser_info"><br><br />
<br />
<br />
<p>Yahoo quietly discontinued it's geocoding feature in September. I kept getting 503 errors until I looked at the <a href="http://developer.yahoo.com/maps/" target="_blank">Yahoo developer maps page</a>. I wonder if they were just using google maps on the backend and couldn't afford the new pricing structure.</p><br />
<br />
<p>Bummer, because I used it for almost everything I do with calculating latitude and longitude values on the fly. I am now refactoring to use <a href="http://code.google.com/apis/maps/faq.html" target="_blank">google maps</a> instead. One might argue that I should have done that to start with.<br></p><br />
<br />
<p><a href="http://blog.kristeraxel.com/wp-content/uploads/2011/11/Screen-shot-2011-11-02-at-10.51.10-AM.png"><img src="http://blog.kristeraxel.com/wp-content/uploads/2011/11/Screen-shot-2011-11-02-at-10.51.10-AM-300x69.png" alt="" title="Screen shot 2011-11-02 at 10.51.10 AM" width="300" height="69" class="aligncenter size-medium wp-image-1428" /></a></p><br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">OCT</span> <span class="day">29</span> <span class="year">2011</span> </h3></div>
			        <h2 class="post_link"><a href="/2011/10/the-fizzbuzz-problem">the fizzbuzz problem</a></h2>
			        <p class="teaser_info"><br><br />
<br />
<br />
<p>I got the idea to try this from <a href="http://www.codinghorror.com/blog/2007/02/why-cant-programmers-program.html" target="_blank">this article</a> after reading <a href="http://www.kalzumeus.com/2011/10/28/dont-call-yourself-a-programmer/" target="_blank">this article</a>.</p><br />
<br />
<p>I stumbled a little on the mod function, I thought you could write 'mod' instead of using the '%' operator. So it took me just under 4 minutes. Hopefully that puts me somewhere above the middle of the pack.</p><br />
<br />
<script src="https://gist.github.com/1325022.js?file=fizzbuzz.rb"></script><br />
<br />
<br />
<p>Also, for the record I built a directory for the script and made sure it ran correctly within those three minutes. I saw a guy who says he did it in C in 30 seconds, and I'm pretty sure he didn't compile or run it in that time. Cheater!</p><br />
<br />
<pre><br />
AirAxel:fizzbuzz pi$ ruby testfb.rb <br />
1<br />
2<br />
fizz<br />
4<br />
buzz<br />
fizz<br />
7<br />
8<br />
fizz<br />
buzz<br />
11<br />
fizz<br />
13<br />
14<br />
fizzbuzz<br />
16<br />
17<br />
fizz<br />
19<br />
buzz<br />
fizz<br />
22<br />
23<br />
fizz<br />
buzz<br />
26<br />
fizz<br />
28<br />
29<br />
fizzbuzz<br />
31<br />
32<br />
fizz<br />
34<br />
buzz<br />
fizz<br />
37<br />
38<br />
fizz<br />
buzz<br />
41<br />
fizz<br />
43<br />
44<br />
fizzbuzz<br />
46<br />
47<br />
fizz<br />
49<br />
buzz<br />
fizz<br />
52<br />
53<br />
fizz<br />
buzz<br />
56<br />
fizz<br />
58<br />
59<br />
fizzbuzz<br />
61<br />
62<br />
fizz<br />
64<br />
buzz<br />
fizz<br />
67<br />
68<br />
fizz<br />
buzz<br />
71<br />
fizz<br />
73<br />
74<br />
fizzbuzz<br />
76<br />
77<br />
fizz<br />
79<br />
buzz<br />
fizz<br />
82<br />
83<br />
fizz<br />
buzz<br />
86<br />
fizz<br />
88<br />
89<br />
fizzbuzz<br />
91<br />
92<br />
fizz<br />
94<br />
buzz<br />
fizz<br />
97<br />
98<br />
fizz<br />
buzz<br />
AirAxel:fizzbuzz pi$<br />
</pre><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">OCT</span> <span class="day">05</span> <span class="year">2011</span> </h3></div>
			        <h2 class="post_link"><a href="/2011/10/if-it-were-not-for-steve">if it were not for Steve</a></h2>
			        <p class="teaser_info"><br/><br />
<br />
<br />
<p><strong>If it were not for Steve:</strong></p><br />
<br />
<ul><br />
  <li>I would probably still be a Windows developer.</li><br />
  <li>My laptop would be a lot uglier.</li><br />
  <li>I would probably still have a cable TV subscription.</li><br />
  <li>I wouldn't love to hate iTunes so much.</li><br />
  <li>I wouldn't be tempted every day to buy an iPhone.</li><br />
  <li>I wouldn't be tempted every day to buy an iPad.</li><br />
  <li>The software development community would probably be very different and certainly for the worse.</li><br />
  <li><em>Finding Nemo</em> would never have made me cry.</li><br />
  <li>Today would not be such a sad day.</li><br />
</ul><br />
<br />
<br />
<p>Rest in peace, great man.<br></p><br />
<br />
<p><a href="http://blog.kristeraxel.com/wp-content/uploads/2011/10/t_hero.png"><img src="http://blog.kristeraxel.com/wp-content/uploads/2011/10/t_hero-300x273.png" alt="" title="Steve Jobs" width="300" height="273" class="aligncenter size-medium wp-image-1300" /></a></p><br />
<br />
<br/><br/><br/><br />
<br />
<br />
<p>This is also cool - the simple but unprecedented <a href="http://google.com">Google</a> tribute:</p><br />
<br />
<p><a href="http://blog.kristeraxel.com/wp-content/uploads/2011/10/google-tribute.png"><img src="http://blog.kristeraxel.com/wp-content/uploads/2011/10/google-tribute-300x188.png" alt="" title="google-tribute" width="300" height="188" class="aligncenter size-medium wp-image-1306" /></a></p><br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Brave New World/">Brave New World</a> 
			            
						    <a href="/category/Code/">Code</a> 
			            
						    <a href="/category/Random/">Random</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">AUG</span> <span class="day">02</span> <span class="year">2011</span> </h3></div>
			        <h2 class="post_link"><a href="/2011/08/get-rid-of-the-patch-gem_dependency-rb119-error">get rid of the patch gem_dependency.rb:119 error</a></h2>
			        <p class="teaser_info"><p>Hate this error?</p><br />
<br />
<pre><br />
fix version_requirements is deprecated <br><br />
and will be removed on or after August 2010. <br><br />
Use #requirement<br />
</pre><br />
<br />
<br />
<br><br><br />
<br />
<br />
<p>Use this:<br><br></p><br />
<br />
<script src="https://gist.github.com/1143138.js?file=gistfile1.txt"></script><br />
<br />
<br />
<br><br><br />
<br />
<br />
<p>copied from <a href="http://www.mattvsworld.com/blog/2010/03/version_requirements-deprecated-warning-in-rails/">here</a><br><br></p><br />
<br />
<p>Just remember to switch out the directory after -d with wherever gem_dependency.rb lives on your system (it's in the warning message). It is probably bad practice to patch your system gems, but to get rid of this warning we can make an exception...</p><br />
<br />
<p>If something goes wrong, reverse the patch with: <br><br></p><br />
<br />
<script src="https://gist.github.com/1143140.js?file=gistfile1.txt"></script><br />
<br />
<br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JUN</span> <span class="day">20</span> <span class="year">2011</span> </h3></div>
			        <h2 class="post_link"><a href="/2011/06/setting-up-a-macbook-air-2011">setting up a MacBook Air 2011</a></h2>
			        <p class="teaser_info"><br>This was copied from <a href="http://www.frederico-araujo.com/2010/08/19/installing-rails-enviroment-on-snow-leopard-with-macports-mysql-and-modrails-passenger/">this great post</a> by Frederico Araujo, with some small modifications for my own use case.<br />
<br />
<br />
<p>MacPorts is still a smart way to go, I tried Homebrew first and ended up in Ruby gem hell.</p><br />
<br />
<p>Also, read all the way to the bottom before you start (you may need to add wget via MacPorts before step 3).</p><br />
<br />
<div class="textcontent"><br />
<h3>Requirements:</h3> <br />
<ul> <br />
<li> Snow Leopard 10.6.4 or greater</li> <br />
<li> Xcode 3.2.3, 2.4.1 or greater</li> <br />
<li> Admin privileges on your mac.</li> <br />
</ul> <br />
<h3>Software preliminary:</h3> <br />
<ul> <br />
<li> Mysql 5.1.49 (macports)</li> <br />
<li> Ruby 1.8.7 (macports)</li> <br />
<li> Rubygems (download)</li> <br />
</ul> <br />
<h3>1. Preparing System</h3> <br />
<p>If you are upgrading from Leopard to Snow Leopard, I recommend you delete your old installation.</p> <br />
<pre class="command">sudo rm -rf \<br />
    /opt/local \<br />
    /Applications/DarwinPorts \<br />
    /Applications/MacPorts \<br />
    /Library/LaunchDaemons/org.macports.* \<br />
    /Library/Receipts/DarwinPorts*.pkg \<br />
    /Library/Receipts/MacPorts*.pkg \<br />
    /Library/StartupItems/DarwinPortsStartup \<br />
    /Library/Tcl/darwinports1.0 \<br />
    /Library/Tcl/macports1.0 \<br />
    ~/.macports<br />
</pre><br />
Note: I was setting up a new MacBook Air, so I didn't need to do this, but I left it here for reference.<br />
<br />
<h4>1.1 Prepare PATH environment:</h4> <br />
<pre class="command">$vim ~/.bash_profile<br />
</pre> <br />
<p>Edit your ~/.bash_profile file and add these 2 lines.<br /> <br />
Check if they are not there already.</p> <br />
<pre>export PATH=/opt/local/bin:/opt/local/sbin:$PATH<br />
export MANPATH=/opt/local/share/man:$MANPATH<br />
</pre> <br />
<h4>1.2 Download and Install Xcode</h4> <br />
<p><a href="http://developer.apple.com/technologies/xcode.html" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','developer.apple.com/technologies/xcode.html']);">http://developer.apple.com/technologies/xcode.html</a><p><br />
Here I used the XCode install from my Snow Leopard disc, the above link is from the original post. The link includes the XCode SDK, I think, so it's a bigger download (4gb) whereas the Snow Leopard XCode install is only 2.7gb which is all you need for just Rails stuff and with a smallish hard drive, every gb counts. Also, I did the install via driveshare from my other MacBook Pro.</p><br />
</p> <br />
<h4>1.3 Download Macports and install</h4> <br />
<p>Download Page: <a href="http://www.macports.org/install.php" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','www.macports.org/install.php']);">http://www.macports.org/install.php</a></p> <br />
<p>Download Direct Link: <a href="http://distfiles.macports.org/MacPorts/MacPorts-1.9.2-10.6-SnowLeopard.dmg" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','distfiles.macports.org/MacPorts/MacPorts-1.9.2-10.6-SnowLeopard.dmg']);">http://distfiles.macports.org/MacPorts/MacPorts-1.9.2-10.6-SnowLeopard.dmg</a></p> <br />
<p>You might use this guide for installing Macports:</p> <br />
<p>Full Install Guide: http://guide.macports.org/#installing</p> <br />
<h4>1.3.1 Update macports</h4> <br />
<pre class="command">sudo port -v selfupdate</pre> <br />
<h3>2. Mysql</h3> <br />
<h4>2.1 Install Mysql</h4> <br />
<pre class="command">sudo port -v install mysql5-server mysql5</pre> <br />
<h4>2.2 Make mysql autoload on startup</h4> <br />
<pre class="command">sudo port load mysql5-server<br />
sudo -u mysql mysql_install_db5<br />
</pre> <br />
<h3>3. Ruby, Rubygems, Rails, other gems</h3> <br />
<p>3.1 Install Ruby from macports</p> <br />
<pre class="command">sudo port -v install ruby</pre> <br />
<pre class="command">$ ruby -v<br />
ruby 1.8.7 (2010-08-08 patchlevel 302) [x86_64-darwin10]<br />
</pre> <br />
<h4>3.2 download rubygems from http://rubygems.org/pages/download</h4> <br />
<pre class="command">cd /tmp<br />
wget http://production.cf.rubygems.org/rubygems/rubygems-1.3.7.tgz<br />
tar xpf rubygems-1.3.7.tgz<br />
cd rubygems-1.3.7<br />
sudo ruby setup.rb<br />
</pre> <br />
<h4>3.3 Install rails, rake, rspec etc.</h4> <br />
You may want a lot of other gems, I added xml-simple, fastercsv, calendar_helper, etc., so add gems as needed, especially the mysql gem which you will need - but do that as specified in the next step.<br />
<pre class="command">sudo gem install rake rails ruby-debug</pre><br />
<h4>3.4 install mysql gem</h4> <br />
<pre class="command">sudo env ARCHFLAGS="-arch x86_64" gem install mysql -- \ <br />
--with-mysql-config=/opt/local/lib/mysql5/bin/mysql_config<br />
</pre><br />
<br />
DO THIS BEFORE step 3:<br />
<br />
I had to run<br />
<pre>sudo port install wget</pre><br />
<br />
before I was able to get the RubyGems install package (wget does not ship with Snow Leopard).<br />
<br />
Other things I had to do:<br />
<p>I had to install git from a package <a href="http://code.google.com/p/git-osx-installer/">here</a>.</p><br />
<br />
good luck!<br />
<br />
</div><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">APR</span> <span class="day">23</span> <span class="year">2011</span> </h3></div>
			        <h2 class="post_link"><a href="/2011/04/prawn-for-rails">prawn for Rails</a></h2>
			        <p class="teaser_info"><br/><br />
<br />
<br />
<p>I had a question from <a href="http://twitter.com/#!/rcstolle">@rcstolle</a> on how to use Prawn, so here is a short primer. There are two ways to go - Prawn gives a pretty good amount of control via the built-in methods, so if your layout is static enough you can just build a report with what amounts to something of a cursor. Somehow it feels vaguely like Crystal Reports for those dinosaurs like me who actually used to use that once upon a time.</p><br />
<br />
<script src="https://gist.github.com/895622.js?file=printable_drug_record.rb"></script><br />
<br />
<br />
<p>You set the fill color, you build the table, you move to cursor down a few pixels, et cetera. Everything is pixel based and although it feels pretty solid, you don't get any CSS, you can't float anything, and in the end the use-cases are sort of limited. The other route is to use the grid-based option, which allows greater control and flexibility but also forces you to delve a little deeper into the Prawn object model. Here are some code samples to show how the Prawn::Document::Grid class can be used in practice.</p><br />
<br />
<p>Starting with the document class:</p><br />
<br />
<script src="https://gist.github.com/938422.js?file=document.rb"></script><br />
<br />
<br />
<p>the page:</p><br />
<br />
<script src="https://gist.github.com/938424.js?file=page.rb"></script><br />
<br />
<br />
<p>the section:</p><br />
<br />
<script src="https://gist.github.com/938425.js?file=section.rb"></script><br />
<br />
<br />
<p>and the supporting classes:</p><br />
<br />
<script src="https://gist.github.com/938421.js?file=gistfile1.rb"></script><br />
<br />
<br />
<br />
<br />
<script src="https://gist.github.com/938419.js?file=gistfile1.rb"></script><br />
<br />
<br />
<br />
<br />
<script src="https://gist.github.com/938418.js?file=gistfile1.rb"></script><br />
<br />
<br />
<p>which leans heavily on the <a href="http://corelib.rubyonrails.org/classes/Forwardable.html">Forwardable</a> module.</p><br />
<br />
<p>Here, although you are still working very much with pixel values, you also are specifying rows which can help with complex layouts. If you need some reference for the Prawn Grid module it is <a href="http://prawn.majesticseacreature.com/docs/0.11.1/Prawn/Document/Grid.html">here</a>.</p><br />
<br />
<p>So, the bottom line is that Prawn can handle whatever you throw at it. It is a very powerful tool and I don't know of anything that even comes close in terms of pure Ruby solutions to writing PDF reports.</p><br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">APR</span> <span class="day">07</span> <span class="year">2011</span> </h3></div>
			        <h2 class="post_link"><a href="/2011/04/the-change-you-wanted-was-rejected">The change you wanted was rejected.</a></h2>
			        <p class="teaser_info"><blockquote>Maybe you tried to change something you didn't have access to.</blockquote><br />
<br />
<br />
<p><a href="http://blog.kristeraxel.com/wp-content/uploads/2011/04/fb-error.png"><img src="http://blog.kristeraxel.com/wp-content/uploads/2011/04/fb-error-300x111.png" alt="" title="fb-error" width="300" height="111" class="aligncenter size-medium wp-image-995" /></a><br/><br />
If you see this on your Rails-based Facebook app, try disabling 'protect_from_forgery' in your ApplicationController. Facebook uses signed_request that you can decode and use to verify that the request actually comes from Facebook, so protect_from_forgery is unnecessary for applications that are accessible through the facebook canvas only.</p><br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAR</span> <span class="day">18</span> <span class="year">2011</span> </h3></div>
			        <h2 class="post_link"><a href="/2011/03/reverse-string-function">reverse string function</a></h2>
			        <p class="teaser_info"><BR/><br />
<br />
<br />
<p>Good times.</p><br />
<br />
<script src="https://gist.github.com/876814.js?file=reverse_string.rb"></script><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">FEB</span> <span class="day">28</span> <span class="year">2011</span> </h3></div>
			        <h2 class="post_link"><a href="/2011/02/one-column-liquid-layout">one column liquid layout</a></h2>
			        <p class="teaser_info"><p>I am using this for the Android app I&#039;m working on, and it is spot on.</p><br />
<br />
<br />
<p>HTML found here: <a href="http://www.maxdesign.com.au/articles/css-layouts/one-liquid/" title="http://www.maxdesign.com.au/articles/css-layouts/one-liquid/">http://www.maxdesign.com.au/articles/css-layouts/one-liquid/</a></p><br />
<br />
<br />
<p>and the css (which I have added to a little bit compared to the original):</p><br />
<br />
<br />
<pre><br />
<br />
#container<br />
{<br />
    margin: 0 30px;<br />
    background: #fff;<br />
}<br />
<br />
#header<br />
{<br />
    background: #ccc;<br />
    padding: 20px;<br />
}<br />
<br />
#header h1 { margin: 0; text-align: center;}<br />
<br />
#navigation<br />
{<br />
    float: left;<br />
    width: 100%;<br />
    background: #333;<br />
}<br />
<br />
#navigation ul<br />
{<br />
    margin: 0;<br />
    padding: 0;<br />
}<br />
<br />
#navigation ul li<br />
{<br />
    list-style-type: none;<br />
    display: inline;<br />
}<br />
<br />
#navigation li a<br />
{<br />
    display: block;<br />
    float: left;<br />
    padding: 5px 10px;<br />
    color: #fff;<br />
    text-decoration: none;<br />
    border-right: 1px solid #fff;<br />
}<br />
<br />
#navigation li a:hover { background: #383; }<br />
<br />
#content<br />
{<br />
    clear: left;<br />
    padding: 20px;<br />
}<br />
<br />
#message<br />
{<br />
    background-color: #ccc;<br />
    padding: 10px;<br />
}<br />
<br />
.field<br />
{<br />
    border-left: 4px solid red;<br />
    padding-left: 20px;<br />
}<br />
<br />
.username {font-weight: bold;}<br />
<br />
#content h2<br />
{<br />
    color: #000;<br />
    font-size: 160%;<br />
    margin: 0 0 .5em;<br />
}<br />
<br />
#footer<br />
{<br />
    background: #ccc;<br />
    text-align: right;<br />
    padding: 20px;<br />
    height: 1%;<br />
}<br />
<br />
</pre><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">FEB</span> <span class="day">28</span> <span class="year">2011</span> </h3></div>
			        <h2 class="post_link"><a href="/2011/02/checking-jre-and-jdk-versions-on-a-mac-10-6">checking JRE and JDK versions on a mac 10.6</a></h2>
			        <p class="teaser_info"><p>I know it&#039;s not rocket science, but it is worth explaining.</p><br />
<br />
<br />
<p>In a terminal:</p><br />
<br />
<br />
<pre><br />
  java -version<br />
</pre><br />
<br />
<br />
<p><br />
will check the JRE version;</p><br />
<br />
<br />
<p>whereas</p><br />
<br />
<br />
<pre><br />
  javac -version<br />
</pre><br />
<br />
<br />
<p><br />
will check the JDK version.</p><br />
<br />
<br />
<p>like so:</p><br />
<br />
<br />
<pre><br />
<br />
zeta:rockstaralley kaxel$ java -version<br />
java version "1.6.0_22"<br />
Java(TM) SE Runtime Environment (build 1.6.0_22-b04-307-10M3261)<br />
Java HotSpot(TM) 64-Bit Server VM (build 17.1-b03-307, mixed mode)<br />
zeta:rockstaralley kaxel$ javac -version<br />
javac 1.6.0_22<br />
<br />
</pre><br />
<br />
<br />
<p><br />
The JRE ships with the Mac OS (or so I&#039;m told) but the JDK installs with the XCode package.</p><br />
<br />
<br />
<p>you&#039;re welcome!</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">FEB</span> <span class="day">27</span> <span class="year">2011</span> </h3></div>
			        <h2 class="post_link"><a href="/2011/02/quick-and-dirty-rake-ci-script">quick and dirty rake ci script</a></h2>
			        <p class="teaser_info"><p>I know, it doesn&#039;t have all the bells and whistles; you need to add the files to git by hand; and you can move right through with unstaged changes with nary a peep in protest. But it still does the trick and makes my life easier - so here it is: my quick and dirty rake ci script -</p><br />
<br />
<br />
<br />
<br />
<script src="https://gist.github.com/860995.js?file=checkin.rake"></script><br />
<br />
<br />
<br />
<br />
<p><br />
save it in a rake file called whatever you like and do all your checkins, after doing a &#039;git add .&#039; or what have you - like this:</p><br />
<br />
<br />
<pre><br />
rake ci<br />
</pre><br />
<br />
<br />
<p><br />
Done!</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">FEB</span> <span class="day">02</span> <span class="year">2011</span> </h3></div>
			        <h2 class="post_link"><a href="/2011/02/new-routes-in-rails-3-1">new routes in rails 3.1</a></h2>
			        <p class="teaser_info"><p>explained here:</p><br />
<br />
<br />
<p><a href="http://www.engineyard.com/blog/2010/the-lowdown-on-routes-in-rails-3/" title="http://www.engineyard.com/blog/2010/the-lowdown-on-routes-in-rails-3/">http://www.engineyard.com/blog/2010/the-lowdown-on-routes-in-rails-3/</a></p><br />
<br />
<br />
<p>I was already on 3.0.3, so it basically amounted to removing the |map| from</p><br />
<br />
<br />
<pre><br />
Rockstaralley::Application.routes.draw do |map|<br />
  #routes are mapped here<br />
end<br />
</pre><br />
<br />
<br />
<p><br />
which was fine with me.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JAN</span> <span class="day">31</span> <span class="year">2011</span> </h3></div>
			        <h2 class="post_link"><a href="/2011/01/update-your-gemfile-with-one-line">update your Gemfile with one line</a></h2>
			        <p class="teaser_info"><pre><br />
rm -rf .bundle && bundle install && <br />
    git add Gemfile.lock && git commit -m "Added Gemfile.lock"<br />
</pre><br />
<br />
<br />
<p><br />
Good times.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JAN</span> <span class="day">28</span> <span class="year">2011</span> </h3></div>
			        <h2 class="post_link"><a href="/2011/01/ftps-for-dummies">FTPS for dummies</a></h2>
			        <p class="teaser_info"><p>Yah, I know it&#039;s been a while, but I&#039;ve been busy. Work, family, vacation, video games - it&#039;s a long list.</p><br />
<br />
<br />
<p>Anyway, for my first post of the year, I am posting code that I found here:</p><br />
<br />
<br />
<p><a href="http://blog.behindlogic.com/2009/03/ruby-ftps-implicit-ssl.html" title="http://blog.behindlogic.com/2009/03/ruby-ftps-implicit-ssl.html">http://blog.behindlogic.com/2009/03/ruby-ftps-implicit-ssl.html</a></p><br />
<br />
<br />
<p>written by a nice gentleman named Daniel Parker, who basically got to it first.</p><br />
<br />
<br />
<p>I have long known that the standard FTP class that rolls with Rails has no knowledge of or familiarity with FTPS, which is FTP with implicit ssl which is a new standard by our &#039;friends&#039; at Microsoft, who never met a party they didn&#039;t want to piss on (true story).</p><br />
<br />
<br />
<p>Anyway, the bullet finally found me and  from now on I will have to learn to make my Rails 2.3.5 app play nice with IIS. First step - connecting via FTPS to pull files down - we used to use SFTP but I guess that was either too simple and/or functional for the Microsoft team to get on board.</p><br />
<br />
<br />
<p>I found the above post by Mr. Parker, and it helped a lot. Here is the code:</p><br />
<br />
<br />
<br />
<br />
<script src="https://gist.github.com/860690.js?file=ftps.rb"></script><br />
<br />
<br />
<br />
<br />
<p><br />
Use it just as you would the FTP class.</p><br />
<br />
<br />
<p>Here it is in a rake test task (because I don&#039;t like my test suite to actually connect to live servers):</p><br />
<br />
<br />
<br />
<br />
<script src="https://gist.github.com/860998.js?file=ftps_rake_test.rake"></script><br />
<br />
<br />
<br />
<br />
<p><br />
Got it?</p><br />
<br />
<br />
<p>also many thanks to Daniel Parker for making my life a little easier and posting the code so generously.</p><br />
<br />
<br />
<p></></pre></p><br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">DEC</span> <span class="day">04</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/12/custom-wordpress-css">custom wordpress css</a></h2>
			        <p class="teaser_info"><p>This is my Wordpress css tweak code and I may need it again later.</p><br />
<br />
<br />
<p><code><br /><br />
  div .content {font-style: italic;}<br /><br />
  div .entry-content {font-style: normal !important;}<br /><br />
  .entry .content {font-style: normal !important;}<br /><br />
  #searchlabel {display: none;}<br /><br />
  a img {border: none; }<br /><br />
</code></p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">NOV</span> <span class="day">20</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/11/shipping-your-lx20">shipping your LX20</a></h2>
			        <p class="teaser_info"><p>If you are shipping your XT, LX-20 or XT-20, put it in this "shipping mode." It will secure the transport for safer shipping:</p><br />
<br />
<br />
<p>WITH NO TAPE in the deck, power up the machine while holding down the "record ready/arm" buttons for tracks 1 and 7.<br /><br />
Display will read "0 SHiP *".<br /><br />
Press "play" and you will hear the transport engaging as if there was a tape in it. Give it a few seconds to complete.<br /><br />
Display will read "SHiP rdY". (Ship Ready)<br /><br />
Power down the deck. When it is powered up again, the transport will reset to normal mode. Allow a few seconds for this to complete before inserting a tape.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">NOV</span> <span class="day">10</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/11/csv-illegalformaterror">CSV IllegalFormatError</a></h2>
			        <p class="teaser_info"><p><code><br /><br />
  CSV::IllegalFormatError<br /><br />
</code></p><br />
<br />
<br />
<p>If you all of a sudden are getting this error in your tests and you just upgraded your version of Rails. say to 2.3.5 or above, never fear.</p><br />
<br />
<br />
<p>You just have to change all of your old csv test fixtures to yaml.</p><br />
<br />
<br />
<p>Have fun with that!</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">AUG</span> <span class="day">13</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/08/javascript-for-fun-and-profit">javascript for fun and profit</a></h2>
			        <p class="teaser_info"><script src="https://gist.github.com/860699.js?file=unique-check.js"></script><br />
<br />
<br />
<br />
<br />
<p><br />
usage:</p><br />
<br />
<br />
<pre><br />
  arr = [1, 2, 2, 3];<br />
  var u = unique(arr);<br />
  <br />
  u.length == 3   # TRUE<br />
</pre><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">AUG</span> <span class="day">03</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/08/the-mars-rover-assignment">the mars rover assignment</a></h2>
			        <p class="teaser_info"><p>Who rocked the Mars rover assignment? I did. I have seen a bunch of submissions now and I have seen nothing close to as good or as thorough as the one I submitted.</p><br />
<br />
<br />
<p><a href='http://blog.kristeraxel.com/wp-content/uploads/2010/08/mars_rover.zip'>mars_rover</a></p><br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JUL</span> <span class="day">31</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/07/simple-blog-class-for-displaying-tweets">simple blog class for displaying tweets</a></h2>
			        <p class="teaser_info"><p>This is used in a rails 3.0 project.</p><br />
<br />
<br />
<br />
<br />
<script src="https://gist.github.com/860724.js?file=blog.rb"></script><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JUL</span> <span class="day">29</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/07/precision-in-speech-based-communications">Precision in speech based communications</a></h2>
			        <p class="teaser_info"><p>Precision in speech-based communications</p><br />
<br />
<br />
<p>I will start with a quote, which is ostensibly a technical communication. Sure it is from a &#039;message board&#039;, which is more or less an informal medium, but that does not mean that universal rules of logic will not apply. Besides, it is a work message board (Campfire), and is used extensively as a measure of our internal communications. I think at the root of it that all communications should and for the most part will be judged mainly in terms of how effective they are, and to a smaller extent in terms of the economy of effort involved with understanding them. So here&#039;s the quote:</p><br />
<br />
<br />
<p><b>"the fix that fixes the workflow tests no longer applies, so 2 of the 3 will still be broken - FYI"</b></p><br />
<br />
<br />
<p>This is from a small team of developers working together on a single code base, with a set of automated tests that are maintained collectively. The expectations here are as stated above, namely that the message be effective and succinct. What Is Being Said?, as well as How long Does It Take Me To Understand It? should be the two questions in mind when assessing the inherent value of this message.</p><br />
<br />
<br />
<p>What Is Being Said?</p><br />
<br />
<br />
<p>In essence, we have a simple logical statement here - premise, conclusion. This is so, so that is so. Let&#039;s examine the first part, the premise.</p><br />
<br />
<br />
<p><b>the fix that fixes the workflow tests no longer applies</b></p><br />
<br />
<br />
<p>There are many potential meanings here, which one might call an ambiguous premise. First, the word &#039;fix&#039; is used as both a subject and a verb, which is bad form. It would be better to replace one or the other with a valid synonym, just to avoid confusion. The &#039;fix that addresses the workflow tests&#039;, perhaps.<br /><br />
Next, we can see that &#039;the workflow tests&#039; are referred to collectively, which is a mistake in specificity. The employee here knows very well that there are only 3 specific tests that are affected - the 3 that are mentioned in the conclusion - but they prefer to describe as little as possible, essentially missing two chances to actually specify them. Of course, brevity is king, but it would be as easy as saying the &#039;fix that addresses the drug_name workflow tests&#039; which is only one extra word but helps us get much closer to a specific and limited subject from which to subsequently draw a conclusion. Finally, the last glaring problem here is that the phrase &#039;no longer applies&#039; is badly worded because it implies another question, namely &#039;why does it no longer apply?&#039;. It is also interesting that the employee goes to a certain length to be non-explicit - vagueness also at the expense of brevity. Did the tests break? Is it true that the &#039;fix&#039; still &#039;fixes&#039; the tests, if it &#039;no longer applies&#039;? The premise itself borders on the nonsensical. Better to say &#039;the drug_name workflow tests are broken&#039;, or maybe &#039;the drug_name workflow tests are no longer needed&#039;, or &#039;the drug_name workflow tests need to be refactored&#039;. All 3 of those different scenarios are perhaps referenced by this statement but we don&#039;t know which.</p><br />
<br />
<br />
<p><b>so 2 of the 3 will still be broken - FYI</b><br /><br />
Stemming from an ambiguous premise, this is hard to parse, but we can see a few simple problems with the form again.</p><br />
<br />
<br />
<p>First, &#039;2 of the 3&#039; - which three? Using &#039;the&#039; here implies that we know which 3 to which the speaker refers, but this is the first time we hear of that number. So, in essence the reader is forced to conclude that the number 3 refers to the collective statement about workflow tests in the premise, but that is by no means explicit and fails one or both our expectations, depending on how generous you are - either it communicates ineffectively AND takes more time than necessary to understand, or it just takes more time than necessary to understand.</p><br />
<br />
<br />
<p>And yet again, the phraseology &#039;will still be broken&#039; implies that we know already that they are broken and are being informed simply that they will remain so, another mistake in the reference chain, if you will. We were never actually told that anything was already broken - if you remember, we were told just that &#039;the fix...no longer applies&#039;, so this conclusion leaves us, among other things, wondering if we were supposed to have had some information in the premise that was never forthcoming.</p><br />
<br />
<br />
<p>So, to conclude, we have no conclusion. We are left with more questions than answers. As I just mentioned, we are not sure if we missed something in the premise; we don&#039;t know why whatever just happened only applies to &#039;2 of the 3&#039;; and we have absolutely no expectation for the future which is usually what statements like these are used for. We don&#039;t know if this is a surprise, if someone should be working on it or perhaps already is, if this is a temporary state that will resolve itself somehow; so the usage of FYI is both unfortunate and supremely ironic, because of all the thing we have here, information is not one of them.</p><br />
<br />
<br />
<p>So please - be specific. Every time someone misses the opportunity to communicate effectively the whole world gets a little bit dumber.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JUL</span> <span class="day">23</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/07/you-need-this-to-run-rails-on-ubuntu">you need this to run rails on ubuntu</a></h2>
			        <p class="teaser_info"><pre><br />
sudo apt-get install libopenssl-ruby<br />
</pre><br />
<br />
<br />
<p><br />
in order to combat this error:</p><br />
<br />
<br />
<pre><br />
no such file to load -- openssl<br />
</pre><br />
<br />
<br />
<p><br />
be forewarned.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JUL</span> <span class="day">20</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/07/the-law-of-demeter">the Law of Demeter</a></h2>
			        <p class="teaser_info"><p>More formally, the Law of Demeter for functions requires that a method M of an object O may only invoke the methods of the following kinds of objects:</p><br />
<br />
<br />
<p>   1. O itself<br /><br />
   2. M&#039;s parameters<br /><br />
   3. any objects created/instantiated within M<br /><br />
   4. O&#039;s direct component objects<br /><br />
   5. a global variable, accessible by O, in the scope of M</p><br />
<br />
<br />
<p><a href="http://en.wikipedia.org/wiki/Law_of_Demeter" title="http://en.wikipedia.org/wiki/Law_of_Demeter">http://en.wikipedia.org/wiki/Law_of_Demeter</a></p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JUL</span> <span class="day">14</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/07/silly-dev-jokes">Silly Dev jokes</a></h2>
			        <p class="teaser_info"><p>copied from: <a href="http://blogs.adobe.com/charles/2010/05/ill_trade_you_a_joke_for_a_book.html#comments" title="http://blogs.adobe.com/charles/2010/05/ill_trade_you_a_joke_for_a_book.html#comments">http://blogs.adobe.com/charles/2010/05/ill_trade_you_a_joke_for_a_book.h...</a></p><br />
<br />
<br />
<ul class="commentlist"><br />
<li class="comment even thread-even depth-1" id="li-comment-3"><br />
<p>         By Jeremy      - 6:01 PM on May 20, 2010 &nbsp;</p><br />
<p>            There are only 10 types of people in the world: those who understand binary and those who don't.</p><br />
</li><br />
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-4"><br />
<p>         By Richie      - 12:34 AM on May 24, 2010 &nbsp;</p><br />
<p>            A programmers high-school girlfriend is like the square root of -2irrational and imaginary.</p><br />
</li><br />
<li class="comment even thread-even depth-1" id="li-comment-5"><br />
<p>         By gem_reader      - 4:29 PM on May 26, 2010 &nbsp;</p><br />
<p>            Knock, knock.<br /><br />
Who's there?<br /><br />
very long pause..<br /><br />
Java.</p><br />
</li><br />
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-6"><br />
<p>         By <a href="http://www.borber.com/" rel="external nofollow" class="url">Borek Bernard</a>      - 2:32 AM on May 27, 2010 &nbsp;</p><br />
<p>            Rather a geek joke but a good one:<br /><br />
Schrodinger's cat walks into a barand doesn't</p><br />
</li><br />
<li class="comment even thread-even depth-1" id="li-comment-7"><br />
<p>         By codeabonde      - 12:27 PM on June 1, 2010 &nbsp;</p><br />
<p>            In C we had to code our own bugs. In C++ we can inherit them.</p><br />
</li><br />
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-8"><br />
<p>         By Yazbar      - 1:11 PM on June 3, 2010 &nbsp;</p><br />
<p>            Q: How many programmers does it take to change a light bulb?<br /><br />
A: None.  That's a hardware problem.</p><br />
</li><br />
<li class="comment even thread-even depth-1" id="li-comment-9"><br />
<p>         By Hoover      - 1:20 PM on June 4, 2010 &nbsp;</p><br />
<p>            My other car is a CDR</p><br />
</li><br />
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-10"><br />
<p>         By mastersson      - 9:12 AM on June 8, 2010 &nbsp;</p><br />
<p>            Q: How many IBM Processors does it take to execute a job?<br /><br />
A: Four. Three to hold it down, and one to rip it's head off.</p><br />
</li><br />
<li class="comment even thread-even depth-1" id="li-comment-11"><br />
<p>         By Penny      - 8:15 PM on July 12, 2010 &nbsp;</p><br />
<p>            Why do programmers always mix up Halloween and Christmas?<br /><br />
Because Oct 31 equals Dec 25.</p><br />
</li><br />
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12"><br />
<p>         By <a href="http://www.imjameshall.com" rel="external nofollow" class="url">James hall</a>      - 10:23 PM on July 14, 2010 &nbsp;</p><br />
<p>            a sql query walks into a bar and sees two tables.  He walks up and says can i join you?</p><br />
</li><br />
</ul><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JUL</span> <span class="day">09</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/07/fun-with-closures">fun with closures</a></h2>
			        <p class="teaser_info"><p>I got burned by not being able to answer the question -&#039;what are closures?" with much of anything. It was pretty embarrassing, seeing as I use them all day. :)</p><br />
<br />
<br />
<p>I had a decent enough explanation about passing code blocks around, but what I forgot to mention was the &#039;yield&#039; keyword (which is a bit like talking about soup and forgetting to mention that you have to add water).</p><br />
<br />
<br />
<p>Also, I started trying to write up an example (like I have seen Brian Guthrie do so many times) and couldn&#039;t come up with a good one fast enough. </p><br />
<br />
<br />
<p>Anyway, I am decidedly a pragmatist and I don&#039;t get as academic as some of my more CS-based brethren, but I decided then to starting boning up on good examples of what closure is so I can do myself justice next time someone asks me that question.</p><br />
<br />
<br />
<p>so I found this (by some dude named Paul):</p><br />
<br />
<br />
<br />
<br />
<script src="https://gist.github.com/860727.js?file=closures_test.rb"></script><br />
<br />
<br />
<br />
<br />
<p><br />
ask me again, Aslan!</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JUL</span> <span class="day">01</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/07/the-ago-function-for-writing-on-a-whiteboard">the ago function for writing on a whiteboard</a></h2>
			        <p class="teaser_info"><p>So, if you are ever somewhere where they ask you to write code on the wall with dry-erase marker, then you are covered.</p><br />
<br />
<br />
<p>Me, I never realized how much I love using a keyboard and watching the letters I type appear on the screen. Writing by hand is for suckers and/or poets.</p><br />
<br />
<br />
<script src="https://gist.github.com/860734.js?file=mod-class.rb"></script><br />
<br />
<br />
<p><br />
and the tests:</p><br />
<br />
<br />
<script src="https://gist.github.com/860737.js?file=test_mod-class.rb"></script><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JUN</span> <span class="day">18</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/06/ruby-to_boolean-function">ruby to_boolean function</a></h2>
			        <p class="teaser_info"><br><br><br />
<br />
<br />
<br />
<br />
<script src="https://gist.github.com/860759.js?file=to_bool.rb"></script><br />
<br />
<br />
<p>UPDATE:</p><br />
<br />
<p>Erik points out that we are changing the input parameter, which is true. Point well taken. New version below:</p><br />
<br />
<script src="https://gist.github.com/2552946.js?file=to_bool2.rb"></script><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JUN</span> <span class="day">17</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/06/paginator-class">paginator class</a></h2>
			        <p class="teaser_info"><script src="https://gist.github.com/860760.js?file=paginator.rb"></script><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JUN</span> <span class="day">14</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/06/push-your-git-tags">push your git tags</a></h2>
			        <p class="teaser_info"><p>like so:</p><br />
<br />
<br />
<pre><br />
  git push origin --tags<br />
</pre><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAY</span> <span class="day">21</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/05/hobbits-in-holes-and-chipmunks-in-a-phonebooth">hobbits in holes and chipmunks in a phonebooth</a></h2>
			        <p class="teaser_info"><p>When writing unit tests, for unit/quantity measurements it is important to do the right thing. The rule is that you must test against either hobbits or chipmunks, in their appropriate quantities.</p><br />
<br />
<br />
<p>Also, there is such a thing as shaving yaks. I do it all day. :)</p><br />
<br />
<br />
<p><a href="http://en.wiktionary.org/wiki/yak_shaving" title="http://en.wiktionary.org/wiki/yak_shaving">http://en.wiktionary.org/wiki/yak_shaving</a></p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAY</span> <span class="day">21</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/05/gitosis-how-to-add-new-repository">gitosis and how to add new repository</a></h2>
			        <p class="teaser_info"><p>gitosis: how to add new repository</p><br />
<br />
<br />
<p>I assume that you already have your gitosis-admin repository working (this is described elsewhere).</p><br />
<br />
<br />
<p>   1. cd gitosis-admin &amp;& git pull - enter your gitosis administrative repository and ensure it is up-to-date<br /><br />
   2. $EDITOR gitosis.conf<br /><br />
   3. add [group newreponame] section (newreponame is the name of your new repository being added); add yourself with members = yourlogin@yourhost line; also add writable = newreponame line:</p><br />
<br />
<br />
<pre><br />
          [group newreponame]<br />
          members = yourlogin@yourhost<br />
          writable = newreponame<br />
</pre><br />
<br />
<br />
<p>   4. based on my assumption of a correctly setup gitosis-admin repository, you should already have the appropriate public key in the keydir directory, but if not - copy your user's ssh public key to keydir in the form of <a href="mailto:yourlogin@yourhostname.pub">yourlogin@yourhostname.pub</a>, then do git add keydir/yourlogin@yourhostname.pub<br /><br />
   5. git commit -am new repository: newreponame'; git push;<br /><br />
   6. now that you have the new repo permissions configured, let's actually create it. Navigate to the directory holding the files of your project (e.g. cd ~/newreponame), and do git init; git add . - this initializes empty git repository, and then adds all the files to it.<br /><br />
   7. git commit -m initial commit'<br /><br />
   8. git remote add origin ssh://gitosis@yourGitosisServerName/newreponame.git<br /><br />
   9. git push --all<br /><br />
  10. final thing: git config --add branch.master.remote origin &amp;& git config --add branch.master.merge refs/heads/master; alternatively, cd .git &amp;& $EDITOR config, and then add these lines:</p><br />
<br />
<br />
<pre><br />
          [branch "master"]<br />
          remote = origin<br />
          merge = refs/heads/master<br />
</pre><br />
<br />
<br />
<p>      Without these lines, you won't be able to git pull.</p><br />
<br />
<br />
<p>      copied from: <a href="http://bogdan.org.ua/2009/02/20/gitosis-how-to-add-new-repository.html" title="http://bogdan.org.ua/2009/02/20/gitosis-how-to-add-new-repository.html">http://bogdan.org.ua/2009/02/20/gitosis-how-to-add-new-repository.html</a></p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAY</span> <span class="day">20</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/05/boot-rb-for-rails-3-on-heroku">boot rb for rails 3 on heroku</a></h2>
			        <p class="teaser_info"><p>copied from someone awesome at <a href="http://gist.github.com/368681" title="http://gist.github.com/368681">http://gist.github.com/368681</a></p><br />
<br />
<br />
<br />
<br />
<script src="https://gist.github.com/368681.js?file=boot.rb"></script><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAY</span> <span class="day">18</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/05/use-rails-revision-as-directory-for-amazon-s3-asset-upload">use rails revision as directory for amazon S3 asset upload</a></h2>
			        <p class="teaser_info"><p>copied from this excellent video - <a href="http://www.bestechvideos.com/2009/06/26/sd-ruby-episode-63-earning-an-a-in-yslow" title="http://www.bestechvideos.com/2009/06/26/sd-ruby-episode-63-earning-an-a-in-yslow">http://www.bestechvideos.com/2009/06/26/sd-ruby-episode-63-earning-an-a-...</a></p><br />
<br />
<br />
<p>Use this script to upload all your assets to S3 using REVISION to auto expire assets on a new deploy.</p><br />
<br />
<br />
<br />
<br />
<script src="https://gist.github.com/860764.js?file=amazon-s3-upload.rb"></script><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAY</span> <span class="day">18</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/05/gzip-for-dummies">gzip for dummies</a></h2>
			        <p class="teaser_info"><p>GZIP To Compress Files:</p><br />
<br />
<br />
<p>The syntax for Gzip is</p><br />
<br />
<br />
<p>gzip filename<br /><br />
The resulting file will be filename.gz - notice the .gz file extension. If you were compressing a tar file for example, the resulting file would be filename.tar.gz, and so on.</p><br />
<br />
<br />
<p>To achieve better compression, you can use the -9 option. (i.e. gzip -9 filename) This will take a little longer, but will result in your compressed file taking up less space.</p><br />
<br />
<br />
<p>GUNZIP To Expand Files:</p><br />
<br />
<br />
<p>To uncompress a file, the sister to Gzip is Gunzip. To uncompress a file, simply type</p><br />
<br />
<br />
<p>gunzip filename</p><br />
<br />
<br />
<p>Just like any UNIX program, full usage instructions for Gzip can be found using the man tool. Simply type man gzipat the prompt for full instructions.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAY</span> <span class="day">18</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/05/etags-sample-for-rails-app">etags sample for rails app</a></h2>
			        <p class="teaser_info"><pre><br />
def show<br />
  @article = Article.find(params[:id]) <br />
  <br />
  if stale?(:etag => @article, :last_modified => @article.created_at.utc)<br />
    @statistics = @article.really_expensive_call<br />
    respond_to do |format|<br />
      #etc<br />
    end<br />
  end<br />
end<br />
</pre><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAY</span> <span class="day">18</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/05/418-means-I-am-a-teapot">418 means I am a teapot</a></h2>
			        <p class="teaser_info"><div><br />
<p>HTTP Error 418 - I&#039;m a teapot</p><br />
<table border="0" cellpadding="5"><br />
<tbody><br />
<tr><br />
<td><br />
            <strong>418 Status Code Explained</strong><br /><br />
<p>The HTCPCP server is a teapot. The responding entity may be short and stout.</p><br />
<p><br /><br /><br />
            <strong>Why it occurs</strong><br /></p><br />
<p>This code was defined as one of the traditional IETF April Fools&#039; jokes, in RFC 2324, Hyper Text Coffee Pot Control Protocol, and is not expected to be implemented by actual HTTP servers. </p><br />
<p><br /></p><br />
<p>         <strong>Fixing 418 Error Code</strong><br /></p><br />
<p>This is a type of a http error and If you are monitoring your website by 100pulse, we will intimate whenever you encounter 418 status code error through e-mail or Short message service.  </p><br />
<p><br /></p><br />
</td><br />
</tr><br />
</tbody><br />
</table><br />
</div><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAY</span> <span class="day">17</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/05/get-your-git-here">get your git here</a></h2>
			        <p class="teaser_info"><p><a href="http://code.google.com/p/git-osx-installer/" title="http://code.google.com/p/git-osx-installer/">http://code.google.com/p/git-osx-installer/</a></p><br />
<br />
<br />
<p>Run the git-1.6.4.4-intel-leopard.pkg (A basic installer. Note: You'll need administrative privileges.)</p><br />
<br />
<br />
<p>Complete the Installation</p><br />
<br />
<br />
<p>Open up a terminal</p><br />
<br />
<br />
<p>Change directories to the mounted image</p><br />
<br />
<br />
<p>bash$ cd /Volumes/Git\ 1.6.4.4\ Intel\ Leopard/<br /><br />
bash$ ls<br /><br />
README.txt                    setup git PATH for non-terminal programs.sh<br /><br />
git-1.6.4.4-intel-leopard.pkg            uninstall.sh</p><br />
<br />
<br />
<p>bash$ ./setup\ git\ PATH\ for\ non-terminal\ programs.sh</p><br />
<br />
<br />
<p>Run the shell script (last line above)</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAY</span> <span class="day">17</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/05/custom-terminal-colors">custom terminal colors</a></h2>
			        <p class="teaser_info"><p>copied from <a href="http://y-draw.com/blog/articles/2009/11/20/mac-os-x-terminal-configuration/" title="http://y-draw.com/blog/articles/2009/11/20/mac-os-x-terminal-configuration/">http://y-draw.com/blog/articles/2009/11/20/mac-os-x-terminal-configuration/</a></p><br />
<br />
<br />
<script src="https://gist.github.com/860767.js?file=bash-colors.sh"></script><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAY</span> <span class="day">17</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/05/compiling-mysql-and-getting-the-gem-installed-correctly">compiling mysql and getting the gem installed correctly</a></h2>
			        <p class="teaser_info"><p>Download your preferred MYSQL version from the community download site. If you're on Snow Leopard, you may want to install the 64-bit version.</p><br />
<br />
<br />
<p>Install mysql via dmg or compile it from source.</p><br />
<br />
<br />
<p>Type which mysql_config' on the terminal to locate said config. Take note of this location as we'll use it on the next step.</p><br />
<br />
<br />
<p>Install the mysql gem with the command below. If the location for your mysql config is different with the one below, use that instead.</p><br />
<br />
<br />
<pre><br />
sudo env ARCHFLAGS="-Os -arch x86_64 -fno-common" \<br />
gem install mysql -- --with-mysql-config=/usr/local/mysql/bin/mysql_config<br />
</pre><br />
<br />
<br />
<p><br />
worked for me!</p><br />
<br />
<br />
<p>thanks to <a href="http://www.sylv3rblade.com/2010/04/installing-the-mysql-gem-on-os-x-10-6-snow-leopard/" title="http://www.sylv3rblade.com/2010/04/installing-the-mysql-gem-on-os-x-10-6-snow-leopard/">http://www.sylv3rblade.com/2010/04/installing-the-mysql-gem-on-os-x-10-6...</a></p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAR</span> <span class="day">29</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/03/make-sqlite-work-with-snow-leopard">make sqlite work with snow leopard</a></h2>
			        <p class="teaser_info"><script src="https://gist.github.com/860770.js?file=snow-leopard-sqlite.sh"></script><br />
<br />
<br />
<p><br />
copied from:</p><br />
<br />
<br />
<p><a href="http://support.mozilla.com/tiki-view_forum_thread.php?locale=nl&amp;forumId=1&amp;comments_parentId=432894" title="http://support.mozilla.com/tiki-view_forum_thread.php?locale=nl&amp;forumId=1&amp;comments_parentId=432894">http://support.mozilla.com/tiki-view_forum_thread.php?locale=nl&amp;forumId=...</a></p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAR</span> <span class="day">18</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/03/mac-osx-screenshots">mac osx screenshots</a></h2>
			        <p class="teaser_info"><p>Taking Screenshots in Mac OS X</p><br />
<br />
<br />
<p>Shortcuts</p><br />
<br />
<br />
<p>    * Command-Shift-3: Take a screenshot of the screen, and save it as a file on the desktop<br /><br />
    * Command-Shift-4, then select an area: Take a screenshot of an area and save it as a file on the desktop<br /><br />
    * Command-Shift-4, then space, then click a window: Take a screenshot of a window and save it as a file on the desktop<br /><br />
    * Command-Control-Shift-3: Take a screenshot of the screen, and save it to the clipboard<br /><br />
    * Command-Control-Shift-4, then select an area: Take a screenshot of an area and save it to the clipboard<br /><br />
    * Command-Control-Shift-4, then space, then click a window: Take a screenshot of a window and save it to the clipboard </p><br />
<br />
<br />
<p>In Leopard, the following keys can be held down while selecting an area (via Command-Shift-4 or Command-Control-Shift-4):</p><br />
<br />
<br />
<p>    * Space, to lock the size of the selected region and instead move it when the mouse moves<br /><br />
    * Shift, to resize only one edge of the selected region<br /><br />
    * Option, to resize the selected region with its center as the anchor point</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAR</span> <span class="day">08</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/03/fun-with-jquery">fun with jquery</a></h2>
			        <p class="teaser_info"><script src="https://gist.github.com/860775.js?file=approval-statuses.js"></script><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAR</span> <span class="day">04</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/03/more-on-status-codes">more on status codes</a></h2>
			        <p class="teaser_info"><p>Status Codes</p><br />
<br />
<br />
<p>Full detail: <a href="http://en.wikipedia.org/wiki/List_of_HTTP_status_codes" title="http://en.wikipedia.org/wiki/List_of_HTTP_status_codes">http://en.wikipedia.org/wiki/List_of_HTTP_status_codes</a></p><br />
<br />
<br />
<p>    * 100 - Continue<br /><br />
    * 101 - Switching Protocols<br /><br />
    * 200 - OK<br /><br />
    * 201 - Created<br /><br />
    * 202 - Accepted<br /><br />
    * 203 - Non-Authoritative Information<br /><br />
    * 204 - No Content<br /><br />
    * 205 - Reset Content<br /><br />
    * 206 - Partial Content<br /><br />
    * 300 - Multiple Choices<br /><br />
    * 301 - Moved Permanently<br /><br />
    * 302 - Found<br /><br />
    * 303 - See Other<br /><br />
    * 304 - Not Modified<br /><br />
    * 305 - Use Proxy<br /><br />
    * 306 - No Longer Used<br /><br />
    * 307 - Temporary Redirect<br /><br />
    * 400 - Bad Request<br /><br />
    * 401 - Not Authorised<br /><br />
    * 402 - Payment Required<br /><br />
    * 403 - Forbidden<br /><br />
    * 404 - Not Found<br /><br />
    * 405 - Method Not Allowed<br /><br />
    * 406 - Not Acceptable<br /><br />
    * 407 - Proxy Authentication Required<br /><br />
    * 408 - Request Timeout<br /><br />
    * 409 - Conflict<br /><br />
    * 410 - Gone<br /><br />
    * 411 - Length Required<br /><br />
    * 412 - Precondition Failed<br /><br />
    * 413 - Request Entity Too Large<br /><br />
    * 414 - Request URI Too Long<br /><br />
    * 415 - Unsupported Media Type<br /><br />
    * 416 - Requested Range Not Satisfiable<br /><br />
    * 417 - Expectation Failed<br /><br />
    * 500 - Internal Server Error<br /><br />
    * 501 - Not Implemented<br /><br />
    * 502 - Bad Gateway<br /><br />
    * 503 - Service Unavailable<br /><br />
    * 504 - Gateway Timeout<br /><br />
    * 505 - HTTP Version Not Supported</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">FEB</span> <span class="day">26</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/02/get-your-ip-from-rails-console">get your ip from rails console</a></h2>
			        <p class="teaser_info"><pre><br />
`ifconfig -m en1`.scan(/inet[\s]([\d]+\.[\d]+\.[\d]+\.[\d]+)/).flatten.first<br />
<br />
</pre><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JAN</span> <span class="day">28</span> <span class="year">2010</span> </h3></div>
			        <h2 class="post_link"><a href="/2010/01/my-stacker-class">my stacker class</a></h2>
			        <p class="teaser_info"><p>For anyone that uses FusionCharts, this little class may be very helpful.</p><br />
<br />
<br />
<p>It is for building xml files to feed FusionCharts &#039;Stacked&#039; charts, and it has already saved my ass.</p><br />
<br />
<br />
<br />
<br />
<script src="https://gist.github.com/860786.js?file=stacker.rb"></script><br />
<br />
<br />
<br />
<br />
<p><br />
The only kicker is that you need your own &#039;pad_month&#039; function to add a pad zero to any single digits in your day.</p><br />
<br />
<br />
<p>So get rid of the Utils module and stick in this pad_month method and you should be golden.</p><br />
<br />
<br />
<pre><br />
def pad_month(this)<br />
  if this.to_i &lt; 10<br />
    return "0#{this}"<br />
  else<br />
    return "#{this}"<br />
  end<br />
end<br />
</pre><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">DEC</span> <span class="day">17</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/12/my-little-geocoder-class-for-ruby-on-rails">my little geocoder class for Ruby on Rails</a></h2>
			        <p class="teaser_info"><p>works like a charm.</p><br />
<br />
<br />
<script src="https://gist.github.com/860798.js?file=geocoder.rb"></script><br />
<br />
<br />
<p><br />
and is used like this:</p><br />
<br />
<br />
<pre><br />
<br />
ll = GetLatLong.new<br />
ll.address=address_value<br />
ll.city=city_value<br />
ll.state=state_value<br />
ll.zip=zip_value<br />
puts ll.run<br />
send_this[6]=ll.latitude<br />
send_this[7]=ll.longitude<br />
<br />
</pre><br />
<br />
<br />
<p><br />
Nice and easy.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">DEC</span> <span class="day">14</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/12/i-had-to-check-in-today">I had to check in today</a></h2>
			        <p class="teaser_info"><p>What an end of the year it has been. Highs and lows. Mostly highs, I guess. :)</p><br />
<br />
<br />
<p>I have been married now for 6 months, and it feels great. I think I am more inspired than ever to create a smart, sustainable and above all creative life for myself along with my awesome partner Lavinia. I have been really digging in with Rails over the last few months. This brings me to my 3rd year straight of Ruby on Rails all the time.</p><br />
<br />
<br />
<p>After a career that was at one point exclusively contract for a number of years, I have been a full-time Director of Engineering for almost 2 consecutive years and in that time I have built a best-in-class Rails app for tracking digital pre-paid card sales that has literally changed the landscape in our class of business. Now that we are almost out of beta, it is time for me to start looking for new challenges.</p><br />
<br />
<br />
<p>Let&#039;s hope the next few weeks find me a great new company that is either near Santa Monica or ready to let me work from home. My life is Ruby and I won&#039;t disappoint!</p><br />
<br />
<br />
<p>thanks</p><br />
<br />
<br />
<p>krister</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">NOV</span> <span class="day">30</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/11/copy-your-rsa-pub-key">copy your rsa.pub key</a></h2>
			        <p class="teaser_info"><p>cat .ssh/id_rsa.pub | pbcopy </p><br />
<br />
<br />
<p>from ~/.</p><br />
<br />
<br />
<p>I was looking for this today.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">OCT</span> <span class="day">25</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/10/netbooks-with-ssd">netbooks with SSD</a></h2>
			        <p class="teaser_info"><p>zareason sells netbooks with ssd.</p><br />
<br />
<br />
<p><a href="http://www.zareason.com/" title="http://www.zareason.com/">http://www.zareason.com/</a></p><br />
<br />
<br />
<p>sweet!</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">SEP</span> <span class="day">18</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/09/the-thundering-herd-and-the-dining-philosophers">the thundering herd and the dining philosophers</a></h2>
			        <p class="teaser_info"><p>The &#039;Thundering Herd&#039;:</p><br />
<br />
<br />
<p>The thundering herd problem occurs when a large number of processes waiting for an event are awoken when that event occurs, but only one process is able to proceed at a time. After the processes wake up, they all demand the resource and a decision must be made as to which process can continue. After the decision is made the remaining processes are put back to sleep, only to wake up again to request access to the resource.</p><br />
<br />
<br />
<p>(from <a href="http://en.wikipedia.org/wiki/Thundering_herd_problem" title="http://en.wikipedia.org/wiki/Thundering_herd_problem">http://en.wikipedia.org/wiki/Thundering_herd_problem</a>)</p><br />
<br />
<br />
<p>The &#039;Dining Philosophers&#039;:</p><br />
<br />
<br />
<p>The dining philosophers problem is summarized as five philosophers sitting at a table doing one of two things: eating or thinking. While eating, they are not thinking, and while thinking, they are not eating. The five philosophers sit at a circular table with a large bowl of spaghetti in the center. A fork is placed in between each pair of adjacent philosophers, and as such, each philosopher has one fork to his left and one fork to his right. As spaghetti is difficult to serve and eat with a single fork, it is assumed that a philosopher must eat with two forks. Each philosopher can only use the forks on his immediate left and immediate right.</p><br />
<br />
<br />
<p>(from <a href="http://en.wikipedia.org/wiki/Dining_philosophers_problem" title="http://en.wikipedia.org/wiki/Dining_philosophers_problem">http://en.wikipedia.org/wiki/Dining_philosophers_problem</a>)</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">SEP</span> <span class="day">17</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/09/round-to-function-for-ruby-float-class">round to function for ruby float class</a></h2>
			        <p class="teaser_info"><p>I found this on a blog post somewhere, and it works really well. If you need to round your decimals to precision, this is your friend. It&#039;s a method extension for the standard float class in Ruby on Rails. Just save it into your lib/ folder as whatever you want, and &#039;require&#039; it in as needed - like so:</p><br />
<br />
<br />
<pre><br />
  require &#039;float_helper&#039;<br />
</pre><br />
<br />
<br />
<p><br />
I called it &#039;float_helper.rb&#039;.</p><br />
<br />
<br />
<p>Behold:</p><br />
<br />
<br />
<script src="https://gist.github.com/860803.js?file=float_helper.rb"></script><br />
<br />
<br />
<p><br />
used here to great effect as a simple round to integer:</p><br />
<br />
<br />
<pre><br />
  unaccounted_sales = x["value"].to_f.round_to(0)<br />
</pre><br />
<br />
<br />
<p><br />
but you can specify the precision as you like.</p><br />
<br />
<br />
<p>Enjoy!</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">AUG</span> <span class="day">20</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/08/the-hackingtosh">the hackingtosh</a></h2>
			        <p class="teaser_info"><p>I am always intrigued by new slang terms, especially ones that apply to tech.</p><br />
<br />
<br />
<p>Behold the new hackingtosh, linked here: <a href="http://lifehacker.com/software/hack-attack/build-a-hackintosh-mac-for-under-800-321913.php" title="http://lifehacker.com/software/hack-attack/build-a-hackintosh-mac-for-under-800-321913.php">http://lifehacker.com/software/hack-attack/build-a-hackintosh-mac-for-un...</a></p><br />
<br />
<br />
<p>Which is really just the concept of putting Mac OSX on a laptop that was not originally an Apple. I already have my MacBook Pro which is more or less awesome, but I do plan on picking up an Ubuntu (Linux) netbook eventually as a travel laptop, and I have my eye on this one:</p><br />
<br />
<br />
<p><a href="http://system76.com/product_info.php?cPath=28&amp;products_id=92&amp;osCsid=d482c4780269251459fbb9911194405a" title="http://system76.com/product_info.php?cPath=28&amp;products_id=92&amp;osCsid=d482c4780269251459fbb9911194405a">http://system76.com/product_info.php?cPath=28&amp;products_id=92&amp;osCsid=d482...</a></p><br />
<br />
<br />
<p>Holy lowered price point, Batman!</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">AUG</span> <span class="day">20</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/08/a-little-scraper-rake-task">a little scraper rake task</a></h2>
			        <p class="teaser_info"><p>Written for no good reason, mostly just to play with hpricot. Good times.</p><br />
<br />
<br />
<script src="https://gist.github.com/860806.js?file=scraper.rb"></script><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JUN</span> <span class="day">19</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/06/status-codes-101">status codes 101</a></h2>
			        <p class="teaser_info"><p>Ah, the old http status code. Very nice. I recently built my first pro-grade web service and had some problems figuring out the status codes. Here are some tips from my friend happyfrenchy2:<br /><br />
<i><br /><br />
Usually I write my rest service so that a problem with the parameters (wrong ID, not enough params, etc) returns a 400 (bad request), a auth failure (wrong signature) returns a 403 (forbidden) and an internal problem (couldn't access DB for instance) returns a 503 (server error). Return code 500 should be when the error happens before your code was even reached (like the server or web-server is down).</i></p><br />
<br />
<br />
<p>Very helpful. This is what that looks like, in the create method of the /installs web service:</p><br />
<br />
<br />
<br />
<br />
<script src="https://gist.github.com/860812.js?file=web_service_sample.rb"></script><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JUN</span> <span class="day">02</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/06/sudo-port-command-not-found">sudo port command not found</a></h2>
			        <p class="teaser_info"><p>sudo: port: command not found</p><br />
<br />
<br />
<p>are you getting this error? Add the below to your ~/.bash_profile -</p><br />
<br />
<br />
<p>export PATH=$PATH:/opt/local/bin<br /><br />
export MANPATH=$MANPATH:/opt/local/share/man<br /><br />
export INFOPATH=$INFOPATH:/opt/local/share/info</p><br />
<br />
<br />
<p>and then run</p><br />
<br />
<br />
<p>sudo port -d selfupdate</p><br />
<br />
<br />
<p>you should be fine (for Mac Leopard 10.5)</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAY</span> <span class="day">01</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/05/this-worked-for-me">this worked for me</a></h2>
			        <p class="teaser_info"><p>recursevly remove .svn files from an existing repo.</p><br />
<br />
<br />
<p>If you need to take a project out of scm, you can run this bash script from the top folder - and it will remove all .svn folders recursively.</p><br />
<br />
<br />
<p>Works well for<br /><br />
- changing an svn checkout into and svn export<br /><br />
- switching from svn to git</p><br />
<br />
<br />
<p>find . -type d -name &#039;.svn&#039; -exec rm -rf {} \;</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">APR</span> <span class="day">23</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/04/tunnel-of-love">tunnel of love</a></h2>
			        <p class="teaser_info"><p>This little puppy is my tunnel of love. Connecting to SQL databases just keeps getting more complicated. :)</p><br />
<br />
<br />
<p>ssh -L 8888:localhost:3306 <a href="mailto:rails@staging.gmgdev.railsmachina.com">rails@staging.gmgdev.railsmachina.com</a></p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">APR</span> <span class="day">23</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/04/good-stuff-on-remote-rsync">good stuff on remote rsync</a></h2>
			        <p class="teaser_info"><p>Making remote copies</p><br />
<br />
<br />
<p>What if you want to copy files offsite to a remote host? No problem -- all you need to do is add the host and user information. So, for instance, if you want to copy the same directory to a remote host, you&#039;d use:</p><br />
<br />
<br />
<p>rsync -avhe ssh --delete /home/user/dir/ user@remote.host.com:dir/</p><br />
<br />
<br />
<p>If you want to know how fast the transfer is going, and how much remains to be copied, add the --progress option:</p><br />
<br />
<br />
<p>rsync --progress -avhe ssh --delete /home/user/dir/ user@remote.host.com:dir/</p><br />
<br />
<br />
<p>If you don&#039;t want to be prompted for a password each time rsync makes a connection -- and you don&#039;t -- make sure that you have rsync set up to log in using an SSH key rather than a password. To do this, create an SSH key on the local machine using ssh-keygen -t dsa, and press Enter when prompted for a passphrase. After the key is created, use ssh-copy-id -i .ssh/id_dsa.pub <a href="mailto:user@remote.host.com">user@remote.host.com</a> to copy the public key to the remote host.</p><br />
<br />
<br />
<p>What if you need to bring back some of the files you copied using rsync? Use the following syntax:</p><br />
<br />
<br />
<p>rsync -avze ssh remote.host.com:/home/user/dir/ /local/path/</p><br />
<br />
<br />
<p>The z option compresses data during the transfer. If the file you are copying exists on the local host, then rsync will just leave it alone -- the same as if you were copying files to a remote host.<br /><br />
Wrapping it up with a script</p><br />
<br />
<br />
<p>Once you&#039;ve figured out what directory or directories you want to sync up, and you&#039;ve gotten the commands you need to sync everything, it&#039;s easy to wrap it all up with a simple script. Here&#039;s a short sample:</p><br />
<br />
<br />
<p>rsync --progress -avze ssh --delete /home/user/bin/ user@remote.host.com:bin/<br /><br />
rsync --progress -avze ssh --delete /home/user/local/data/ user@remote.host.com:local/data/<br /><br />
rsync --progress -avze ssh --delete /home/user/.tomboy/ user@remote.host.com:/.tomboy/</p><br />
<br />
<br />
<p>also remember to to use the --dry-run option with your commands</p><br />
<br />
<br />
<p>** good stuff on remote rsync **</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">APR</span> <span class="day">22</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/04/add-textmate-to-your-mac-10-5-path">add textmate to your Mac 10.5 path</a></h2>
			        <p class="teaser_info"><p>This is the puppy that worked for me:</p><br />
<br />
<br />
<p>sudo ln -s /Applications/TextMate.app/Contents/Resources/mate /bin/mate</p><br />
<br />
<br />
<p>** add textmate to your Mac 10.5 path **</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAR</span> <span class="day">30</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/03/this-site-rocks">this site rocks</a></h2>
			        <p class="teaser_info"><p><a href="http://layouts.ironmyers.com/">http://layouts.ironmyers.com/</a></p><br />
<br />
<br />
<p>Awesome free css layouts? Ok!</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAR</span> <span class="day">25</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/03/i-missed-writing-sql">i missed writing sql</a></h2>
			        <p class="teaser_info"><p>Here is the first stored procedure that I have written in long time, fully finished. This puppy runs like a charm.</p><br />
<br />
<br />
<script src="https://gist.github.com/860823.js?file=sp_generate_forecast.sql"></script><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAR</span> <span class="day">20</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/03/top-5-sql-query-with-other-included">Top 5 sql query with other included</a></h2>
			        <p class="teaser_info"><p>Top 5 sql query</p><br />
<br />
<br />
<p>This week has been all about the SQL. Here is some fun I had with it. This is dynamic sql, and you are seeing the end product - this was originally built as a find_by_sql call, and of course had bind variables that you don&#039;t see here - but you get the idea.</p><br />
<br />
<br />
<script src="https://gist.github.com/860832.js?file=TOP_5.sql"></script><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">FEB</span> <span class="day">26</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/02/an-old-pivot-table-report-procedure">an old pivot table report procedure</a></h2>
			        <p class="teaser_info"><p>Back in the day, I wrote reports for Rupert himself at FOX IT. Here is an old query from those days (written in T-SQL for .NET Reporting Services):</p><br />
<br />
<br />
<br />
<br />
<script src="https://gist.github.com/860840.js?file=dbo-PR_T09.sql"></script><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">FEB</span> <span class="day">19</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/02/git-ftw">git ftw</a></h2>
			        <p class="teaser_info"><p>copied from:<br /><br />
            <a href="http://www.simplisticcomplexity.com/2008/03/05/cleanly-migrate-your-subversion-repository-to-a-git-repository/" rel="bookmark" title="Permanent Link to Cleanly Migrate Your Subversion Repository To a GIT Repository">Cleanly Migrate Your Subversion Repository To a GIT Repository</a></p><br />
<br />
<br />
<p>The first thing we need to do is create a <em>users</em> file that maps all your SVN users to your GIT users. Just make a file on your Desktop named &#039;users.txt&#039;. Map the users using this format:</p><br />
<br />
<br />
<p>jmaddox = Jon Maddox<br /><br />
bigpappa = Brian Biggs </p><br />
<br />
<br />
<p>Simple. Now here are the commands you&#039;ll run. I&#039;ll explain them below.</p><br />
<br />
<br />
<p>mkdir my_blog_tmp<br /><br />
cd my_blog_tmp<br /><br />
git-svn init <a href="http://code.yoursite.net/my_blog/trunk/">http://code.yoursite.net/my_blog/trunk/</a> --no-metadata<br /><br />
git config svn.authorsfile ~/Desktop/users.txt<br /><br />
git-svn fetch</p><br />
<br />
<br />
<p>The first two are self explanatory, we&#039;re making a new directory for the temporary repository. The second command initializes the directory as a git-svn hybrid thing and points the origin at your SVN repository. The flag, --no-metadata, tells GIT to leave all the SVN details behind (not the commit log). The fourth command tells GIT to remap all the SVN users to GIT users when it sucks down the source and history. The last command actually does the fetching.</p><br />
<br />
<br />
<p>Ok, so now after a few LONG minutes, your source is all there. Do a git log to see that your users have been mapped. Sweet!</p><br />
<br />
<br />
<p>Now you just have one last step. You need to clone this repository. Why do we do this? When doing a normal git clone it will take everything we want from the temporary repository, while leaving behind all the SVN cruft that was there to support the git-svn stuff.</p><br />
<br />
<br />
<p>git clone my_blog_tmp my_blog</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">FEB</span> <span class="day">18</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/02/gem-install-id3lib-ruby-mac-command">gem install id3lib ruby mac command</a></h2>
			        <p class="teaser_info"><p>you need this to install the ruby id3lib library under mac if you installed the  actual id3lib library with MacPorts:</p><br />
<br />
<br />
<p> ARCHFLAGS="-arch i386" gem install id3lib-ruby -- --build-flags --with-opt-dir=/opt/local<br /><br />
<a href="http://www.digbox.net/index.php/news/gem-install-id3lib-ruby-mac-command">Original post</a> blogged on <a href="http://codeboxer.com">codeboxer.com</a>.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">FEB</span> <span class="day">09</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/02/yetii-we-love-it">Yetii we love it</a></h2>
			        <p class="teaser_info"><p><a href="http://www.kminek.pl/lab/yetii/">http://www.kminek.pl/lab/yetii/</a></p><br />
<br />
<br />
<br />
<br />
<p>It rocks. No nonsense, full-featured, light, single js file. Follow the instructions. Remember to instantiate your object in the &#039;view&#039; file - like so:</p><br />
<br />
<br />
<br />
<br />
<script src="https://gist.github.com/860846.js?file=yetii-sample.html"></script><br />
<br />
<br />
<br />
<br />
<p>where you can actually set the &#039;active&#039; tab. Neat!</p><br />
<br />
<br />
<br />
<br />
<p>For all your html-based tab / dynamic page needs.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">FEB</span> <span class="day">08</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/02/streamclip-we-love-it">Streamclip we love it</a></h2>
			        <p class="teaser_info"><p><a href="http://en.wikipedia.org/wiki/MPEG_Streamclip">http://en.wikipedia.org/wiki/MPEG_Streamclip</a></p><br />
<br />
<br />
<p>I needed to rip an old live dvd from about 5 years ago with an archaic encryption and this little puppy did it - on my Intel MacBook Pro. I also had to buy the <a href="http://www.apple.com/quicktime/mpeg2/">http://www.apple.com/quicktime/mpeg2/</a> Quicktime encoder. Leave it to QT to fleece you every change they get. The streamclip utility works really well and will allow to you crop video - something QT would be happy to charge you another $30 for (Quicktime &#039;Pro&#039;). Don&#039;t do it. You need the mpeg2 encoder but don&#039;t buy the Quicktime Pro - it is more or less worthless.</p><br />
<br />
<br />
<p>more info for streamclip - <a href="http://www.squared5.com/">http://www.squared5.com/</a><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">FEB</span> <span class="day">05</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/02/mac-vs-pc-oy-the-controversy">Mac vs PC oy the controversy</a></h2>
			        <p class="teaser_info"><p>I stumbled across this ( <a href="http://tech.yahoo.com/blogs/null/116923">http://tech.yahoo.com/blogs/null/116923</a> ) story today, and as is increasingly the case, the comments are far more interesting than the article. It seems that people have very strong opinions about Microsoft and Vista. The general consensus - most people HATE Vista. I am one of those people, not so much because I know too much about it - other than it is a resource hog, is very slow, and was basically conceived of in order to sell more &#039;stuff&#039; - as opposed to meeting any sort of concrete need.</p><br />
<br />
<br />
<p>Anyway, here it is in a nutshell - if you want user-friendly, totally reliable, works right out of the box, get a Mac. I couldn&#039;t possibly use anything other than my MacBook Pro for the software development I do. Linux is a relatively close second. Windows is way behind the pack.</p><br />
<br />
<br />
<p>So that&#039;s my two cents - Microsoft? Mostly just a piece of sh1t.</p><br />
<br />
<br />
<p>I always tell this story at work - basically a few years back I wrote reports for Fox IT and I had to install the whole .NET stack - information server (IS), the .NET platform, and then Reporting Services platform (a branch of Visual Studio). It literally took me a week. After about 6 attempted installs that went wrong for one reason or another - adding patches in wrong order, finding the right MS subscription disc for the newest RS install, wrestling the right admin privileges from the network admins, etc. A whole week.</p><br />
<br />
<br />
<p>You can walk into an Apple store, buy a MacBook off the shelf, download the latest Ruby/Rails stack and be up and running by maybe right after lunch time. There is just no comparison. Of course you have to write your own reports (as there is no real reporting platform yet for Rails) but there WILL be, and for now writing reports with rails is already pretty easy.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JAN</span> <span class="day">28</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/01/mysql-5-0-syntax-for-the-update-select">mysql 5.0 syntax for the UPDATE SELECT</a></h2>
			        <p class="teaser_info"><p>It&#039;s pretty funky stuff. The trick is to alias the table you are updating.</p><br />
<br />
<br />
<script src="https://gist.github.com/860852.js?file=update_select_sample.sql"></script><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JAN</span> <span class="day">28</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/01/minor-league-pivot-query">minor league pivot query</a></h2>
			        <p class="teaser_info"><p>This would be a pivot query 101 kind of snippet. They teach this in SQL kindergarten - I only imagine, of course, because I never went. </p><br />
<br />
<br />
<p>The use case: it&#039;s a single table, with values grouped by partner_id and two enums for revplan_type. You need a variance report. What do you do?</p><br />
<br />
<br />
<script src="https://gist.github.com/860857.js?file=minor_league_pivot_query.sql"></script><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JAN</span> <span class="day">28</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/01/how-to-call-a-stored-routine-from-rails">how to call a stored routine from Rails</a></h2>
			        <p class="teaser_info"><p>So you wanna call your own stored routine, eh?<br /><br />
Here ya go - the right syntax. I read on a blog somewhere that you send any command to the database through a .find_by_sql command, but that turned out to be a load of baloney. Is there anything Ruby + ActiveRecord can&#039;t do?</p><br />
<br />
<br />
<script src="https://gist.github.com/860862.js?file=call_stored_routine.rb"></script><br />
<br />
<br />
<p>Clothing, I mean transaction support is optional.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JAN</span> <span class="day">23</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/01/mysql-5-0-sp-with-cursor-logic">MySQL 5.0 SP with Cursor Logic</a></h2>
			        <p class="teaser_info"><p>I have written a bunch of SPs over the years (stored procedure, as I learned it, but MySQL calls them Stored Routines - SRs?). I even have my best/largest/most complicated SP ever linked here at <a href='http://blog.kristeraxel.com/wp-content/uploads/2009/01/migration189.txt'>migration189</a>.<br />
</p><br />
<br />
<br />
<p>That one was of course written in PL/SQL, and I have now officially moved out of the world of Oracle and into the world of MySQL 5.0 - which is sort of like moving from New York City to San Jose (weather notwithstanding).</p><br />
<br />
<br />
<p>Anyway, I found precious little RECENT coverage on how MySQL implemented it&#039;s &#039;stored routines&#039;, and I got to tell ya it took some digging - never mind trying to figure out how cursors work. MySQL, btw, has an ok documentation section but it is mediocre at best, somehow following in the fragmented example of the Rails community in what seems to be the curse of the open-source ADD.</p><br />
<br />
<br />
<p>So in the spirit of this site which has always been to keep pieces of code lying around that I may use later - here is my very first MySQL sp, which does nothing really useful except use a cursor to insert values into a table. Come back next week for the syntax needed to use parameters, lol.</p><br />
<br />
<br />
<p>Other things to notice - you have to declare a separate handler for pulling out of a cursor loop when you run out of records (does anyone else remember fondly how easy ADO recordsets were to use?) but other than that things look all right in MySQL land. Bye Oracle!</p><br />
<br />
<br />
<br />
<br />
<script src="https://gist.github.com/860870.js?file=cursor_sample.sql"></script><br />
<br />
<br />
<br />
<br />
<p>ps, gotta give a shout out to <a href="http://www.razorsql.com/">http://www.razorsql.com/</a> which so far has been easy to use and has served as stand-in IDE for Toad, which is what I was used to.</p><br />
<br />
<br />
<p>UPDATE: I now use SEQUEL PRO. (MAR 2011)</p><br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JAN</span> <span class="day">22</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/01/perl-linux-and-database-backups">Perl linux and database backups</a></h2>
			        <p class="teaser_info"><p>I got to tell ya, most of the greatest people don&#039;t get the recognition they deserve. Open Source is all about everyone putting in what they got. So mosey on over to <a href="http://worldcommunity.com/opensource/">http://worldcommunity.com/opensource/</a> and tell Peter Brown that his Perl-based mysql backup script works like a charm.</p><br />
<br />
<br />
<p>It is very easy to set up, so I won&#039;t go too far into it - just download and follow the instructions. I also opted in to for the ftp push, so after the script dumps out a mysql txt file for every table, it will tar it, zip it, and push it to the ftp server of your choice. Cool.</p><br />
<br />
<br />
<p>This is where it gets tricky - I pulled this little gem out of a comment on Peter Brown&#039;s site. This script leaves you with a directory of txt files - most of us are used to the single .sql file of the whole db, so getting at a full restore from a bunch of txt files does not sound fun - until linux jumps in for the rescue.</p><br />
<br />
<br />
<p>Get this, just untar it:</p><br />
<br />
<br />
<p>  tar -xf bak.mysql.2009-01-20_14.55.30_.tar.gz</p><br />
<br />
<br />
<p>Move into that directory:</p><br />
<br />
<br />
<p>  cd bak.mysql.2009-01-20_14.55.30</p><br />
<br />
<br />
<p>and hit it with the cat xargs combo, shooting it right into mysql:</p><br />
<br />
<br />
<p>  find . -name "*.txt" -print | xargs -t --replace cat {} | mysql your_db_name -u your_db_user -p -h subdir.yoursite.com</p><br />
<br />
<br />
<p>and you&#039;re done! sweet, huh?</p><br />
<br />
<br />
<p>p.s. - the -h switch at the end (-h subdir.yoursite.com) is not always necessary, if it is localhost you can leave it out.<a href="http://www.digbox.net/index.php/dba/mysql/perl-linux-and-database-backups">Original post</a> blogged on <a href="http://codeboxer.com">codeboxer.com</a>.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JAN</span> <span class="day">15</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/01/right-joins-versus-the-subquery">right joins versus the subquery</a></h2>
			        <p class="teaser_info"><p>If you&#039;re anything like me, you are a serious pragmatist. I like to get at the problem immediately, and if there are shortcuts, then we have to weight short-term versus long-term gain before we can choose sides.</p><br />
<br />
<br />
<p>Here is a great SQL example of this principle.</p><br />
<br />
<br />
<p>The old-school way to write this query would be with the subquery, like so:</p><br />
<br />
<br />
<br />
<br />
<script src="https://gist.github.com/860884.js?file=right_join_sample1.sql"></script><br />
<br />
<br />
<br />
<br />
<p>I am simply trying to verify that I have not seen sales for the &#039;Ralphs&#039; retailer come in yet, despite that &#039;merchant&#039; value already being present in the retailers table.</p><br />
<br />
<br />
<p>I know, it&#039;s a little confusing, but bear with me.</p><br />
<br />
<br />
<p>One might also write:</p><br />
<br />
<br />
<br />
<br />
<script src="https://gist.github.com/860890.js?file=right_join_sample2.sql"></script><br />
<br />
<br />
<br />
<br />
<p>Neither of these run very well. Without some added indexing, the first query won&#039;t return anything at all before it times out, and the second one runs ok but it is about 3 to 4 times slower than the right join (below).</p><br />
<br />
<br />
<br />
<br />
<script src="https://gist.github.com/860896.js?file=right_join_sample3.sql"></script><br />
<br />
<br />
<br />
<br />
<p>There you have it - right joins FTW.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JAN</span> <span class="day">07</span> <span class="year">2009</span> </h3></div>
			        <h2 class="post_link"><a href="/2009/01/scoping-for-dummies">scoping for dummies</a></h2>
			        <p class="teaser_info"><p>I hope I don&#039;t have to explain what scoping is. It is sort of analogous to the &#039;parameterized&#039; in &#039;parameterized query&#039;. Basically, once you start getting all hot and heavy with active record, you don&#039;t want to have write a specific model based routine to match EVERY query use-case, so enter scoping.</p><br />
<br />
<br />
<p>Here is an example:</p><br />
<br />
<br />
<br />
<br />
<script src="https://gist.github.com/860903.js?file=scoping_sample.rb"></script><br />
<br />
<br />
<br />
<br />
<p>Go nuts, people! The possibilities are endless.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">DEC</span> <span class="day">12</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/12/sample-class-with-a-unit-test">Sample class with a unit test</a></h2>
			        <p class="teaser_info"><p>Also from a job interview a while back.</p><br />
<br />
<br />
<p>Here is the class that they gave me, which I extended -</p><br />
<br />
<br />
<script src="https://gist.github.com/860916.js?file=ypset.rb"></script><br />
<br />
<br />
<p>And the unit test I wrote for it -</p><br />
<br />
<br />
<script src="https://gist.github.com/860922.js?file=test_ypset.rb"></script><br />
<br />
<br />
<p>Good times!</p><br />
<br />
<br />
<p>UPDATE: There is a small issue with the original class, so it does not work out of the box. There is a problem with the partition method, so feel free to fork and fix it.</p><br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">DEC</span> <span class="day">10</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/12/polymorphic-user-list-class-part-ii">polymorphic user list class part II</a></h2>
			        <p class="teaser_info"><p>This is part II of a series.<br /><br />
start here: <a href="http://blog.kristeraxel.com/2008/12/polymorphic-user-list-class/">http://blog.kristeraxel.com/2008/12/polymorphic-user-list-class/</a></p><br />
<br />
<br />
<br />
<br />
<script src="https://gist.github.com/860933.js?file=polymorphic_user_list2.rb"></script><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">DEC</span> <span class="day">10</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/12/do-the-alexa-dance-aka-a-review-of-alexa-reviews">Do the Alexa Dance aka a review of Alexa reviews</a></h2>
			        <p class="teaser_info"><p>I won&#039;t name names, or link links as it were, but ever since I discovered my own Alexa ranking(s) I have been obsessed with understanding how to optimize them - and as a matter of course I have read quite a few blogs about it. Without succumbing to the cliche of promising &#039;20 Ways to Game Your Ranking&#039;, I will share what I know.</p><br />
<br />
<br />
<p>The only people that matter are the users that have installed the Alexa toolbar from <a href="http://www.alexa.com/site/download">http://www.alexa.com/site/download</a>.</p><br />
<br />
<br />
<p>The traffic to your site of these users with the <a href="http://www.alexa.com/site/download">toolbar</a> installed over the last 3 months is what determines your rank. So at the most basic level, the logical thing to do is bump up marketing (really?) and hope that a good percentage of those new clicks are Alexa users. This may be effective, but it is also wasteful to some degree.</p><br />
<br />
<br />
<p>It is also worth noting that the Alexa user base reputedly skews very much towards webmasters, so another good way to attract a stronger percentage of Alexa users relative to your total user base is to target content towards webmasters, like a laser. You zap in their clicks with post titles like &#039;20 Sure Fire Tips on How to Be An Alexa Jedi&#039; or &#039;I Made It Into the Alexa Top 1000 - In Only 10 Minutes!&#039;. Of course you also need to have real stuff for them to read, or else the Jedi jokes can get your Force cut off. Anyway, my angle is that I work with Ruby on Rails, I post about Ruby On Rails, and I am a webmaster - so there&#039;s your targeted audience. </p><br />
<br />
<br />
<p>That being said, I have started a new category (<a href="http://www.digbox.net/index.php/alexa/" title="http://www.digbox.net/index.php/alexa/">http://www.digbox.net/index.php/alexa/</a>) to track my newfound obsession. And if you are reading this and haven&#039;t already installed your very own <a href="http://www.alexa.com/site/download">toolbar</a> then you don&#039;t deserve to be reading this, and I&#039;ll probably cry myself to sleep tonight. I hope you&#039;re happy.</p><br />
<br />
<br />
<p>Tune in next week for more observations.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">DEC</span> <span class="day">09</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/12/add-aggregates-to-a-group-by">add aggregates to a group by</a></h2>
			        <p class="teaser_info"><p>Pull in YTD aggregates, along with the numbers grouped by month - good example of a self-join as well as a &#039;derived table&#039; which in this example is called &#039;counted&#039;.</p><br />
<br />
<br />
<p>select s.product, count(s.serial_number) number_sold, year(s.item_date) y, month(s.item_date) m, counted.units<br /><br />
from sales s<br /><br />
join (select product, count(serial_number) units from sales group by product) counted on s.product = counted.product<br /><br />
      group by s.product, year(s.item_date), month(s.item_date)<br /><br />
      order by s.product, year(s.item_date), month(s.item_date)<br /><br />
<a href="http://www.digbox.net/index.php/SQL/add-aggregates-to-a-group-by">Original post</a> blogged on <a href="http://codeboxer.com">codeboxer.com</a>.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">DEC</span> <span class="day">05</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/12/tableless-models-and-a-checkbox-collection">Tableless models and a checkbox collection</a></h2>
			        <p class="teaser_info"><p>I have always loved the sound of a table-less model. It feels so dirty. Here is one from the school of hard knocks, known as the Merchant model:</p><br />
<br />
<br />
<p>class Merchant &lt; ActiveRecord::Base<br /><br />
  def self.columns() @columns ||= []; end</p><br />
<br />
<br />
<p>  def self.column(name, sql_type = nil, default = nil, null = true)<br /><br />
    columns &lt;&lt; ActiveRecord::ConnectionAdapters::Column.new(name.to_s, default, sql_type.to_s, null)<br /><br />
  end</p><br />
<br />
<br />
<p>  column :merchant, :string<br /><br />
  validates_presence_of :merchant</p><br />
<br />
<br />
<p>  def self.get_edit_values(page_id)<br /><br />
    new_arr = []<br /><br />
    Summary.find_by_sql(["<br /><br />
      SELECT merchant, CASE LENGTH(selected) &gt; 0 WHEN TRUE THEN 1 ELSE 0 END value FROM<br /><br />
        (SELECT value merchant, merchant selected<br /><br />
        FROM<br /><br />
          (SELECT merchant from merchant_pages where page_id=?) signed_up<br /><br />
            RIGHT JOIN (SELECT DISTINCT MERCHANT value FROM retailers) distinct_m<br /><br />
                    ON distinct_m. value = signed_up. merchant) new_alias<br /><br />
    ORDER BY merchant<br /><br />
      ", page_id.to_i]).each do |x|<br /><br />
                    new_arr &lt;&lt; [x.merchant, x.value]<br /><br />
                  end<br /><br />
                  new_arr<br /><br />
  end</p><br />
<br />
<br />
<p>  def self.get_values<br /><br />
    Summary.find_by_sql(["<br /><br />
      SELECT DISTINCT MERCHANT value FROM retailers order by merchant<br /><br />
      "]).each do |x|<br /><br />
      @columns &lt;&lt; x.value<br /><br />
    end<br /><br />
    @columns<br /><br />
  end</p><br />
<br />
<br />
<p>end</p><br />
<br />
<br />
<p>Of course, it does hit the database, but there is no Merchants table, per se, there is just this model. What returns from a &#039;SELECT * FROM MERCHANTS&#039; is the distinct selection for the value of &#039;merchant&#039; from the Retailers table. These come in from the partners, and they are very consistent. I can&#039;t tell you how helpful this is. The system auto-magically created a Target.com that showed up immediately alongside it&#039;s older bother, Target. Watch out, however, for cache-ing concerns that will necessarily stem from this approach in terms of scale - in this case, that was not a concern because we have a very small (but highly lucrative) user base.</p><br />
<br />
<br />
<p>This is the corresponding controller code. This is from the pages_controller, because there is no direct merchants_controller.</p><br />
<br />
<br />
<p>       def update<br /><br />
        @page = Page.find(params[:id])</p><br />
<br />
<br />
<p>         if @page.update_attributes(params[:page])<br /><br />
          if dump_all_merchant_pages(@page.id)<br /><br />
            params[:merchants].each do |p|<br /><br />
              create_or_update_merchant_page(p[0].to_s, @page.id, true)<br /><br />
            end<br /><br />
          end<br /><br />
          flash[:notice] = &#039;Page was successfully updated.&#039;<br /><br />
          redirect_to pages_path<br /><br />
        else<br /><br />
          render :action =&gt; &#039;edit&#039;<br /><br />
        end<br /><br />
      end</p><br />
<br />
<br />
<p>the functions, from the bottom of the page:</p><br />
<br />
<br />
<p>     private<br /><br />
      def dump_all_merchant_pages(page_id)<br /><br />
        Page.find(page_id).merchant_pages.each do |x|<br /><br />
          x.destroy<br /><br />
        end<br /><br />
        true<br /><br />
      end</p><br />
<br />
<br />
<p>       def create_or_update_merchant_page(m, p, val)<br /><br />
        x = MerchantPage.find_by_sql(["SELECT merchant<br /><br />
                                             FROM merchant_pages<br /><br />
                                            WHERE merchant = ?<br /><br />
                                              AND page_id = ? LIMIT 1", m, p])<br /><br />
        if !x.first<br /><br />
          x = MerchantPage.new(:merchant =&gt; m, :page_id =&gt; p)<br /><br />
          x.save<br /><br />
        else<br /><br />
          if !val<br /><br />
            x.destroy<br /><br />
          end<br /><br />
          true<br /><br />
        end<br /><br />
      end</p><br />
<br />
<br />
<p>Finally, the _page partial:</p><br />
<br />
<br />
<p>form_for ([@page]) do |f|<br /><br />
  Page Name<br /><br />
    f.text_field :title, :size =&gt; 60<br /><br />
    Main Content<br /><br />
    f.text_area :page_body, :cols =&gt; 100<br /><br />
    Locator Footer (Link back to Partner homepage)<br /><br />
    f.text_area :page_footer, :cols =&gt; 100, :rows =&gt; 5<br /><br />
  Merchants<br /><br />
  ul class="Merchant-list"<br /><br />
      if button_name=="Save Changes"<br /><br />
        @merchants.each do |m|<br /><br />
            li INPUT type="checkbox" name="merchants[&lt;=m[0]%&gt;][]" &lt;=m[1]=="1" ? "checked" : "" label m[0].to_s /label<br /><br />
        end<br /><br />
      else<br /><br />
        @merchants.each do |m|<br /><br />
          li INPUT type="checkbox" name="merchants[&lt;=m&gt;][]"/&gt; &lt;=m.to_s /label<br /><br />
        end<br /><br />
      end<br /><br />
    /ul<br /><br />
    f.submit button_name<br /><br />
  end<a href="http://www.digbox.net/index.php/RoR/tableless-models-and-a-checkbox-collecti">Original post</a> blogged on <a href="http://codeboxer.com">codeboxer.com</a>.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">DEC</span> <span class="day">04</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/12/the-old-insert-select-syntax-example">The old INSERT SELECT syntax example</a></h2>
			        <p class="teaser_info"><p>A good example of SQL&#039;s favorite timesaver.</p><br />
<br />
<br />
<p>INSERT INTO `evo_bloggroups`<br /><br />
SELECT &#039;4&#039;,<br /><br />
bloggroup_group_ID,<br /><br />
bloggroup_ismember,<br /><br />
bloggroup_perm_poststatuses,<br /><br />
bloggroup_perm_edit,<br /><br />
bloggroup_perm_delpost,<br /><br />
bloggroup_perm_comments,<br /><br />
bloggroup_perm_cats,<br /><br />
bloggroup_perm_properties,<br /><br />
bloggroup_perm_admin,<br /><br />
bloggroup_perm_media_upload,<br /><br />
bloggroup_perm_media_browse,<br /><br />
bloggroup_perm_media_change<br /><br />
FROM `evo_bloggroups`<br /><br />
WHERE bloggroup_blog_ID = 1<br /><br />
<a href="http://www.digbox.net/index.php/SQL/the-old-insert-select">Original post</a> blogged on <a href="http://codeboxer.com">codeboxer.com</a>.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">DEC</span> <span class="day">04</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/12/ruby-find_by_sql-and-a-select-statement">Ruby find_by_sql and a select statement</a></h2>
			        <p class="teaser_info"><p>This is how I still do things. I don&#039;t think it&#039;s terribly old-fashioned. Databases are still faster than web servers, aren&#039;t they?</p><br />
<br />
<br />
<p>  Summary.find_by_sql(["<br /><br />
    (select &#039;GMG&#039; name, 0 id, 1 orderby<br /><br />
       from partners where 1=1)<br /><br />
      union<br /><br />
    (select display_val name, p.id, 2 orderby<br /><br />
       from partners p where active = 1)<br /><br />
   order by orderby, name, id"<br /><br />
          ])</p><br />
<br />
<br />
<p><a href="http://www.digbox.net/index.php/SQL/ruby-find_by_sql-and-a-select-statement">Original post</a> blogged on <a href="http://codeboxer.com">codeboxer.com</a>.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">DEC</span> <span class="day">04</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/12/polymorphic-user-list-class">polymorphic user list class</a></h2>
			        <p class="teaser_info"><p>I wrote this for a job interview that never panned out. Tune in next week for the matching User class (linked <a href="http://blog.kristeraxel.com/2008/12/polymorphic-user-list-class-part-ii/">here</a>).<br /><br />
Question: why do interviewers often admit to not being very technical, yet continue on to ask complicated questions and become bewildered as a consequence? </p><br />
<br />
<br />
<p>And furthermore, how good is the guy they hire if no one knows how to talk to him? Ah well, it is almost Christmas.</p><br />
<br />
<br />
<br />
<br />
<script src="https://gist.github.com/860941.js?file=polymorphic_user_list.rb"></script><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">DEC</span> <span class="day">03</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/12/joyent-is-the-worst">JOYENT IS THE WORST</a></h2>
			        <p class="teaser_info"><p>CONTRARY TO ANYTHING I HAVE SAID PREVIOUSLY, Joyent offers some of the worst customer service around. JOYENT has no idea what is going on. They don&#039;t even read the support tickets, their documentation is old and useless. They are a dinosaur.<br /><br />
I imagine their clients are all catching on right now and starting to jump off of that sinking ship. I pulled my last account off of this horrible Rails hosting service this year, I will NEVER go back.</p><br />
<br />
<br />
<p>I hate bad service. Bad value, too.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">DEC</span> <span class="day">03</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/12/dreamhost-worst-host-evar">DREAMHOST Worst host evar</a></h2>
			        <p class="teaser_info"><p>Dreamhost is also pretty crappy, if you need Ruby on Rails support. Why does everyone advertise RoR and then not support it?</p><br />
<br />
<br />
<p>It looks like a decent Hostmonster style host, with a snazzy interface, but at the end of it here were the problems:</p><br />
<br />
<br />
<p>Terrible SVN support; let me say that again - SVN kind of sucks already, but I ended up with a bunch of 500 errors, and I don&#039;t need anyone to help SVN suck more than it already does.</p><br />
<br />
<br />
<p>SOME good wiki stuff, but it was out of date, was NOT supported (see above), so I got frustratingly 80% close to a real capistrano deploy and then could not finish because were server compatibility issues (an old Ruby version) and without direct shell access I was fecocked. Then my SVN got corrupted. Fun!</p><br />
<br />
<br />
<p>With Dreamhost, if you aren&#039;t paying for a hosting service, you can&#039;t even manage your domain forwarding.</p><br />
<br />
<br />
<p>So I am still on the lookout for a good Ruby host and I am not any closer.</p><br />
<br />
<br />
<p>As a recap - DREAMHOST is the worst Ruby on Rails hosting service EVER! They are, of course, right there next to Joyent, who also has a large home in Crapistan.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">NOV</span> <span class="day">18</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/11/asynchronous-javascript-ftw">asynchronous javascript FTW</a></h2>
			        <p class="teaser_info"><p>link_to_remote(name, options = {}, html_options = {})</p><br />
<br />
<br />
<p>Returns a link to a remote action defined by options[:url] (using the url_for format) that&#039;s called in the background using XMLHttpRequest. The result of that request can then be inserted into a DOM object whose id can be specified with options[:update]. Usually, the result would be a partial prepared by the controller with either render_partial or render_partial_collection.</p><br />
<br />
<br />
<p>Examples:</p><br />
<br />
<br />
<p>link_to_remote "Delete this post", :update =&gt; "posts", :url =&gt; { :action =&gt; "destroy", :id =&gt; post.id }<br /><br />
link_to_remote(image_tag("refresh"), :update =&gt; "emails", :url =&gt; { :action =&gt; "list_emails" })<br /><br />
You can also specify a hash for options[:update] to allow for easy redirection of output to an other DOM element if a server-side error occurs:</p><br />
<br />
<br />
<p>Example:</p><br />
<br />
<br />
<p>  link_to_remote "Delete this post",<br /><br />
     :url =&gt; { :action =&gt; "destroy", :id =&gt; post.id },<br /><br />
     :update =&gt; { :success =&gt; "posts", :failure =&gt; "error" }</p><br />
<br />
<br />
<p>Optionally, you can use the options[: position] parameter to influence how the target DOM element is updated. It must be one of :before, :top, :bottom, or :after.</p><br />
<br />
<br />
<p>By default, these remote requests are processed asynchronously during which various JavaScript callbacks can be triggered (for progress indicators and the likes). All callbacks get access to the request object, which holds the underlying XMLHttpRequest.</p><br />
<br />
<br />
<p>To access the server response, use request.responseText, to find out the HTTP status, use request.status.</p><br />
<br />
<br />
<p>Example:<br /><br />
  link_to_remote word,<br /><br />
      :url =&gt; { :action =&gt; "undo", :n =&gt; word_counter },<br /><br />
      :complete =&gt; "undoRequestCompleted(request)"</p><br />
<br />
<br />
<p>The callbacks that may be specified are (in order):<br /><br />
:loading:   Called when the remote document is being loaded with data by the browser.<br /><br />
:loaded:    Called when the browser has finished loading the remote document.<br /><br />
:interactive:   Called when the user can interact with the remote document, even though it has not finished loading.<br /><br />
:success:   Called when the XMLHttpRequest is completed, and the HTTP status code is in the 2XX range.<br /><br />
:failure:   Called when the XMLHttpRequest is completed, and the HTTP status code is not in the 2XX range.<br /><br />
:complete:  Called when the XMLHttpRequest is complete (fires after success/failure if they are present).</p><br />
<br />
<br />
<p>You can further refine :success and :failure by adding additional callbacks for specific status codes:</p><br />
<br />
<br />
<p>Example:</p><br />
<br />
<br />
<p>  link_to_remote word,<br /><br />
      :url =&gt; { :action =&gt; "action" },<br /><br />
      404 =&gt; "alert(&#039;Not found...? Wrong URL...?&#039;)",<br /><br />
      :failure =&gt; "alert(&#039;HTTP Error &#039; + request.status + &#039;!&#039;)"</p><br />
<br />
<br />
<p>A status code callback overrides the success/failure handlers if present.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">NOV</span> <span class="day">15</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/11/lighthouse-api-integration-in-10-minutes-or-less">Lighthouse API integration in 10 minutes or less</a></h2>
			        <p class="teaser_info"><p>As a second part in this series, I am going to talk about Lighthouse for a second. They rock. I built up a calendar app based on their API and the Ruby  <a href="http://digbox.net/index.php/2008/11/15/ruby_calendar_helper_for_dummies">calendar_helper</a>, and it barely took me a day. True story. I ended up using an API token, and I learned a lot about a lib/ based connection object, very interesting.</p><br />
<br />
<br />
<p>Here are a few caveats:<br /><br />
Don&#039;t mess with the root class too much. It was not really necessary for most of what I had to do. This is actually one of the cases where it makes sense to load the logic into the controller (a little bit). Plus there isn&#039;t much more meat on the bone, so to speak, the root class covers 100% of a ludicrously simple back-end.<br /><br />
All Lighthouse database objects are not created equal. Tickets are king, and everything else is nothing. I will explain more later - just don&#039;t try to get picky with your call for Milestones. All I have ever been able to do is return a simple dump.</p><br />
<br />
<br />
<p>Installation: all I had to do was click through to the <a href="http://github.com/Caged/lighthouse-api/tree/master">GIT repository</a>. From there click lib/, and then lighthouse.rb. Cut and paste the code you see into a lighthouse.rb file in your lib/ folder. Everything you need is right there.</p><br />
<br />
<br />
<p>code snippet from my controller action:</p><br />
<br />
<br />
<p>    if @project<br /><br />
      #calculate i differential<br /><br />
      month_now = Time.now.month<br /><br />
      year_now = Time.now.year<br /><br />
      i = ((@year - year_now)*12)+ (@month - month_now).abs<br /><br />
      if i == 1<br /><br />
        @tickets = @project.tickets(:q =&gt; "created:&#039;before #{Time.now.day} day#{Time.now.day&gt;1 ? &#039;s&#039; : &#039;&#039;} ago&#039;")<br /><br />
      elsif i &gt; 1<br /><br />
        @tickets = @project.tickets(:q =&gt; "created:&#039;before #{i-1} months ago&#039;")<br /><br />
      else<br /><br />
        @tickets = @project.tickets(:q =&gt; "created:&#039;since 1 month ago&#039;")<br /><br />
      end<br /><br />
      @milestones = @project.milestones(:q =&gt; "due_on:&#039;#{@month}/#{@year}&#039;")<br /><br />
    else<br /><br />
      false<br /><br />
    end</p><br />
<br />
<br />
<p>Thankfully, you can get picky with your call for Tickets. That is where the meat of the API is. The text based date searching is pretty cool, because you get a hard limit of 30 rows returned from your query, so you need to be granular enough to catch only what you want.</p><br />
<br />
<br />
<p>This is a remote controller action that I use to get info about a particular ticket:</p><br />
<br />
<br />
<p>  def ticket_body<br /><br />
    ticket_id = params[:id]<br /><br />
    @project = Lighthouse::Project.find(:first)<br /><br />
    ticket = Lighthouse::Ticket.find ticket_id, :params =&gt; {:project_id =&gt; @project.id}<br /><br />
    out_string = ""<br /><br />
    #counter = 0<br /><br />
    ticket.versions.each do |version|<br /><br />
      this_body = version.body_html<br /><br />
      out_string &lt;&lt; "on #{(version.created_at - (60 * 60 * 8)).strftime("%m/%d at %I:%M%p")} #{get_owner_name(version.user_id)} said: #{this_body ? this_body : "status change"}"<br /><br />
    end<br /><br />
    render :text =&gt; out_string<br /><br />
  end</p><br />
<br />
<br />
<p>Notice the 8 hour time differential from UTC code, and that you have to iterate through the ticket.versions to pull out the notes (thanks to Lighthouse help staff for that one).</p><br />
<br />
<br />
<p>And then, of course, I have this at the top of my controller:</p><br />
<br />
<br />
<p>  def initialize<br /><br />
    Lighthouse.account = &#039;xxx&#039;<br /><br />
    Lighthouse.token = &#039;1111919192384584XXXXXXXXXXX&#039;<br /><br />
    @project = Lighthouse::Project.find(:first)<br /><br />
  end</p><br />
<br />
<br />
<p>like I said before, somehow the @project.milestones method won&#039;t take a :q argument, so you&#039;re stuck with just a simple &#039;select *&#039; query for your @milestones recordset. Maybe they will change this soon.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">OCT</span> <span class="day">29</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/10/ruby-export-to-excel-walkthrough">Ruby export to excel walkthrough</a></h2>
			        <p class="teaser_info"><p>Just write the headers, pull up the xml by report_id, and slurp it out. Piece of cake.</p><br />
<br />
<br />
<p>    def export<br /><br />
      headers[&#039;Content-Type&#039;] = "application/vnd.ms-excel"<br /><br />
      headers[&#039;Content-Disposition&#039;] = "attachment; filename=&#039;report.xls&#039;"<br /><br />
      headers[&#039;Cache-Control&#039;] = &#039;&#039;<br /><br />
      s = UserReport.find(params[:report_id])<br /><br />
      col2 = s.col2<br /><br />
      @records = XmlSimple.xml_in(s.xml_val)<br /><br />
      movedir = "public/delivery/"<br /><br />
      x_axis = "Timeline"<br /><br />
      y_axis = @records["yAxisName"] ? @records["yAxisName"] : "$$$"<br /><br />
      f_name = s.file_name<br /><br />
      File.open(f_name, &#039;w&#039;) do |f|<br /><br />
        if current_user.is_test?<br /><br />
          f.puts "Test Data"<br /><br />
        else<br /><br />
          f.puts "#{s.caption}"<br /><br />
        end<br /><br />
        f.puts "#{s.date_range}"<br /><br />
        if s.sub_caption then f.puts "#{s.sub_caption}" end<br /><br />
        f.puts "#{s.col1}#{s.col2}"<br /><br />
        @records["set"].each do |x|<br /><br />
          f.puts "#{clean_col(x["label"])}#{parse_report_value(x["value"], col2)}"<br /><br />
        end<br /><br />
        f.puts "#{s.filter_info}"<br /><br />
        f.puts ""<br /><br />
        f.puts ""<br /><br />
      end<br /><br />
      small_export ="delivery/#{f_name}"<br /><br />
      export_link = "#{movedir}/#{f_name}"<br /><br />
      FileUtils.mkpath(movedir)<br /><br />
      FileUtils.mv f_name, export_link<br /><br />
      small_export<br /><br />
    end</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JUL</span> <span class="day">29</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/07/rails-playground-a-short-review">Rails Playground a short review</a></h2>
			        <p class="teaser_info"><p>This will be quick. I just had to put in a few words about Rails Playground.</p><br />
<br />
<br />
<p>A little background: I have been hosting my sites with Joyent up until now, and this last week I was just having some serious mongrel problems, and it started not being fun. I started looking for alternatives, and I found Rails Playground (RP) and it has a pretty cool angle.</p><br />
<br />
<br />
<p>Joyent is ok, but their whole thing is that they are empowering you to do everything yourself. They are just giving you a sandbox, basically, which is great unless you start having problems that you don&#039;t know how to fix yourself. Then you have to wait for their relatively slow customer service.</p><br />
<br />
<br />
<p>RP, on the other hand, will give you unlimited, much faster service for comparable rates and they will set a lot of it up for you. I gave them my svn info, paid the bill, and they set me up with capistrano, added the capistano files to my svn account, set up the proxy, and configured mod_rails to run with passenger.<br /><br />
Done!</p><br />
<br />
<br />
<p>I have never had a deployment go so easily.</p><br />
<br />
<br />
<p>Anyway that&#039;s my 2 cents.</p><br />
<br />
<br />
<p><a href="http://railsplayground.com">link to their site</a></p><br />
<br />
<br />
<p>Disclosure: I am not benefiting from this review at all. I asked them for a deal and they turned me down!</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAY</span> <span class="day">15</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/05/mysql-5-0-table-record-count-by-month-pivot-query">MySQL 5.0 Table Record Count By Month Pivot Query</a></h2>
			        <p class="teaser_info"><p>So there I was, hanging out at work on my birthday. I had a little time, so I decided to answer some Ruby forum questions (<a href="http://railsforum.com/" title="http://railsforum.com/">http://railsforum.com/</a>). I went through a few on them, and ended up writing a pivot query for someone, out of nostalgia for my last job where I did a lot more straight SQL programming - not like I miss it too much, but it felt good. Anyway, only once I was done did it occur to me that I could use this same query for a lot of things. It&#039;s a very multi-purpose pivot query - it pivots record counts on a single table by month, so one really fast query returns all of the record counts by month of whatever table you are curious about. The original guy on the forum needed it to turn menu buttons on and off according to whether there were records in the table for a given month (as in blog records).<br /><br />
I recommend setting it up as a parameterized view with a single year parameter, because it won&#039;t distinguish by year otherwise. Map your parameter to where it says &#039;2008&#039; and you will be home free.</p><br />
<br />
<br />
<p>Instructions:<br /><br />
1 - replace YOURTABLE with your table name.<br /><br />
2 - replace all instances of &#039;created_at&#039; with a different (date) field name only if you want to use a different field to aggregate by. It will work fine as is with &#039;created_at&#039; because most Ruby tables have this field by default.<br /><br />
</p><br />
<br />
<br />
<br />
<br />
<script src="https://gist.github.com/860968.js?file=by_month_pivot.sql"></script><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">APR</span> <span class="day">03</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/04/a-little-periodic-love">a little periodic love</a></h2>
			        <p class="teaser_info"><p>Although I didn&#039;t actually end up using it, this little snippet did work like a charm.</p><br />
<br />
<br />
<p>&lt;%= periodically_call_remote(:update =&gt; "preview",:frequency =&gt; 3, :url =&gt; {:controller =&gt; &#039;resource&#039;, :action =&gt; &#039;highlights&#039;, :id =&gt; @facebook_id }) %&gt;</p><br />
<br />
<br />
<p>Just put it in a view somewhere, and it will call your remote function and update whatever you want at a given interval.</p><br />
<br />
<br />
<p>Sweet.<a href="http://www.digbox.net/index.php/RoR/a-little-periodic-love">Original post</a> blogged on <a href="http://codeboxer.com">codeboxer.com</a>.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAR</span> <span class="day">27</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/03/ruby-snippet-for-a-collect-call-instead-of-each">Ruby snippet for a .collect call instead of .each</a></h2>
			        <p class="teaser_info"><p>This works great. This is the best replacement for a &#039;For&#039; loop or one of those .each calls. This dumps out a &#039;br&#039; separated list of links for all the sub-industries in each category. I set up the model call to return a recordset, tie it to @tv_sub in the controller, and this is all it takes to get those links set up in the view:</p><br />
<br />
<br />
<p>&lt;% if @tv_sub -%&gt;<br /><br />
  &lt;%= @tv_sub.collect{|si|<br /><br />
      link_to (si.name, url_for(:action =&gt; &#039;browse&#039;, :category =&gt; &#039;tv&#039;, :sub_industry=&gt;si.name))<br /><br />
                  }.join(&#039;&#039;)<br /><br />
          -%&gt;<br /><br />
&lt;% end -%&gt;</p><br />
<br />
<br />
<p>And this is the model call:</p><br />
<br />
<br />
<p>def self.find_sub_tv<br /><br />
  SubIndustry.find(:all, :order=&gt;&#039;name&#039;, :conditions =&gt; ["industry_id = ?", TV_ID])<br /><br />
end<br /><br />
<a href="http://www.digbox.net/index.php/RoR/ruby-snippet">Original post</a> blogged on <a href="http://codeboxer.com">codeboxer.com</a>.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAR</span> <span class="day">04</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/03/a-ruby-rake-task">A Ruby Rake Task</a></h2>
			        <p class="teaser_info"><p>namespace :db do<br /><br />
  desc "Loads a schema.rb file into the database and then loads the initial database fixtures."<br /><br />
  task :bootstrap =&gt; [&#039;db:schema:load&#039;, &#039;db:bootstrap:import&#039;]</p><br />
<br />
<br />
<p>  # bootstrap namespace based on Rick Olson&#039;s bootstrap rake task.<br /><br />
  namespace :bootstrap do<br /><br />
    desc "Load database fixtures (in db/fixtures//*.{yml,csv}) into the current environment&#039;s database.  Load specific folder using FOLDER=db/foo. Load specific fixtures using FIXTURES=x,y"<br /><br />
    task :import =&gt; :environment do<br /><br />
      require &#039;active_record/fixtures&#039;<br /><br />
      #require &#039;fastercsv&#039;</p><br />
<br />
<br />
<p>      import_folder = ENV[&#039;FOLDER&#039;] || "db/fixtures/#{RAILS_ENV}/"<br /><br />
      import_folder += &#039;/&#039; unless import_folder.slice(-1..-1).eql?(&#039;/&#039;)</p><br />
<br />
<br />
<p>      rake_start_time = Time.now<br /><br />
      file_count = 0<br /><br />
      ActiveRecord::Base.establish_connection(RAILS_ENV.to_sym)<br /><br />
      (ENV[&#039;FIXTURES&#039;] ? ENV[&#039;FIXTURES&#039;].split(/,/) : Dir.glob(File.join(RAILS_ROOT,import_folder, &#039;*.{yml,csv}&#039;))).each do |fixture_file|<br /><br />
        table_start_time = Time.now<br /><br />
        puts "Loading #{fixture_file}"<br /><br />
        Fixtures.create_fixtures(import_folder, File.basename(fixture_file, &#039;.*&#039;))<br /><br />
        table_end_time = Time.now<br /><br />
        puts "   -&gt; #{(table_end_time - table_start_time).to_s}s"<br /><br />
        file_count += 1<br /><br />
      end</p><br />
<br />
<br />
<p>      rake_end_time = Time.now<br /><br />
      puts "-- total files: #{file_count}"<br /><br />
      puts "   -&gt; #{(rake_end_time - rake_start_time).to_s}s"<br /><br />
    end<br /><br />
  end</p><br />
<br />
<br />
<p>  desc "Run cron tasks."<br /><br />
  task :scheduling =&gt; [&#039;db:scheduling:daily&#039;, &#039;db:scheduling:hourly&#039; ]</p><br />
<br />
<br />
<p>  namespace :scheduling do<br /><br />
    desc "Daily cron run."<br /><br />
    task :daily =&gt; :environment do<br /><br />
      for a in Actor.find(:all)<br /><br />
        #calc savings - if logged in over last 3 weeks<br /><br />
          puts a.name<br /><br />
          expires_on = (a.updated_at + 21)<br /><br />
        if expires_on &gt;=  Time.now.to_date<br /><br />
          message1 = a.calc_savings!<br /><br />
          if message1 == ""<br /><br />
            puts "No savings."<br /><br />
          else<br /><br />
            puts message1<br /><br />
            a.log &lt;&lt; message1<br /><br />
            a.save<br /><br />
          end<br /><br />
          u = User.find_by_id(a.user_id)<br /><br />
          s = State.find_by_user_id(u.id)<br /><br />
          s.reset_enthuse!<br /><br />
          s.save<br /><br />
        else<br /><br />
          puts "hasn&#039;t been around."<br /><br />
        end<br /><br />
      end<br /><br />
    end<br /><br />
    desc "Hourly cron run."<br /><br />
    task :hourly =&gt; :environment do<br /><br />
      #increment enthusiasm<br /><br />
      #pay wages if recently logged in - within last 1 hour<br /><br />
      for a in Actor.find(:all)<br /><br />
          puts a.name<br /><br />
          expires_on = (a.updated_at + 1.day)<br /><br />
        if DateTime.now &lt;= expires_on<br /><br />
          #other logic - last_pay_date + consecutive_work_hours<br /><br />
            if a.consecutive_work_hours &lt; 8<br /><br />
              #calc wages<br /><br />
              message2 = a.calc_wages!<br /><br />
              if message2 == ""<br /><br />
                puts "No wages."<br /><br />
              else<br /><br />
                puts message2<br /><br />
                a.log &lt;&lt; message2<br /><br />
                a.save<br /><br />
              end<br /><br />
            end<br /><br />
        else<br /><br />
          #look for shelter<br /><br />
          if a.has_box &gt; 0<br /><br />
            s = State.find_by_user_id(u.id)<br /><br />
            s.take_shelter!<br /><br />
            a.log &lt;&lt; "#{a.name} takes refuge in a shantie. "<br /><br />
          else<br /><br />
            puts "No shantie."<br /><br />
          end<br /><br />
          a.consecutive_work_hours = 0<br /><br />
          a.save<br /><br />
          puts "hasn&#039;t been around."<br /><br />
        end<br /><br />
      end<br /><br />
    end<br /><br />
  end<br /><br />
end</p><br />
<br />
<br />
<p><a href="http://www.digbox.net/index.php/RoR/a-ruby-rake-task">Original post</a> blogged on <a href="http://codeboxer.com">codeboxer.com</a>.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">MAR</span> <span class="day">01</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/03/a-ruby-controller">A Ruby controller</a></h2>
			        <p class="teaser_info"><p>class GameController &lt; ApplicationController<br /><br />
  scaffold :state<br /><br />
  before_filter :validate, :except =&gt; :create</p><br />
<br />
<br />
<p>  def validate<br /><br />
    @state = State.find_by_user_id(current_user.id)<br /><br />
    if @state == nil<br /><br />
      if logged_in?<br /><br />
        flash[:notice] = "Please set up your Rockstar."<br /><br />
        redirect_to(:controller =&gt; &#039;/actor&#039;, :action =&gt; &#039;create&#039;)<br /><br />
      else<br /><br />
        flash[:notice] = "Please Log In."<br /><br />
        redirect_to(:controller =&gt; &#039;home&#039;)<br /><br />
      end<br /><br />
    end<br /><br />
  end</p><br />
<br />
<br />
<p>  def create<br /><br />
    #find previous game<br /><br />
    @state = State.new<br /><br />
    @state.user_id = current_user.id<br /><br />
    @state.save<br /><br />
    redirect_to(:action =&gt; &#039;play&#039;)<br /><br />
  end</p><br />
<br />
<br />
<p>  def return<br /><br />
    session[:override] = "Welcome back."<br /><br />
    redirect_to(:action =&gt; &#039;play&#039;)<br /><br />
  end</p><br />
<br />
<br />
<p>  def list<br /><br />
    @state = State.find_by_user_id(current_user.id)<br /><br />
    if @state == nil<br /><br />
      redirect_to(:controller =&gt; &#039;/account&#039;, :action =&gt; &#039;index&#039;)<br /><br />
    end<br /><br />
    @state_pages, @states = paginate :states, :per_page =&gt; 10<br /><br />
    @thisguy=Actor.find_by_user_id(current_user)<br /><br />
    @location = Location.find(@state.location_id)<br /><br />
  end</p><br />
<br />
<br />
<p>  def move<br /><br />
      @state = State.find_by_user_id(current_user.id)<br /><br />
      @thisguy=Actor.find_by_user_id(current_user.id)<br /><br />
      if params[:id] then<br /><br />
        @state.change_location!(params[:id])<br /><br />
      end<br /><br />
      @state.save<br /><br />
      session[:option_name] = ""<br /><br />
      redirect_back_or_default(:action =&gt; &#039;play&#039;)<br /><br />
  end<br /><br />
  def jog<br /><br />
      @state = State.find_by_user_id(current_user.id)<br /><br />
      @thisguy=Actor.find_by_user_id(current_user.id)<br /><br />
      if @state.current_enthusiasm &gt;= 3 then<br /><br />
        @state.lose_enthuse!(3)<br /><br />
        @thisguy.exercise!<br /><br />
        @state.save<br /><br />
        @thisguy.save<br /><br />
      else<br /><br />
        flash[:notice] = "You are too tired to jog."<br /><br />
      end<br /><br />
      #round it by hand<br /><br />
      myfloat = (((@thisguy.looks * 1000).to_i).to_f)/1000<br /><br />
      render_text myfloat.to_s<br /><br />
  end<br /><br />
  def reset_enthusiasm<br /><br />
      @state = State.find_by_user_id(current_user.id)<br /><br />
      @thisguy=Actor.find_by_user_id(current_user.id)<br /><br />
      if @state.current_enthusiasm &lt; 100 then<br /><br />
        @state.reset_enthuse!<br /><br />
        @state.save<br /><br />
        @thisguy.lose_burger!<br /><br />
        @thisguy.save<br /><br />
        render_text @state.current_enthusiasm.to_s<br /><br />
      else<br /><br />
        render_text nil<br /><br />
      end<br /><br />
  end</p><br />
<br />
<br />
<p>  def refresh_enthuse<br /><br />
      @state = State.find_by_user_id(current_user.id)<br /><br />
      render_text @state.current_enthusiasm.to_s<br /><br />
  end</p><br />
<br />
<br />
<p>  def move_hood<br /><br />
      @state = State.find_by_user_id(current_user.id)<br /><br />
      @thisguy=Actor.find_by_user_id(current_user.id)<br /><br />
      if @state.current_enthusiasm &gt;= 10 then<br /><br />
        @state.lose_enthuse!(10)<br /><br />
        if params[:id] then<br /><br />
          @state.change_hood!(params[:id])<br /><br />
          flash[:notice]="You are tired from the journey."<br /><br />
        end<br /><br />
        session[:option_name] = ""<br /><br />
        @state.save<br /><br />
        @thisguy.save<br /><br />
      else<br /><br />
        flash[:notice]="You are too tired to make it to #{Hood.find(params[:id]).name}. Maybe you should eat a burger."<br /><br />
      end</p><br />
<br />
<br />
<p>      redirect_back_or_default(:controller =&gt; &#039;/game&#039;, :action =&gt; &#039;play&#039;)<br /><br />
  end</p><br />
<br />
<br />
<p>  def set_option<br /><br />
      @state = State.find_by_user_id(current_user.id)<br /><br />
      @state.set_option!(params[:id])<br /><br />
      @state.save<br /><br />
      session[:option_name] = Option.find(params[:id]).name<br /><br />
      #render_text Option.find(params[:id]).name<br /><br />
      render_text ""<br /><br />
  end</p><br />
<br />
<br />
<p>  def busk<br /><br />
      @state = State.find_by_user_id(current_user.id)<br /><br />
      @thisguy=Actor.find_by_user_id(current_user.id)<br /><br />
      if @state.current_enthusiasm &gt;= 3 then<br /><br />
        @state.lose_enthuse!(3)<br /><br />
        @thisguy.learn!<br /><br />
        @state.save<br /><br />
        @thisguy.save<br /><br />
      end<br /><br />
      #round it by hand<br /><br />
      myfloat = (((@thisguy.skill * 1000).to_i).to_f)/1000<br /><br />
      render_text myfloat.to_s<br /><br />
  end</p><br />
<br />
<br />
<p>  def flirt<br /><br />
      @state = State.find_by_user_id(current_user.id)<br /><br />
      @thisguy=Actor.find_by_user_id(current_user.id)<br /><br />
      if @state.current_enthusiasm &gt;= 3 then<br /><br />
        @state.lose_enthuse!(3)<br /><br />
        @thisguy.flirt!<br /><br />
        @state.save<br /><br />
        @thisguy.save<br /><br />
      end<br /><br />
      #round it by hand<br /><br />
      myfloat = (((@thisguy.charisma * 1000).to_i).to_f)/1000<br /><br />
      render_text myfloat.to_s<br /><br />
  end</p><br />
<br />
<br />
<p>  def pavement<br /><br />
      @state = State.find_by_user_id(current_user.id)<br /><br />
      @thisguy=Actor.find_by_user_id(current_user.id)<br /><br />
      if @state.current_enthusiasm &gt;= 5 then<br /><br />
        @state.lose_enthuse!(5)<br /><br />
        @thisguy.pavement!<br /><br />
        @state.save<br /><br />
        @thisguy.save<br /><br />
      end<br /><br />
      #round it by hand<br /><br />
      myfloat = (((@thisguy.savvy * 1000).to_i).to_f)/1000<br /><br />
      render_text myfloat.to_s<br /><br />
  end</p><br />
<br />
<br />
<p>  def play<br /><br />
    if not logged_in? then<br /><br />
      redirect_to(:controller =&gt; &#039;/session&#039;)<br /><br />
    end<br /><br />
    @thisguy=Actor.find_by_user_id(current_user.id)<br /><br />
    if not defined? @thisguy<br /><br />
      redirect_to(:controller =&gt; &#039;/actor&#039;, :action =&gt; &#039;create&#039;)<br /><br />
    end<br /><br />
    session[:option_name] = nil<br /><br />
    @state_pages, @states = paginate :states, :per_page =&gt; 10<br /><br />
    @state = State.find_by_user_id(current_user.id)<br /><br />
    @state.option_id = 999<br /><br />
    @location = Location.find(@state.location_id)<br /><br />
    @hood = Hood.find(@state.hood_id)<br /><br />
    @options = @location.options</p><br />
<br />
<br />
<p>  end</p><br />
<br />
<br />
<p>  def get_saved_name<br /><br />
    if session[:option_name] == nil then<br /><br />
      render_text ""<br /><br />
    else<br /><br />
      render_text session[:option_name]<br /><br />
    end<br /><br />
  end</p><br />
<br />
<br />
<p>  def get_nothing<br /><br />
    render_text " "<br /><br />
  end</p><br />
<br />
<br />
<p>  def optin<br /><br />
    @state = State.find_by_user_id(current_user.id)<br /><br />
    if @state.choose_option? then<br /><br />
      @state.process_option!<br /><br />
      flash[:notice] = @state.return_message<br /><br />
      redirect_back_or_default(:controller =&gt; &#039;/game&#039;, :action =&gt; &#039;play&#039;)<br /><br />
    else<br /><br />
      flash[:notice] = @state.return_message<br /><br />
      redirect_back_or_default(:controller =&gt; &#039;/game&#039;, :action =&gt; &#039;play&#039;)<br /><br />
    end<br /><br />
  end</p><br />
<br />
<br />
<p>  def option_name<br /><br />
    @state = State.find_by_user_id(current_user.id)<br /><br />
    @option = Option.find_by_id(params[:id])<br /><br />
    render_text @option.name<br /><br />
  end</p><br />
<br />
<br />
<p>end</p><br />
<br />
<br />
<p><a href="http://www.digbox.net/index.php/RoR/a-ruby-controller">Original post</a> blogged on <a href="http://codeboxer.com">codeboxer.com</a>.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">FEB</span> <span class="day">27</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/02/solr-shell-scripting-for-fun-and-profit">solr shell scripting for fun and profit</a></h2>
			        <p class="teaser_info"><p>We love Solr. Yes we do.</p><br />
<br />
<br />
<p>#!/bin/bash<br /><br />
#<br /><br />
# Shell script to clean up backups of a Solr Lucene collection.</p><br />
<br />
<br />
<p>orig_dir=$(pwd)<br /><br />
cd ${0%/*}/..<br /><br />
solr_root=$(pwd)<br /><br />
cd ${orig_dir}</p><br />
<br />
<br />
<p>unset days num data_dir user verbose debug<br /><br />
. ${solr_root}/bin/scripts-util</p><br />
<br />
<br />
<p># set up variables<br /><br />
prog=${0##*/}<br /><br />
log=${solr_root}/logs/${prog}.log</p><br />
<br />
<br />
<p># define usage string<br /><br />
USAGE="\<br /><br />
usage: $prog -D  | -N  [-d dir] [-u username] [-v]<br /><br />
       -D    cleanup backups more than  days old<br /><br />
       -N     keep the most recent  number of backups and<br /><br />
                   cleanup up the remaining ones that are not being pulled<br /><br />
       -d          specify directory holding index data<br /><br />
       -u          specify user to sudo to before running script<br /><br />
       -v          increase verbosity<br /><br />
       -V          output debugging info<br /><br />
"</p><br />
<br />
<br />
<p># parse args<br /><br />
while getopts D:N:d:u:vV OPTION<br /><br />
do<br /><br />
    case $OPTION in<br /><br />
    D)<br /><br />
        days="$OPTARG"<br /><br />
        ;;<br /><br />
    N)<br /><br />
        num="$OPTARG"<br /><br />
        ;;<br /><br />
    d)<br /><br />
        data_dir="$OPTARG"<br /><br />
        ;;<br /><br />
    u)<br /><br />
        user="$OPTARG"<br /><br />
        ;;<br /><br />
    v)<br /><br />
        verbose="v"<br /><br />
        ;;<br /><br />
    V)<br /><br />
        debug="V"<br /><br />
        ;;<br /><br />
    *)<br /><br />
        echo "$USAGE"<br /><br />
        exit 1<br /><br />
    esac<br /><br />
done</p><br />
<br />
<br />
<p>[[ -n $debug ]] &amp;&amp; set -x</p><br />
<br />
<br />
<p>if [[ -z ${days} &amp;&amp; -z ${num} ]]<br /><br />
then<br /><br />
    echo "$USAGE"<br /><br />
    exit 1<br /><br />
fi</p><br />
<br />
<br />
<p>fixUser "$@"</p><br />
<br />
<br />
<p># use default value for data_dir if not specified<br /><br />
# relative path starts at ${solr_root}<br /><br />
if [[ -z ${data_dir} ]]<br /><br />
then<br /><br />
    data_dir=${solr_root}/data<br /><br />
elif [[ "`echo ${data_dir}|cut -c1`" != "/" ]]<br /><br />
then<br /><br />
    data_dir=${solr_root}/${data_dir}<br /><br />
fi</p><br />
<br />
<br />
<p>function remove<br /><br />
{<br /><br />
    logMessage removing backup $1<br /><br />
    /bin/rm -rf $1<br /><br />
}</p><br />
<br />
<br />
<p>start=`date +"%s"`</p><br />
<br />
<br />
<p>logMessage started by $oldwhoami<br /><br />
logMessage command: $0 $@</p><br />
<br />
<br />
<p># trap control-c<br /><br />
trap &#039;echo "caught INT/TERM, exiting now but partial cleanup may have already occured";logExit aborted 13&#039; INT TERM</p><br />
<br />
<br />
<p>if [[ -n ${days} ]]<br /><br />
then<br /><br />
    #is maxdepth supported?<br /><br />
    find ${data_dir} -maxdepth 0 -name foobar &gt;/dev/null 2&gt;&amp;1<br /><br />
    if [ $? = 0 ]; then<br /><br />
      maxdepth="-maxdepth 1"<br /><br />
    else<br /><br />
      unset maxdepth<br /><br />
    fi</p><br />
<br />
<br />
<p>    logMessage cleaning up backups more than ${days} days old<br /><br />
    for i in `find ${data_dir} ${maxdepth} -name &#039;backup.*&#039; -mtime +${days} -print`<br /><br />
    do<br /><br />
        remove $i<br /><br />
    done<br /><br />
elif [[ -n ${num} ]]<br /><br />
then<br /><br />
    logMessage cleaning up all backups except for the most recent ${num} ones<br /><br />
    unset backups count<br /><br />
    backups=`ls -cd ${data_dir}/backup.* 2&gt;/dev/null`<br /><br />
    if [[ $? == 0 ]]<br /><br />
    then<br /><br />
        count=`echo $backups|wc -w`<br /><br />
        startpos=`expr $num + 1`<br /><br />
        if [[ $count -gt $num ]]<br /><br />
        then<br /><br />
            for i in `echo $backups|cut -f${startpos}- -d" "`<br /><br />
            do<br /><br />
            remove $i<br /><br />
        done<br /><br />
        fi<br /><br />
    fi<br /><br />
fi</p><br />
<br />
<br />
<p>logExit ended 0</p><br />
<br />
<br />
<p><a href="http://www.digbox.net/index.php/RoR/solr-shell-scripting-for-fun-and-profit">Original post</a> blogged on <a href="http://codeboxer.com">codeboxer.com</a>.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">FEB</span> <span class="day">24</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/02/a-ruby-view-using-ajax">A Ruby View using AJAX</a></h2>
			        <p class="teaser_info"><p>There is a lot going on here, perhaps too much, but this serves as a nice example.</p><br />
<br />
<br />
<p>&lt;% i=0 %&gt;</p><br />
<br />
<br />
<p>&lt;% for l in @hood.locations %&gt;</p><br />
<br />
<br />
<p>     &lt;% i=i+1 %&gt;<br /><br />
        &lt;% if l == @location then %&gt;<br /><br />
          &lt;% lmain = l.name %&gt;<br /><br />
          &lt;%= image_tag("http://www.noonchild.com/art/rockstaralley2_41.png") %&gt;<br /><br />
        &lt;% else %&gt;<br /><br />
          &lt;%= link_to image_tag("#{l.graflink}", :border=&gt;0, :title =&gt; l.name), :action =&gt; &#039;move&#039;, :id =&gt; l %&gt;<br /><br />
        &lt;% end %&gt;<br /><br />
&lt;% end %&gt;&lt;%= lmain %&gt;</p><br />
<br />
<br />
<p>&lt;% for o in @options -%&gt;<br /><br />
    &lt;%= link_to_remote( image_tag("#{o.graflink}", :border =&gt; 0, :title =&gt; o.description), {<br /><br />
        :update =&gt; "current_message",<br /><br />
        :url =&gt;{ :action =&gt; o.link, :controller =&gt; o.controller },<br /><br />
        :complete =&gt; {"document.getElementById(&#039;message_answer&#039;).style.display = &#039;block&#039;; document.getElementById(&#039;current_message&#039;).style.display = &#039;block&#039;;Element.update(&#039;option_message&#039;,&#039;#{o.name}&#039;);",<br /><br />
        remote_function(:update =&gt; &#039;x&#039;,<br /><br />
                 :url =&gt; { :action =&gt; :set_option, :id =&gt; o })}<br /><br />
                 },{<br /><br />
        :onmouseover =&gt; {"Element.update(&#039;option_preview&#039;,&#039;#{o.name}&#039;);<br /><br />
                    document.getElementById(&#039;option_message&#039;).style.display = &#039;none&#039;; ",<br /><br />
                    visual_effect(:fade,"flashmessage", :duration =&gt; 2.5 )},<br /><br />
        :onmouseout =&gt; "Element.update(&#039;option_preview&#039;,&#039;&#039;);document.getElementById(&#039;option_message&#039;).style.display = &#039;block&#039;;"      }<br /><br />
        ) -%&gt;<br /><br />
&lt;% end -%&gt;</p><br />
<br />
<br />
<p>&lt;% start_form_tag :action =&gt; &#039;optin&#039; do |f| -%&gt;<br /><br />
&lt;%= submit_tag &#039;Say yes.&#039;, :onclick =&gt; "document.getElementById(&#039;ajaxsubmit&#039;).style.display = &#039;inline&#039;;"  %&gt;<br /><br />
    &lt;% end_form_tag %&gt;&lt;%= image_tag("http://digbox.net/art/ajax-loader.gif", :border=&gt;0) %&gt;<br /><br />
&lt;% end -%&gt;<br /><br />
&lt;%= image_tag("http://digbox.net/art/ajax-loader.gif", :border=&gt;0) %&gt;</p><br />
<br />
<br />
<p><em>Places to go, things to do</em></p><br />
<br />
<br />
<p>    &lt;% for h in Hood.find(:all) %&gt;<br /><br />
      &lt;% if h != @hood then %&gt;<br /><br />
        &lt;%= link_to image_tag("#{h.graflink}", :border=&gt;0), {:action =&gt; &#039;move_hood&#039;, :id =&gt; h}, :onclick =&gt; visual_effect(:Fade,"enthusiasm") %&gt;</p><br />
<br />
<br />
<p>        &lt;%= h.name %&gt;<br /><br />
      &lt;% end %&gt;<br /><br />
    &lt;% end %&gt;</p><br />
<br />
<br />
<p>     &lt;%= render :partial =&gt; &#039;form&#039; %&gt;</p><br />
<br />
<br />
<p><a href="http://www.digbox.net/index.php/RoR/a-ruby-view-using-ajax">Original post</a> blogged on <a href="http://codeboxer.com">codeboxer.com</a>.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">FEB</span> <span class="day">07</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/02/another-ruby-model">Another Ruby model</a></h2>
			        <p class="teaser_info"><p>class State &lt; ActiveRecord::Base<br /><br />
  has_one :location<br /><br />
  has_one :user<br /><br />
  has_one :hood<br /><br />
  has_one :option</p><br />
<br />
<br />
<p>  attr_reader :return_message<br /><br />
  PRICE_OF_UNIFORM = 22<br /><br />
  BURGER_LIMIT = 5</p><br />
<br />
<br />
<p>  def isactive?<br /><br />
    (self.current_enthusiasm &gt; 0)<br /><br />
  end</p><br />
<br />
<br />
<p>  def lose_enthuse!(factor = 1)<br /><br />
    self.current_enthusiasm -= (1 * factor)<br /><br />
    self.name = "You are visiting"<br /><br />
  end</p><br />
<br />
<br />
<p>  def change_location!(location)<br /><br />
    self.location_id = location<br /><br />
  end</p><br />
<br />
<br />
<p>  def reset_enthuse!<br /><br />
    self.current_enthusiasm = 100<br /><br />
  end</p><br />
<br />
<br />
<p>  def change_hood!(hood)<br /><br />
    self.hood_id = hood<br /><br />
    self.location_id = 1<br /><br />
    self.name = "Please choose somewhere to visit:"<br /><br />
  end</p><br />
<br />
<br />
<p>  def set_option!(id)<br /><br />
    self.option_id = id<br /><br />
  end</p><br />
<br />
<br />
<p>  def choose_option?<br /><br />
    s=""<br /><br />
    @option = Option.find_by_id(self.option_id)<br /><br />
    @thisguy=Actor.find_by_user_id(self.user_id)<br /><br />
    if @thisguy.cash &lt; @option.cash_price then<br /><br />
      s= s &lt;&lt; "You need at least $#{@option.cash_price}. "<br /><br />
    end<br /><br />
    if self.current_enthusiasm &lt; @option.enthuse_price then<br /><br />
      s= s &lt;&lt; "You need at least #{@option.enthuse_price} enthusiasm points. "<br /><br />
    end<br /><br />
    if (@thisguy.has_uniform &lt; @option.uniform_needed) and (@option.give_uniform &lt; 1) then<br /><br />
      s= s &lt;&lt; "You need a uniform for this and you can&#039;t get one here. "<br /><br />
    end<br /><br />
    if (@thisguy.has_uniform &lt; @option.uniform_needed) and (@option.give_uniform == 1) and (@thisguy.cash &lt; PRICE_OF_UNIFORM) then<br /><br />
      s= s &lt;&lt; "You need a uniform for this and you can&#039;t afford one - you are short $#{PRICE_OF_UNIFORM - @thisguy.cash}. "<br /><br />
    end<br /><br />
    if (@thisguy.has_job &gt;= @option.give_job) and (@option.give_job &gt; 0) then<br /><br />
      s= s &lt;&lt; "You already have a job. "<br /><br />
    end<br /><br />
    if @thisguy.charisma &lt; @option.charisma_needed then<br /><br />
      s= s &lt;&lt; "You need at least #{@option.charisma_needed} charisma points. "<br /><br />
    end<br /><br />
    if @thisguy.skill &lt; @option.skill_needed then<br /><br />
      s= s &lt;&lt; "You need at least #{@option.skill_needed} skill points. "<br /><br />
    end<br /><br />
    if @thisguy.savvy &lt; @option.savvy_needed then<br /><br />
      s= s &lt;&lt; "You need at least #{@option.savvy_needed} savvy points. "<br /><br />
    end<br /><br />
    if @thisguy.looks &lt; @option.looks_needed then<br /><br />
      s= s &lt;&lt; "You need at least #{@option.looks_needed} looks points. "<br /><br />
    end<br /><br />
    if @option.take_point &gt; 0 and ( @thisguy.savvy &lt; 1 and @thisguy.charisma &lt; 1 and @thisguy.skill &lt; 1 and @thisguy.looks &lt; 1 )<br /><br />
      s= s &lt;&lt; "You have no points left to sell, you masochist. "<br /><br />
    end<br /><br />
    if @thisguy.fans &lt; @option.fans_needed then<br /><br />
      s= s &lt;&lt; "You need at least #{@option.fans_needed} fans. "<br /><br />
    end<br /><br />
    if @option.give_charity_bar &gt; 0 and @thisguy.charity_bar &gt; 1<br /><br />
      s= s &lt;&lt; "You already have #{@thisguy.charity_bar==1 ? "1 box" : "2 boxes"} of candy bars. "<br /><br />
    end<br /><br />
    if @option.charity_bar_price &gt; 0 and @thisguy.charity_bar &lt; 1<br /><br />
      s= s &lt;&lt; "You can&#039;t sell candy bars that you don&#039;t have. "<br /><br />
    end<br /><br />
    #BURGER CHECK<br /><br />
    if @option.give_burger == 2<br /><br />
      if (@thisguy.burgers + 2) &gt; BURGER_LIMIT<br /><br />
        s= s &lt;&lt; "You can&#039;t carry any more burgers. "<br /><br />
      end<br /><br />
    end</p><br />
<br />
<br />
<p>    if @thisguy.has_car &lt; @option.car_needed then<br /><br />
      if @thisguy.has_car &gt; 0 then<br /><br />
        nicer = " nicer"<br /><br />
      end<br /><br />
      s= s &lt;&lt; "You need a #{nicer} car. "<br /><br />
    end<br /><br />
    if (s.strip) == "" then<br /><br />
      true<br /><br />
    else<br /><br />
      r = rand(5)<br /><br />
      if r==1 then<br /><br />
        @return_message="Sorry #{@thisguy.name}, you can&#039;t #{@option.name.upcase} Apparently you are not good enough right now. #{s}"<br /><br />
      elsif r==2<br /><br />
        @return_message="Sorry #{@thisguy.name}, you can&#039;t #{@option.name.upcase} It&#039;s not working out for you. #{s}"<br /><br />
      elsif r==3<br /><br />
        @return_message="Sorry #{@thisguy.name}, you can&#039;t #{@option.name.upcase} Maybe next time. #{s}"<br /><br />
      elsif r==4<br /><br />
        @return_message="Sorry #{@thisguy.name}, you can&#039;t #{@option.name.upcase} What a shame. #{s}"<br /><br />
      else<br /><br />
        @return_message="Sorry #{@thisguy.name}, you can&#039;t #{@option.name.upcase} You are coming up a little short. #{s}"<br /><br />
      end<br /><br />
      false<br /><br />
    end<br /><br />
  end</p><br />
<br />
<br />
<p>  def process_option!<br /><br />
    @option = Option.find_by_id(self.option_id)<br /><br />
    @thisguy=Actor.find_by_user_id(self.user_id)<br /><br />
    @thisguy.cash -= @option.cash_price.to_i<br /><br />
    self.current_enthusiasm -= @option.enthuse_price.to_i<br /><br />
    @thisguy.cash+=@option.cash_payout<br /><br />
    self.current_enthusiasm = (self.current_enthusiasm + @option.enthuse_payout)&gt;100 ? 100 : self.current_enthusiasm + @option.enthuse_payout<br /><br />
    @thisguy.charisma = @thisguy.charisma + (@thisguy.charisma*(@option.charisma_quotient*0.001))<br /><br />
    @thisguy.skill = @thisguy.skill + (@thisguy.skill*(@option.skill_quotient*0.001))<br /><br />
    @thisguy.savvy = @thisguy.savvy + (@thisguy.savvy*(@option.savvy_quotient*0.001))<br /><br />
    @thisguy.looks = @thisguy.looks + (@thisguy.looks*(@option.looks_quotient*0.001))<br /><br />
    if @option.cash_price &gt; 0 then<br /><br />
      s="You spent $#{@option.cash_price}. "<br /><br />
    else<br /><br />
      s=""<br /><br />
    end<br /><br />
    if @option.cash_payout &gt; 0 then<br /><br />
      s= s &lt;&lt; "You made $#{@option.cash_payout}. "<br /><br />
    end<br /><br />
    if @option.enthuse_payout &gt; 0 then<br /><br />
      s= s &lt;&lt; "You feel better. "<br /><br />
    end<br /><br />
    if @option.charisma_quotient &gt; 0 then<br /><br />
      s= s &lt;&lt; "Your mojo is off the hook. "<br /><br />
    end<br /><br />
    if @option.skill_quotient &gt; 0 then<br /><br />
      s= s &lt;&lt; "Your skill went up a bit. "<br /><br />
    end<br /><br />
    if @option.savvy_quotient &gt; 0 then<br /><br />
      s= s &lt;&lt; "Your savvy has improved. "<br /><br />
    end<br /><br />
    if @option.looks_quotient &gt; 0 then<br /><br />
      s= s &lt;&lt; "You just got prettier. "<br /><br />
    end<br /><br />
    if @option.give_car &gt; 0 then<br /><br />
      @thisguy.has_car = @option.give_car<br /><br />
      s= s &lt;&lt; "You got wheels. "<br /><br />
    end<br /><br />
    if @option.give_pet &gt; 0 then<br /><br />
      @thisguy.has_pet = @option.give_pet<br /><br />
      s= s &lt;&lt; "Your new pet loves you. "<br /><br />
    end<br /><br />
    if (@option.give_uniform == 1) and (@thisguy.has_uniform &lt; 1) then<br /><br />
      @thisguy.cash -= PRICE_OF_UNIFORM<br /><br />
      @thisguy.has_uniform = 1<br /><br />
      s= s &lt;&lt; "You paid $#{PRICE_OF_UNIFORM} for your uniform. "<br /><br />
    end<br /><br />
    if @option.give_box &gt; 0 then<br /><br />
      @thisguy.has_box = @option.give_box<br /><br />
      s= s &lt;&lt; "You now have somewhere to live. "<br /><br />
    end<br /><br />
    if @option.give_job &gt; 0 then<br /><br />
      @thisguy.has_job = @option.give_job<br /><br />
      @thisguy.works_at = @option.location_id<br /><br />
      @thisguy.last_pay_date = Time.now<br /><br />
      s= s &lt;&lt; "You just got hired. "<br /><br />
    end<br /><br />
    if @option.take_point &gt; 0<br /><br />
      whichever = rand(4)<br /><br />
      if whichever == 1<br /><br />
        @thisguy.skill -= 1<br /><br />
        name = "skill"<br /><br />
      elsif whichever == 2<br /><br />
        @thisguy.charisma -= 1<br /><br />
        name = "charisma"<br /><br />
      elsif whichever == 3<br /><br />
        @thisguy.savvy -= 1<br /><br />
        name = "savvy"<br /><br />
      else<br /><br />
        @thisguy.looks -= 1<br /><br />
        name = "looks"<br /><br />
      end<br /><br />
      s= s &lt;&lt; "You lost a point of #{name}. "<br /><br />
    end<br /><br />
    if @option.give_point &gt; 0<br /><br />
      if @option.give_point == 1<br /><br />
        quant = "1 point"<br /><br />
      else<br /><br />
        quant = "#{@option.give_point} points"<br /><br />
      end<br /><br />
      @thisguy.points_to_give += @option.give_point<br /><br />
      s= s &lt;&lt; "You gained #{quant} to use however you wish. Just click on the the PDA icon by your burgers."<br /><br />
    end<br /><br />
    if @option.take_job &gt; 0<br /><br />
      s= s &lt;&lt; ((@thisguy.has_job&gt;0) ? "You lost your job. " : "You got arrested for no reason. ")<br /><br />
      @thisguy.has_job = 0<br /><br />
    end<br /><br />
    if @option.give_guitar &gt; 0 then<br /><br />
      @thisguy.has_guitar = @option.give_guitar<br /><br />
      s= s &lt;&lt; "You bought the guitar. "<br /><br />
    end<br /><br />
    if @option.charity_bar_price &gt; 0<br /><br />
      @thisguy.charity_bar -= 1<br /><br />
      s= s &lt;&lt; "You sold a box of candy bars. "<br /><br />
    end<br /><br />
    if @option.give_acct &gt; 0 then<br /><br />
      @thisguy.has_acct = @option.give_acct<br /><br />
      s= s &lt;&lt; "You will be earning #{@option.give_acct * $SAVINGS_QUOTIENT}% interest. "<br /><br />
    end<br /><br />
    if @option.give_burger &gt; 0 then<br /><br />
      if @option.give_burger == 1 then<br /><br />
        burger_count = " 1 burger "<br /><br />
      else<br /><br />
        burger_count = " #{@option.give_burger} burgers "<br /><br />
      end<br /><br />
      if (@option.give_burger == 1) and (@thisguy.burgers == BURGER_LIMIT)<br /><br />
        s= s &lt;&lt; "You took a burger with you but it fell out of your pocket. "<br /><br />
      else</p><br />
<br />
<br />
<p>        @thisguy.burgers += @option.give_burger<br /><br />
        s= s &lt;&lt; "You wrapped up#{burger_count} to put in your pocket. "<br /><br />
      end<br /><br />
    end<br /><br />
    if @option.random_money &gt; 0 then<br /><br />
      r = rand(100)<br /><br />
      if @option.random_money &gt; (r - (@option.random_money/2)) then<br /><br />
        x = (@option.random_money * (r/1.6) + @option.random_money + (r * @option.random_money))<br /><br />
        @thisguy.cash += x<br /><br />
        s= s &lt;&lt; "You got lucky for an extra $#{(x).to_i}. "<br /><br />
      end<br /><br />
    end<br /><br />
    if @option.random_pet &gt; 0 then<br /><br />
      r = rand(100)<br /><br />
      if (@option.random_pet &gt;= r) then<br /><br />
        @thisguy.has_pet += 1<br /><br />
        s= s &lt;&lt; "You seduced a stray puppie with your charm. "<br /><br />
      end<br /><br />
    end<br /><br />
    #straight given fan<br /><br />
    if @option.give_fan &gt; 0<br /><br />
      netgain = @option.give_fan<br /><br />
        if netgain &gt; 1 then<br /><br />
          s_suffix = "s"<br /><br />
        else<br /><br />
          s_suffix = ""<br /><br />
        end<br /><br />
        @thisguy.fans += netgain<br /><br />
        s= s &lt;&lt; "#{netgain} new fan#{s_suffix} came up to you after the show. "<br /><br />
    end<br /><br />
    #random fan<br /><br />
    if @option.random_fan &gt; 0<br /><br />
      netgain = 0<br /><br />
      r = rand(90)<br /><br />
      if @option.random_fan &gt;= r then<br /><br />
        random_factor = 0<br /><br />
        for i in <a href="http://www.digbox.netmailto:r..@option.random_fan">r..@option.random_fan</a><br /><br />
          random_factor = (random_factor + i)<br /><br />
        end<br /><br />
        netgain = random_factor<br /><br />
      end<br /><br />
      if netgain &gt; 0 then<br /><br />
        if netgain &gt; 1 then<br /><br />
          s_suffix = "s"<br /><br />
        else<br /><br />
          s_suffix = ""<br /><br />
        end<br /><br />
        @thisguy.fans += netgain<br /><br />
        s= s &lt;&lt; "#{netgain} new fan#{s_suffix} came to your website. "<br /><br />
      end<br /><br />
    end if<br /><br />
    if @option.give_charity_bar &gt; 0<br /><br />
      @thisguy.charity_bar += 1<br /><br />
    end<br /><br />
    @return_message = s<br /><br />
    @thisguy.save<br /><br />
    self.save<br /><br />
  end</p><br />
<br />
<br />
<p>  def return_message<br /><br />
    @return_message<br /><br />
  end</p><br />
<br />
<br />
<p>  def return_message=(val)<br /><br />
    @return_message = val<br /><br />
  end<br /><br />
  def take_shelter!<br /><br />
    x = self.current_enthusiasm += 50<br /><br />
    if x &gt; 100<br /><br />
      x = 100<br /><br />
    end<br /><br />
    self.current_enthusiasm = x<br /><br />
  end</p><br />
<br />
<br />
<p>end</p><br />
<br />
<br />
<p><a href="http://www.digbox.net/index.php/RoR/another-ruby-model">Original post</a> blogged on <a href="http://codeboxer.com">codeboxer.com</a>.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">FEB</span> <span class="day">05</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/02/a-simple-ruby-model">A simple Ruby model</a></h2>
			        <p class="teaser_info"><p>class Actor &lt; ActiveRecord::Base<br /><br />
  validates_presence_of :name<br /><br />
  validates_uniqueness_of :name<br /><br />
  validates_length_of :name, :maximum =&gt; 26, :message =&gt; "The name you have chosen is too long. You are allowed up to 26 characters."</p><br />
<br />
<br />
<p>  belongs_to :user<br /><br />
  REGULAR_LEVEL = 1.004<br /><br />
  RAISED_LEVEL1 = 1.014<br /><br />
  $SAVINGS_QUOTIENT = 2<br /><br />
  WAGES_QUOTIENT = 9</p><br />
<br />
<br />
<p>  attr_reader :hasjob</p><br />
<br />
<br />
<p>  def exercise!<br /><br />
    self.looks *= REGULAR_LEVEL<br /><br />
  end<br /><br />
  def learn!<br /><br />
    self.skill *= REGULAR_LEVEL<br /><br />
  end<br /><br />
  def lose_burger!<br /><br />
    self.burgers -= 1<br /><br />
  end<br /><br />
  def flirt!<br /><br />
    self.charisma *= REGULAR_LEVEL<br /><br />
  end<br /><br />
  def pavement!<br /><br />
    self.savvy *= RAISED_LEVEL1<br /><br />
  end<br /><br />
  def add_looks!<br /><br />
    self.looks += 1<br /><br />
    lose_point<br /><br />
  end<br /><br />
  def add_charisma!<br /><br />
    self.charisma += 1<br /><br />
    lose_point<br /><br />
  end<br /><br />
  def add_skill!<br /><br />
    self.skill += 1<br /><br />
    lose_point<br /><br />
  end<br /><br />
  def add_savvy!<br /><br />
    self.savvy += 1<br /><br />
    lose_point<br /><br />
  end</p><br />
<br />
<br />
<p>  def lose_point<br /><br />
    self.points_to_give -= 1<br /><br />
  end</p><br />
<br />
<br />
<p>  def haspoints?<br /><br />
    (self.points_to_give &gt; 0)<br /><br />
  end</p><br />
<br />
<br />
<p>  def hasjob?<br /><br />
    (self.works_at&gt;0)<br /><br />
  end</p><br />
<br />
<br />
<p>  def has_state?<br /><br />
    @state = State.find_by_user_id(current_user.id)<br /><br />
    defined? @state<br /><br />
  end</p><br />
<br />
<br />
<p>  def name_of_job<br /><br />
    Location.find(self.works_at).name<br /><br />
  end</p><br />
<br />
<br />
<p>  def gorandom!<br /><br />
    while self.points_to_give &gt; 5<br /><br />
      i = rand(90)<br /><br />
      i %= 5<br /><br />
      if i == 1 then<br /><br />
        self.add_skill!<br /><br />
      end<br /><br />
      if i == 2 then<br /><br />
        self.add_charisma!<br /><br />
      end<br /><br />
      if i == 3 then<br /><br />
        self.add_looks!<br /><br />
      end<br /><br />
      if i == 4 then<br /><br />
        self.add_savvy!<br /><br />
      end<br /><br />
    end<br /><br />
    #self.save<br /><br />
  end<br /><br />
  def calc_savings!<br /><br />
    #call this first<br /><br />
    if self.has_acct &gt; 0 and self.cash &gt; 0<br /><br />
      cash_on_hand = self.cash<br /><br />
      percentage = ($SAVINGS_QUOTIENT*self.has_acct)<br /><br />
      added_cash = ((cash_on_hand*percentage).to_i)/100<br /><br />
      self.cash += added_cash<br /><br />
      "You made $#{added_cash} in interest on your account. "<br /><br />
    else<br /><br />
      ""<br /><br />
    end<br /><br />
  end<br /><br />
  def clear_log!<br /><br />
    self.log = "Ok. "<br /><br />
  end<br /><br />
  def calc_wages!<br /><br />
    if self.has_job &gt; 0<br /><br />
      cash_wages = self.has_job * WAGES_QUOTIENT<br /><br />
      self.cash += cash_wages<br /><br />
      self.consecutive_work_hours += 1<br /><br />
      self.last_pay_date = Time.now<br /><br />
      "You made $#{cash_wages} working at #{Location.find(self.works_at).name}, hour ##{self.consecutive_work_hours}. "<br /><br />
    else<br /><br />
      ""<br /><br />
    end<br /><br />
  end<br /><br />
end<br /><br />
#end class<a href="http://www.digbox.net/index.php/RoR/a-simple-ruby-model">Original post</a> blogged on <a href="http://codeboxer.com">codeboxer.com</a>.</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">FEB</span> <span class="day">02</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/02/the-monstertrak-migration">the Monstertrak migration</a></h2>
			        <p class="teaser_info"><p>After over 9 months, literally the last 4 weeks non-stop, every day, I bring you - the migration. In effect. 5000 + lines of PL/SQL sexiness. This little puppy brought about a million company records and 300,000 student records over into the new Ruby on Rails schema which were then written into over 8 million contact, user, address, and account records.</p><br />
<br />
<br />
<p><a href='http://blog.kristeraxel.com/wp-content/uploads/2009/01/migration189.txt'>migration189</a></p><br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">JAN</span> <span class="day">12</span> <span class="year">2008</span> </h3></div>
			        <h2 class="post_link"><a href="/2008/01/pl-sql-split-function">PL SQL split function</a></h2>
			        <p class="teaser_info"><script src="https://gist.github.com/860981.js?file=pl_sql_split.sql"></script><br />
<br />
<br />
<br />
<br />
<p>--this is how you would use it in a cursor statement:</p><br />
<br />
<br />
<br />
<br />
<script src="https://gist.github.com/860989.js?file=cursor_pl_sql_split_sample.sql"></script><br />
<br />
<br />
<br />
<br />
<p>--copied from <a href="http://articles.techrepublic.com.com/5100-9592-5259821.html">http://articles.techrepublic.com.com/5100-9592-5259821.html</a></p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">DEC</span> <span class="day">04</span> <span class="year">2007</span> </h3></div>
			        <h2 class="post_link"><a href="/2007/12/inexpensive-max-queries-in-pl-sql">Inexpensive MAX queries in PL SQL</a></h2>
			        <p class="teaser_info"><p>This was a trick that one of our contractors showed me here at Monstertrak today. Basically, here&#039;s the gist. you&#039;ve got a join that you need to make, but you only ever want one record to return - you need to restrict the join to return one - and only one - sister record.<br /><br />
Common logic would have you doing a group by query against said table as a derived table, on the primary key and whatever other field encompasses the info you need to enforce your logic, and doing a self-join against that same table to pull in the rest of the fields you need, and then joining that back against the table you needed to join to in the first place.</p><br />
<br />
<br />
<p>Here&#039;s what that looks like -</p><br />
<br />
<br />
<p>SELECT MAIN_TABLE.*, JOIN_TABLE.*<br /><br />
FROM MAIN_TABLE<br /><br />
     ,JOIN_TABLE<br /><br />
     ,(SELECT MAX(ID) ID, USERNAME FROM JOIN_TABLE GROUP BY ID, USERNAME) JOIN_TABLE_GROUP_BY<br /><br />
WHERE MAIN_TABLE.ID = JOIN_TABLE.FOREIGN_KEY<br /><br />
AND JOIN_TABLE.ID = JOIN_TABLE_GROUP_BY.ID</p><br />
<br />
<br />
<p>There is a better way. You can save yourself the self-join by concatenating all of your needed fields into one calculated field, and doing the MAX() calculation with only ONE field in the GROUP BY. You put your criteria field far left, pad it enough to not chop any digits, concatenate in the rest of what you want, and then SUBSTR it back out in the end. Genius.</p><br />
<br />
<br />
<p>select c.id,<br /><br />
c.email,<br /><br />
trim(substr(v.val,13,10)) eaid,<br /><br />
trim(substr(v.val,23)) username<br /><br />
from MAIN_TABLE c,<br /><br />
(select max(rpad(company_id,12)||rpad(id,10)||username) val from JOIN_TABLE ea<br /><br />
where ea.LAST_LOGIN &gt; &#039;1-JAN-2006&#039;<br /><br />
group by ea.company_id) v<br /><br />
where c.id = trim(substr(v.val,1,12))<br /><br />
and length(c.email) &gt; 3<br /><br />
order by c.email asc, c.id desc;</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
                <div style="border: padding: 10px;">
			        <div><h3><span class="month">NOV</span> <span class="day">19</span> <span class="year">2007</span> </h3></div>
			        <h2 class="post_link"><a href="/2007/11/a-really-clean-dynamic-insert-proc-for-pl-sql-etl-packages">A really clean dynamic insert proc for PL SQL ETL packages</a></h2>
			        <p class="teaser_info"><p>A really clean dynamic insert proc for PL/SQL ETL packages. Pass in the table name, an array of field names and an array of values. Done.</p><br />
<br />
<br />
<p>PROCEDURE insert_row( p_tblname in varchar2, p_colname in v_array, p_value in v_array)<br /><br />
IS<br /><br />
--This procedure dynamically builds an insert string and executes.<br /><br />
v_stmt clob;<br /><br />
v_ret  number;<br /><br />
v_cntflag number := 1; --default start counter<br /><br />
no_parse_error exception;<br /><br />
pragma exception_init(no_parse_error,-1003); -- no parse error</p><br />
<br />
<br />
<p>BEGIN</p><br />
<br />
<br />
<p>-- VALIDATION CHECK<br /><br />
 IF p_tblname IS NULL THEN RETURN;<br /><br />
 ELSIF p_colname IS NULL OR p_colname.COUNT = 0 THEN RETURN;<br /><br />
 END IF;</p><br />
<br />
<br />
<p>--Build SQL statement for insert<br /><br />
v_stmt := &#039;insert into &#039; || p_tblname ||&#039;@optional_dblink.server.xxx&#039;|| &#039; ( &#039; || p_colname(1);</p><br />
<br />
<br />
<p>    for i in 2 .. p_colname.count<br /><br />
    loop<br /><br />
      v_stmt := v_stmt || &#039;, &#039; || p_colname(i);<br /><br />
    end loop;</p><br />
<br />
<br />
<p>if upper(p_colname(1)) = &#039;ID&#039; and p_value(1) = &#039;-999&#039; then<br /><br />
  v_cntflag := 2;<br /><br />
  v_stmt := v_stmt || &#039;) values (&#039;||p_tblname||&#039;_SEQ.NEXTVAL@optional_dblink.server.xxx&#039;;<br /><br />
else<br /><br />
  v_cntflag := 1;<br /><br />
  v_stmt := v_stmt || &#039;) values ( :bv1&#039;;<br /><br />
end if;</p><br />
<br />
<br />
<p>    for i in 2 .. p_colname.count<br /><br />
    loop<br /><br />
      v_stmt := v_stmt || &#039;, :bv&#039; || i;<br /><br />
    end loop;</p><br />
<br />
<br />
<p>v_stmt := v_stmt || &#039;)&#039;;<br /><br />
--dbms_output.put_line(v_stmt);</p><br />
<br />
<br />
<p>        -- this check is done to ensure that there is no hard parse by storing previously<br /><br />
        -- parsed queries into a global array variable within this session<br /><br />
        -- Using dbms_sql instead of execute immediate because the number of bind variables is unknown.<br /><br />
        p_cursor := parse_tbl.first;<br /><br />
        while ( p_cursor IS NOT NULL and (parse_tbl(p_cursor) != v_stmt) )<br /><br />
        loop<br /><br />
            p_cursor := parse_tbl.next(p_cursor);<br /><br />
        end loop;</p><br />
<br />
<br />
<p>        if ( p_cursor IS NULL or (parse_tbl(p_cursor) != v_stmt) )<br /><br />
        then<br /><br />
            p_cursor := dbms_sql.open_cursor;<br /><br />
            dbms_sql.parse(  p_cursor, v_stmt, dbms_sql.native );<br /><br />
            parse_tbl(p_cursor) := v_stmt;<br /><br />
        end if;</p><br />
<br />
<br />
<p>    for i in v_cntflag .. p_value.count<br /><br />
    loop<br /><br />
      --dbms_output.put_line(&#039;val&#039;||i||&#039;-&#039;||p_value(i));<br /><br />
      dbms_sql.bind_variable( p_cursor, &#039;:bv&#039; || i, p_value(i) );<br /><br />
    end loop;</p><br />
<br />
<br />
<p>    v_ret := dbms_sql.execute( p_cursor );</p><br />
<br />
<br />
<p>EXCEPTION<br /><br />
WHEN no_parse_error then<br /><br />
            p_cursor := dbms_sql.open_cursor;<br /><br />
            dbms_sql.parse(p_cursor, v_stmt, dbms_sql.native );<br /><br />
            parse_tbl(p_cursor) := v_stmt;<br /><br />
            for i in v_cntflag .. p_value.count<br /><br />
            loop<br /><br />
              dbms_sql.bind_variable( p_cursor, &#039;:bv&#039; || i, p_value(i) );<br /><br />
            end loop;<br /><br />
            v_ret := dbms_sql.execute( p_cursor );</p><br />
<br />
<br />
<p>WHEN OTHERS THEN<br /><br />
log_exception(&#039;insert_row:&#039; || p_tblname,   p_tblname,   SQLCODE || sqlerrm,   SUBSTR(query_text,   1,   400));<br /><br />
END insert_row;<br /><br />
</p><br />
<br />
</p><br/>
			        <div class="categories">
					    Filed under 
					    
						    <a href="/category/Code/">Code</a> 
			            <br/><br/>
			        </div>
				</div><hr>
			
			
		</div>
		<div id="ft">
			<br/>
<hr/>
<table id="footer">
	<tr>
	  <td><span class="leftcol">
	    <ul>
	      <li><a href="http://www.kristeraxel.com" rel="me" title="my home page" target="_blank">kristeraxel.com</a></li>
	      <li><a href="http://axelradio.com" rel="me" title="Download songs by Krister Axel and read the lyrics." target="_blank">Lyrics + Downloads</a></li>
	      <li><a href="http://axel.me/mouse" rel="me" title="view my media stream at rebelmouse" target="_blank">videos</a></li>
	    </ul>
		</span>
	  </td>
	  <td><span class="midcol">
	    <small>&copy; 28 November 2012 Krister Axel<br/>All Rights Reserved.</small>
		</span>
	  </td>
	  <td><span class="rightcol">
	    <small>designed by <a href="http://kristeraxel.com">Krister Axel</a><br/>powered by <a href="https://github.com/mojombo/jekyll">Jekyll</a></small>
		</span>
	  </td>
	</tr>
	
</table>
		</div>
	</div>
	</body>

</html>